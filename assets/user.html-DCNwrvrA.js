import{_ as p}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as i,o as u,c as r,b as o,w as a,a as n,f as c,d as s}from"./app-DR5J2daJ.js";const k={},d=n("h2",{id:"用户管理",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#用户管理"},[n("span",null,"用户管理")])],-1),m=n("h3",{id:"查询用户",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#查询用户"},[n("span",null,"查询用户")])],-1),v=n("div",{class:"language-sql line-numbers-mode","data-ext":"sql","data-title":"sql"},[n("pre",{class:"language-sql"},[n("code",null,[n("span",{class:"token keyword"},"SELECT"),s(),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token keyword"},"FROM"),s(" dba_users"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),b=n("div",{class:"language-sql line-numbers-mode","data-ext":"sql","data-title":"sql"},[n("pre",{class:"language-sql"},[n("code",null,[n("span",{class:"token comment"},"-- select * from v$sysaux_occupants;"),s(`
`),n("span",{class:"token comment"},"-- select * from sys.default_pwd$;"),s(`
`),n("span",{class:"token keyword"},"select"),s(),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token keyword"},"from"),s(" dba_users "),n("span",{class:"token keyword"},"where"),s(" username "),n("span",{class:"token operator"},"not"),s(),n("span",{class:"token operator"},"in"),s(),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"select"),s(" user_name "),n("span",{class:"token keyword"},"from"),s(" sys"),n("span",{class:"token punctuation"},"."),s("default_pwd$"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),_=n("div",{class:"language-sql line-numbers-mode","data-ext":"sql","data-title":"sql"},[n("pre",{class:"language-sql"},[n("code",null,[n("span",{class:"token keyword"},"SELECT"),s(`
    created`),n("span",{class:"token punctuation"},","),s(`
    username`),n("span",{class:"token punctuation"},","),s(`
    oracle_maintained`),n("span",{class:"token punctuation"},","),s(`
    common`),n("span",{class:"token punctuation"},","),s(`
    no_exp`),n("span",{class:"token punctuation"},","),s(`
    no_expdp`),n("span",{class:"token punctuation"},","),s(`
    no_sby`),n("span",{class:"token punctuation"},","),s(`
    default_password`),n("span",{class:"token punctuation"},","),s(`
    sysaux`),n("span",{class:"token punctuation"},","),s(`
    occupant_desc
`),n("span",{class:"token keyword"},"FROM"),s(`
    dba_users
    `),n("span",{class:"token keyword"},"LEFT"),s(),n("span",{class:"token keyword"},"OUTER"),s(),n("span",{class:"token keyword"},"JOIN"),s(),n("span",{class:"token punctuation"},"("),s(`
        `),n("span",{class:"token keyword"},"SELECT"),s(),n("span",{class:"token keyword"},"DISTINCT"),s(`
            name username`),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token string"},"'Y'"),s(`  no_expdp
        `),n("span",{class:"token keyword"},"FROM"),s(`
            sys`),n("span",{class:"token punctuation"},"."),s(`ku_noexp_tab
        `),n("span",{class:"token keyword"},"WHERE"),s(`
            obj_type `),n("span",{class:"token operator"},"="),s(),n("span",{class:"token string"},"'SCHEMA'"),s(`
    `),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"USING"),s(),n("span",{class:"token punctuation"},"("),s(" username "),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"LEFT"),s(),n("span",{class:"token keyword"},"OUTER"),s(),n("span",{class:"token keyword"},"JOIN"),s(),n("span",{class:"token punctuation"},"("),s(`
        `),n("span",{class:"token keyword"},"SELECT"),s(),n("span",{class:"token keyword"},"DISTINCT"),s(`
            name username`),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token string"},"'Y'"),s(`  no_exp
        `),n("span",{class:"token keyword"},"FROM"),s(`
            sys`),n("span",{class:"token punctuation"},"."),s(`exu8usr
    `),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"USING"),s(),n("span",{class:"token punctuation"},"("),s(" username "),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"LEFT"),s(),n("span",{class:"token keyword"},"OUTER"),s(),n("span",{class:"token keyword"},"JOIN"),s(),n("span",{class:"token punctuation"},"("),s(`
        `),n("span",{class:"token keyword"},"SELECT"),s(),n("span",{class:"token keyword"},"DISTINCT"),s(`
            name username`),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token string"},"'Y'"),s(`  no_sby
        `),n("span",{class:"token keyword"},"FROM"),s(`
            system`),n("span",{class:"token punctuation"},"."),s(`logstdby$skip_support
        `),n("span",{class:"token keyword"},"WHERE"),s(`
            `),n("span",{class:"token keyword"},"action"),s(),n("span",{class:"token operator"},"IN"),s(),n("span",{class:"token punctuation"},"("),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token operator"},"-"),s(),n("span",{class:"token number"},"1"),s(),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"USING"),s(),n("span",{class:"token punctuation"},"("),s(" username "),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"LEFT"),s(),n("span",{class:"token keyword"},"OUTER"),s(),n("span",{class:"token keyword"},"JOIN"),s(),n("span",{class:"token punctuation"},"("),s(`
        `),n("span",{class:"token keyword"},"SELECT"),s(),n("span",{class:"token keyword"},"DISTINCT"),s(`
            user_name username`),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token string"},"'Y'"),s(`       default_password
        `),n("span",{class:"token keyword"},"FROM"),s(`
            sys`),n("span",{class:"token punctuation"},"."),s(`default_pwd$
    `),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"USING"),s(),n("span",{class:"token punctuation"},"("),s(" username "),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token keyword"},"LEFT"),s(),n("span",{class:"token keyword"},"OUTER"),s(),n("span",{class:"token keyword"},"JOIN"),s(),n("span",{class:"token punctuation"},"("),s(`
        `),n("span",{class:"token keyword"},"SELECT"),s(`
            schema_name username`),n("span",{class:"token punctuation"},","),s(`
            `),n("span",{class:"token string"},"'Y'"),s("         sysaux"),n("span",{class:"token punctuation"},","),s(`
            decode`),n("span",{class:"token punctuation"},"("),s(`
                `),n("span",{class:"token function"},"COUNT"),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"*"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token function"},"MIN"),n("span",{class:"token punctuation"},"("),s("occupant_desc"),n("span",{class:"token punctuation"},")"),s(`
            `),n("span",{class:"token punctuation"},")"),s(`           occupant_desc
        `),n("span",{class:"token keyword"},"FROM"),s(`
            v$sysaux_occupants
        `),n("span",{class:"token keyword"},"GROUP"),s(),n("span",{class:"token keyword"},"BY"),s(`
            schema_name
    `),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"USING"),s(),n("span",{class:"token punctuation"},"("),s(" username "),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token keyword"},"ORDER"),s(),n("span",{class:"token keyword"},"BY"),s(`
    created`),n("span",{class:"token punctuation"},","),s(`
    username`),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),E=c(`<div class="hint-container tip"><p class="hint-container-title">提示</p><p>Oracle 12c可以通过DBA_USERS数据字典视图的ORACLE_MAINTAINED判断是否是Oracle默认创建的用户！</p></div><h3 id="创建用户" tabindex="-1"><a class="header-anchor" href="#创建用户"><span>创建用户</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token operator">&lt;</span>username<span class="token operator">&gt;</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token operator">&lt;</span>password<span class="token operator">&gt;</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">TABLESPACE</span> <span class="token operator">&lt;</span>tablespace_name<span class="token operator">&gt;</span> <span class="token punctuation">[</span>AUOTA <span class="token operator">&lt;</span>size<span class="token operator">&gt;</span> <span class="token keyword">ON</span> <span class="token operator">&lt;</span>tablespace_name<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">TEMPORARY</span> <span class="token keyword">TABLESPACE</span> <span class="token operator">&lt;</span>tablespace_name<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>PROFILE <span class="token operator">&lt;</span>profile_name<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><ul><li>对于普通用户名，用户创建的普通用户名必须以普通用户前缀开头。默认情况下，对于 CDB 普通用户，此前缀为C##. 对于应用程序普通用户，此前缀为空字符串。这意味着对于可以分配给应用程序普通用户的名称没有任何限制，除了它不能以为CDB普通用户保留的前缀开头。例如，您可以命名一个 CDB 普通用户c##hr_admin和一个应用程序普通用户hr_admin。</li><li>COMMON_USER_PREFIX参数CDB$ROOT定义公共用户前缀。</li><li>对于本地用户名，名称不能以C##（或c##）开头。</li><li>用户和角色不能具有相同的名称。</li></ul></blockquote><h3 id="更改用户密码" tabindex="-1"><a class="header-anchor" href="#更改用户密码"><span>更改用户密码</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token operator">&lt;</span>username<span class="token operator">&gt;</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token operator">&lt;</span>password<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="锁定用户" tabindex="-1"><a class="header-anchor" href="#锁定用户"><span>锁定用户</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token operator">&lt;</span>username<span class="token operator">&gt;</span> ACCOUNT <span class="token keyword">LOCK</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="删除用户" tabindex="-1"><a class="header-anchor" href="#删除用户"><span>删除用户</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">USER</span> <span class="token operator">&lt;</span>username<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token keyword">CASCADE</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><ul><li>CASCADE删除用户以及依赖于用户拥有的表的所有关联对象和外键。</li><li>如果要删除的用户正处于会话中，需要先清理用户登录的会话才能删除用户。</li></ul></blockquote><h2 id="用户权限与角色" tabindex="-1"><a class="header-anchor" href="#用户权限与角色"><span>用户权限与角色</span></a></h2><p>权限和角色用于控制用户对数据的访问以及可以执行的 SQL 语句的类型。</p><table><thead><tr><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>系统权限</td><td>系统定义的特权，通常仅由管理员授予。这些权限允许用户执行特定的数据库操作。</td></tr><tr><td>对象特权</td><td>一种系统定义的权限，用于控制对特定对象的访问。</td></tr><tr><td>角色</td><td>特权和其他角色的集合。存在一些系统定义的角色，但大多数是由管理员创建的。角色将权限和其他角色组合在一起，这有助于向用户授予多个权限和角色。</td></tr></tbody></table><h3 id="角色权限相关视图" tabindex="-1"><a class="header-anchor" href="#角色权限相关视图"><span>角色权限相关视图</span></a></h3>`,15),y=n("div",{class:"language-sql line-numbers-mode","data-ext":"sql","data-title":"sql"},[n("pre",{class:"language-sql"},[n("code",null,[n("span",{class:"token keyword"},"SELECT"),s(),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token keyword"},"FROM"),s(" dba_sys_privs "),n("span",{class:"token keyword"},"WHERE"),s(" grantee"),n("span",{class:"token operator"},"="),n("span",{class:"token string"},"'<username or role>'"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),g=n("div",{class:"language-sql line-numbers-mode","data-ext":"sql","data-title":"sql"},[n("pre",{class:"language-sql"},[n("code",null,[n("span",{class:"token keyword"},"SELECT"),s(),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token keyword"},"FROM"),s(" dba_role_privs "),n("span",{class:"token keyword"},"WHERE"),s(" grantee"),n("span",{class:"token operator"},"="),n("span",{class:"token string"},"'<username or role>'"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),w=n("div",{class:"language-sql line-numbers-mode","data-ext":"sql","data-title":"sql"},[n("pre",{class:"language-sql"},[n("code",null,[n("span",{class:"token keyword"},"SELECT"),s(),n("span",{class:"token operator"},"*"),s(),n("span",{class:"token keyword"},"FROM"),s(" dba_tab_privs "),n("span",{class:"token keyword"},"WHERE"),s(" grantee"),n("span",{class:"token operator"},"="),n("span",{class:"token string"},"'<username or role>'"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),h=c(`<h3 id="授权系统权限给用户或角色" tabindex="-1"><a class="header-anchor" href="#授权系统权限给用户或角色"><span>授权系统权限给用户或角色</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">GRANT</span> <span class="token keyword">CREATE</span> <span class="token keyword">SESSION</span> <span class="token keyword">TO</span> <span class="token operator">&lt;</span>username <span class="token operator">or</span> role<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><ul><li><code>UNLIMITED TABLESPACE</code>权限不能授予给角色。</li></ul></blockquote><h3 id="授权角色给用户或角色" tabindex="-1"><a class="header-anchor" href="#授权角色给用户或角色"><span>授权角色给用户或角色</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">GRANT</span> <span class="token operator">&lt;</span>role<span class="token operator">&gt;</span> <span class="token keyword">TO</span> <span class="token operator">&lt;</span>username <span class="token operator">or</span> role<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="授予对象权限给用户或角色" tabindex="-1"><a class="header-anchor" href="#授予对象权限给用户或角色"><span>授予对象权限给用户或角色</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span><span class="token punctuation">,</span><span class="token keyword">UPDATE</span> <span class="token keyword">ON</span> <span class="token operator">&lt;</span><span class="token keyword">schema</span><span class="token operator">&gt;</span><span class="token punctuation">.</span><span class="token operator">&lt;</span>table_name<span class="token operator">&gt;</span> <span class="token keyword">TO</span> <span class="token operator">&lt;</span>username <span class="token operator">or</span> role<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="用户配置文件" tabindex="-1"><a class="header-anchor" href="#用户配置文件"><span>用户配置文件</span></a></h2><p>配置文件是一组命名的资源限制和密码参数，用于限制用户的数据库使用和实例资源。</p><h3 id="查询配置文件" tabindex="-1"><a class="header-anchor" href="#查询配置文件"><span>查询配置文件</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
    <span class="token operator">*</span>
<span class="token keyword">FROM</span>
    dba_profiles
<span class="token keyword">WHERE</span>
    profile <span class="token operator">=</span> <span class="token string">&#39;&lt;profile_name&gt;&#39;</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
    resource_type<span class="token punctuation">,</span>
    resource_name<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="创建配置文件" tabindex="-1"><a class="header-anchor" href="#创建配置文件"><span>创建配置文件</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> PROFILE <span class="token operator">&lt;</span>profile_name<span class="token operator">&gt;</span> <span class="token keyword">LIMIT</span>
    COMPOSITE_LIMIT UNLIMITED
    CONNECT_TIME <span class="token number">120</span>
    CPU_PER_CALL UNLIMITED
    CPU_PER_SESSION UNLIMITED
    IDLE_TIME <span class="token number">120</span>
    LOGICAL_READS_PER_CALL UNLIMITED
    LOGICAL_READS_PER_SESSION UNLIMITED
    PRIVATE_SGA UNLIMITED
    SESSIONS_PER_USER UNLIMITED
    FAILED_LOGIN_ATTEMPTS <span class="token number">10</span>
    PASSWORD_GRACE_TIME <span class="token number">7</span>
    PASSWORD_LIFE_TIME UNLIMITED
    PASSWORD_LOCK_TIME <span class="token number">1</span>
    PASSWORD_REUSE_MAX UNLIMITED
    PASSWORD_REUSE_TIME UNLIMITED<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="为用户制定配置文件" tabindex="-1"><a class="header-anchor" href="#为用户制定配置文件"><span>为用户制定配置文件</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token operator">&lt;</span>username<span class="token operator">&gt;</span> PROFILE <span class="token operator">&lt;</span>profile_name<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="删除配置文件" tabindex="-1"><a class="header-anchor" href="#删除配置文件"><span>删除配置文件</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">DROP</span> PROFILE <span class="token operator">&lt;</span>profile_name<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token keyword">CASCADE</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><ul><li>删除配置文件时，删除不会影响当前活动的会话。只有在删除配置文件后创建的会话才使用修改后的配置文件分配。要删除配置文件，您必须具有DROP PROFILE系统权限。您不能删除默认配置文件。</li><li>要删除当前分配给用户的配置文件，请使用该CASCADE选项。</li></ul></blockquote><h2 id="数据库连接限制" tabindex="-1"><a class="header-anchor" href="#数据库连接限制"><span>数据库连接限制</span></a></h2><h3 id="客户端限制" tabindex="-1"><a class="header-anchor" href="#客户端限制"><span>客户端限制</span></a></h3><ul><li>创建表</li></ul><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token comment">-- 记录登录信息</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> ysdba<span class="token punctuation">.</span>t_abelit_logon
 <span class="token punctuation">(</span>
    <span class="token keyword">session_user</span>      varchar2<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    session_id        number<span class="token punctuation">,</span>
    session_sid       number<span class="token punctuation">,</span>
    client_host       varchar2<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    client_ip         varchar2<span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    client_osuser     varchar2<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    client_module     varchar2<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    isdba             varchar2<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    logon_time        <span class="token keyword">timestamp</span>
 <span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token comment">-- 客户端黑名单</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> ysdba<span class="token punctuation">.</span>t_abelit_client_blacklist
 <span class="token punctuation">(</span>
    module        varchar2<span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
 <span class="token punctuation">)</span><span class="token punctuation">;</span> 
 
<span class="token comment">-- IP白名单</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> ysdba<span class="token punctuation">.</span>t_abelit_ip_whitelist
 <span class="token punctuation">(</span>
    client_ip     varchar2<span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span>
 <span class="token punctuation">)</span><span class="token punctuation">;</span> 


<span class="token comment">-- 黑名单客户端</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> ysdba<span class="token punctuation">.</span>t_abelit_client_blacklist <span class="token punctuation">(</span>MODULE<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;PL/SQL Developer&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> ysdba<span class="token punctuation">.</span>t_abelit_client_blacklist <span class="token punctuation">(</span>MODULE<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;navicat.exe&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> ysdba<span class="token punctuation">.</span>t_abelit_client_blacklist <span class="token punctuation">(</span>MODULE<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;PLSQLDEV.EXE&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> ysdba<span class="token punctuation">.</span>t_abelit_client_blacklist <span class="token punctuation">(</span>MODULE<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;SQL DEVELOPER&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> ysdba<span class="token punctuation">.</span>t_abelit_client_blacklist <span class="token punctuation">(</span>MODULE<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;SQL*PLUS&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> ysdba<span class="token punctuation">.</span>t_abelit_client_blacklist <span class="token punctuation">(</span>MODULE<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;SQLPLUS&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">COMMIT</span><span class="token punctuation">;</span> 

<span class="token comment">-- 白名单IP</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> ysdba<span class="token punctuation">.</span>t_abelit_ip_whitelist <span class="token punctuation">(</span>CLIENT_IP<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">&#39;10.10.12.166&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">COMMIT</span><span class="token punctuation">;</span> 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>创建数据库触发器</li></ul>`,23),R=n("div",{class:"language-sql line-numbers-mode","data-ext":"sql","data-title":"sql"},[n("pre",{class:"language-sql"},[n("code",null,[n("span",{class:"token keyword"},"CREATE"),s(),n("span",{class:"token operator"},"OR"),s(),n("span",{class:"token keyword"},"REPLACE"),s(),n("span",{class:"token keyword"},"TRIGGER"),s(" ysdba"),n("span",{class:"token punctuation"},"."),s("tri_abelit_logon_limit "),n("span",{class:"token keyword"},"AFTER"),s(" LOGON "),n("span",{class:"token keyword"},"ON"),s(),n("span",{class:"token keyword"},"DATABASE"),s(),n("span",{class:"token keyword"},"DECLARE"),s(`
    p_session_user  VARCHAR2`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"64"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    p_session_id    NUMBER`),n("span",{class:"token punctuation"},";"),s(`
    p_session_sid   NUMBER`),n("span",{class:"token punctuation"},";"),s(`
    p_client_host   VARCHAR2`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"64"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    p_client_ip     VARCHAR2`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"64"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    p_client_osuser VARCHAR2`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"64"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    p_client_module VARCHAR2`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"64"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    p_dba  VARCHAR2`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"10"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    p_ip_count number`),n("span",{class:"token punctuation"},";"),s(`
    p_client_count number`),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"BEGIN"),s(`
    `),n("span",{class:"token comment"},"-- get current user"),s(`
    `),n("span",{class:"token keyword"},"SELECT"),s(`
        upper`),n("span",{class:"token punctuation"},"("),s("sys_context"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'USERENV'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'SESSION_USER'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        upper`),n("span",{class:"token punctuation"},"("),s("sys_context"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'USERENV'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'SESSIONID'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        upper`),n("span",{class:"token punctuation"},"("),s("sys_context"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'USERENV'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'SID'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        upper`),n("span",{class:"token punctuation"},"("),s("sys_context"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'USERENV'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'HOST'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        upper`),n("span",{class:"token punctuation"},"("),s("sys_context"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'USERENV'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'IP_ADDRESS'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        upper`),n("span",{class:"token punctuation"},"("),s("sys_context"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'USERENV'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'OS_USER'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        upper`),n("span",{class:"token punctuation"},"("),s("sys_context"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'USERENV'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'MODULE'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        upper`),n("span",{class:"token punctuation"},"("),s("sys_context"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'USERENV'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'ISDBA'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token keyword"},"INTO"),s(` 
        p_session_user`),n("span",{class:"token punctuation"},","),s(`
        p_session_id`),n("span",{class:"token punctuation"},","),s(`
        p_session_sid`),n("span",{class:"token punctuation"},","),s(`
        p_client_host`),n("span",{class:"token punctuation"},","),s(`
        p_client_ip`),n("span",{class:"token punctuation"},","),s(`
        p_client_osuser`),n("span",{class:"token punctuation"},","),s(`
        p_client_module`),n("span",{class:"token punctuation"},","),s(`
        p_dba
    `),n("span",{class:"token keyword"},"FROM"),s(`
        dual`),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token keyword"},"SELECT"),s(`
        `),n("span",{class:"token function"},"count"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"into"),s(` p_ip_count
    `),n("span",{class:"token keyword"},"FROM"),s(`
        ysdba`),n("span",{class:"token punctuation"},"."),s(`t_abelit_ip_whitelist 
    `),n("span",{class:"token keyword"},"WHERE"),s(" upper"),n("span",{class:"token punctuation"},"("),s("client_ip"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"="),s("p_client_ip"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"-- SELECT"),s(`
    `),n("span",{class:"token comment"},"--     count(1) into p_client_count"),s(`
    `),n("span",{class:"token comment"},"-- FROM"),s(`
    `),n("span",{class:"token comment"},"--     ysdba.t_abelit_client_blacklist "),s(`
    `),n("span",{class:"token comment"},"-- WHERE upper(module)=p_client_module;"),s(`

    `),n("span",{class:"token keyword"},"SELECT"),s(`
        `),n("span",{class:"token function"},"count"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"into"),s(` p_client_count
    `),n("span",{class:"token keyword"},"FROM"),s(`
        ysdba`),n("span",{class:"token punctuation"},"."),s(`t_abelit_client_blacklist 
    `),n("span",{class:"token keyword"},"WHERE"),s(" instr"),n("span",{class:"token punctuation"},"("),s("p_client_module"),n("span",{class:"token punctuation"},","),s("upper"),n("span",{class:"token punctuation"},"("),s("module"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},">"),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},";"),s(`


    `),n("span",{class:"token keyword"},"IF"),s(),n("span",{class:"token punctuation"},"("),s(`
        `),n("span",{class:"token punctuation"},"("),s(" p_client_count "),n("span",{class:"token operator"},">"),s(),n("span",{class:"token number"},"0"),s(),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token operator"},"AND"),s(),n("span",{class:"token punctuation"},"("),s(" p_ip_count "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"THEN"),s(`
        `),n("span",{class:"token keyword"},"INSERT"),s(),n("span",{class:"token keyword"},"INTO"),s(" ysdba"),n("span",{class:"token punctuation"},"."),s("t_abelit_logon "),n("span",{class:"token keyword"},"VALUES"),s(),n("span",{class:"token punctuation"},"("),s(`
            p_session_user`),n("span",{class:"token punctuation"},","),s(`
            p_session_id`),n("span",{class:"token punctuation"},","),s(`
            p_session_sid`),n("span",{class:"token punctuation"},","),s(`
            p_client_host`),n("span",{class:"token punctuation"},","),s(`
            p_client_ip`),n("span",{class:"token punctuation"},","),s(`
            p_client_osuser`),n("span",{class:"token punctuation"},","),s(`
            p_client_module`),n("span",{class:"token punctuation"},","),s(`
            p_dba`),n("span",{class:"token punctuation"},","),s(`
            sysdate
        `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token keyword"},"COMMIT"),n("span",{class:"token punctuation"},";"),s(`
        raise_application_error`),n("span",{class:"token punctuation"},"("),s(`
                               `),n("span",{class:"token operator"},"-"),n("span",{class:"token number"},"20003"),n("span",{class:"token punctuation"},","),s(`
                               `),n("span",{class:"token string"},"'您的连接未被许可，请使用堡垒机登录连接数据库,如有疑问，请联系DBA！'"),s(`
        `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"END"),s(),n("span",{class:"token keyword"},"IF"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"END"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),S=n("div",{class:"language-sql line-numbers-mode","data-ext":"sql","data-title":"sql"},[n("pre",{class:"language-sql"},[n("code",null,[n("span",{class:"token keyword"},"create"),s(),n("span",{class:"token operator"},"or"),s(),n("span",{class:"token keyword"},"replace"),s(),n("span",{class:"token keyword"},"TRIGGER"),s(" ysdba"),n("span",{class:"token punctuation"},"."),s("tri_abelit_logon_limit "),n("span",{class:"token keyword"},"AFTER"),s(" LOGON "),n("span",{class:"token keyword"},"ON"),s(),n("span",{class:"token keyword"},"DATABASE"),s(),n("span",{class:"token keyword"},"DECLARE"),s(`
    p_session_user  VARCHAR2`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"64"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    p_session_id    NUMBER`),n("span",{class:"token punctuation"},";"),s(`
    p_session_sid   NUMBER`),n("span",{class:"token punctuation"},";"),s(`
    p_client_host   VARCHAR2`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"64"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    p_client_ip     VARCHAR2`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"64"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    p_client_osuser VARCHAR2`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"64"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    p_client_module VARCHAR2`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"64"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    p_dba  VARCHAR2`),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"10"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

    p_ip_count number`),n("span",{class:"token punctuation"},";"),s(`
    p_client_count number`),n("span",{class:"token punctuation"},";"),s(`
`),n("span",{class:"token keyword"},"BEGIN"),s(`
    `),n("span",{class:"token comment"},"-- get current user"),s(`
    `),n("span",{class:"token keyword"},"SELECT"),s(`
        upper`),n("span",{class:"token punctuation"},"("),s("sys_context"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'USERENV'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'SESSION_USER'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        upper`),n("span",{class:"token punctuation"},"("),s("sys_context"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'USERENV'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'SESSIONID'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        upper`),n("span",{class:"token punctuation"},"("),s("sys_context"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'USERENV'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'SID'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        upper`),n("span",{class:"token punctuation"},"("),s("sys_context"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'USERENV'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'HOST'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        upper`),n("span",{class:"token punctuation"},"("),s("sys_context"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'USERENV'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'IP_ADDRESS'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        upper`),n("span",{class:"token punctuation"},"("),s("sys_context"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'USERENV'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'OS_USER'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        upper`),n("span",{class:"token punctuation"},"("),s("sys_context"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'USERENV'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'MODULE'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},","),s(`
        upper`),n("span",{class:"token punctuation"},"("),s("sys_context"),n("span",{class:"token punctuation"},"("),n("span",{class:"token string"},"'USERENV'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'ISDBA'"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token keyword"},"INTO"),s(` 
        p_session_user`),n("span",{class:"token punctuation"},","),s(`
        p_session_id`),n("span",{class:"token punctuation"},","),s(`
        p_session_sid`),n("span",{class:"token punctuation"},","),s(`
        p_client_host`),n("span",{class:"token punctuation"},","),s(`
        p_client_ip`),n("span",{class:"token punctuation"},","),s(`
        p_client_osuser`),n("span",{class:"token punctuation"},","),s(`
        p_client_module`),n("span",{class:"token punctuation"},","),s(`
        p_dba
    `),n("span",{class:"token keyword"},"FROM"),s(`
        dual`),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token keyword"},"SELECT"),s(`
        `),n("span",{class:"token function"},"count"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"into"),s(` p_ip_count
    `),n("span",{class:"token keyword"},"FROM"),s(`
        ysdba`),n("span",{class:"token punctuation"},"."),s(`t_abelit_ip_whitelist 
    `),n("span",{class:"token keyword"},"WHERE"),s(" upper"),n("span",{class:"token punctuation"},"("),s("client_ip"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"="),s("p_client_ip"),n("span",{class:"token punctuation"},";"),s(`

    `),n("span",{class:"token comment"},"-- SELECT"),s(`
    `),n("span",{class:"token comment"},"--     count(1) into p_client_count"),s(`
    `),n("span",{class:"token comment"},"-- FROM"),s(`
    `),n("span",{class:"token comment"},"--     ysdba.t_abelit_client_blacklist "),s(`
    `),n("span",{class:"token comment"},"-- WHERE upper(module)=p_client_module;"),s(`

    `),n("span",{class:"token keyword"},"SELECT"),s(`
        `),n("span",{class:"token function"},"count"),n("span",{class:"token punctuation"},"("),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"into"),s(` p_client_count
    `),n("span",{class:"token keyword"},"FROM"),s(`
        ysdba`),n("span",{class:"token punctuation"},"."),s(`t_abelit_client_blacklist 
    `),n("span",{class:"token keyword"},"WHERE"),s(" instr"),n("span",{class:"token punctuation"},"("),s("p_client_module"),n("span",{class:"token punctuation"},","),s("upper"),n("span",{class:"token punctuation"},"("),s("module"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},">"),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},";"),s(`


    `),n("span",{class:"token keyword"},"IF"),s(),n("span",{class:"token punctuation"},"("),s(`
        `),n("span",{class:"token punctuation"},"("),s(" p_client_count "),n("span",{class:"token operator"},">"),s(),n("span",{class:"token number"},"0"),s(),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token operator"},"AND"),s(),n("span",{class:"token punctuation"},"("),s(" p_ip_count "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(),n("span",{class:"token punctuation"},")"),s(`
        `),n("span",{class:"token operator"},"AND"),s(),n("span",{class:"token punctuation"},"("),s(" p_client_osuser "),n("span",{class:"token operator"},"<>"),s(),n("span",{class:"token string"},"'ABELIT'"),s(),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"THEN"),s(`
        `),n("span",{class:"token keyword"},"INSERT"),s(),n("span",{class:"token keyword"},"INTO"),s(" ysdba"),n("span",{class:"token punctuation"},"."),s("t_abelit_logon "),n("span",{class:"token keyword"},"VALUES"),s(),n("span",{class:"token punctuation"},"("),s(`
            p_session_user`),n("span",{class:"token punctuation"},","),s(`
            p_session_id`),n("span",{class:"token punctuation"},","),s(`
            p_session_sid`),n("span",{class:"token punctuation"},","),s(`
            p_client_host`),n("span",{class:"token punctuation"},","),s(`
            p_client_ip`),n("span",{class:"token punctuation"},","),s(`
            p_client_osuser`),n("span",{class:"token punctuation"},","),s(`
            p_client_module`),n("span",{class:"token punctuation"},","),s(`
            p_dba`),n("span",{class:"token punctuation"},","),s(`
            sysdate
        `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`

        `),n("span",{class:"token keyword"},"COMMIT"),n("span",{class:"token punctuation"},";"),s(`
        raise_application_error`),n("span",{class:"token punctuation"},"("),s(`
                               `),n("span",{class:"token operator"},"-"),n("span",{class:"token number"},"20003"),n("span",{class:"token punctuation"},","),s(`
                               `),n("span",{class:"token string"},"'您的连接未被许可，请使用堡垒机登录连接数据库,如有疑问，请联系DBA！'"),s(`
        `),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},";"),s(`
    `),n("span",{class:"token keyword"},"END"),s(),n("span",{class:"token keyword"},"IF"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"END"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1);function T(A,I){const l=i("CodeTabs");return u(),r("div",null,[d,m,o(l,{id:"6",data:[{id:"11g-"},{id:"自建用户"},{id:"用户类型（12c+）"}],active:0},{title0:a(({value:e,isActive:t})=>[s("11g-")]),title1:a(({value:e,isActive:t})=>[s("自建用户")]),title2:a(({value:e,isActive:t})=>[s("用户类型（12c+）")]),tab0:a(({value:e,isActive:t})=>[v]),tab1:a(({value:e,isActive:t})=>[b]),tab2:a(({value:e,isActive:t})=>[_]),_:1}),E,o(l,{id:"123",data:[{id:"系统权限"},{id:"角色权限"},{id:"对象权限"}],active:0},{title0:a(({value:e,isActive:t})=>[s("系统权限")]),title1:a(({value:e,isActive:t})=>[s("角色权限")]),title2:a(({value:e,isActive:t})=>[s("对象权限")]),tab0:a(({value:e,isActive:t})=>[y]),tab1:a(({value:e,isActive:t})=>[g]),tab2:a(({value:e,isActive:t})=>[w]),_:1}),h,o(l,{id:"212",data:[{id:"客户端IP模式"},{id:"客户端IP主机名模式"}],active:0},{title0:a(({value:e,isActive:t})=>[s("客户端IP模式")]),title1:a(({value:e,isActive:t})=>[s("客户端IP主机名模式")]),tab0:a(({value:e,isActive:t})=>[R]),tab1:a(({value:e,isActive:t})=>[S]),_:1})])}const L=p(k,[["render",T],["__file","user.html.vue"]]),C=JSON.parse('{"path":"/guide/database/oracle/user.html","title":"用户","lang":"zh-CN","frontmatter":{"title":"用户","description":"用户管理 查询用户 提示 Oracle 12c可以通过DBA_USERS数据字典视图的ORACLE_MAINTAINED判断是否是Oracle默认创建的用户！ 创建用户 对于普通用户名，用户创建的普通用户名必须以普通用户前缀开头。默认情况下，对于 CDB 普通用户，此前缀为C##. 对于应用程序普通用户，此前缀为空字符串。这意味着对于可以分配给应用程序...","head":[["meta",{"property":"og:url","content":"https://github.com/abelit/abelit-datapeacock.git/guide/database/oracle/user.html"}],["meta",{"property":"og:site_name","content":"数之雀"}],["meta",{"property":"og:title","content":"用户"}],["meta",{"property":"og:description","content":"用户管理 查询用户 提示 Oracle 12c可以通过DBA_USERS数据字典视图的ORACLE_MAINTAINED判断是否是Oracle默认创建的用户！ 创建用户 对于普通用户名，用户创建的普通用户名必须以普通用户前缀开头。默认情况下，对于 CDB 普通用户，此前缀为C##. 对于应用程序普通用户，此前缀为空字符串。这意味着对于可以分配给应用程序..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-05-11T14:06:18.000Z"}],["meta",{"property":"article:author","content":"Abelit"}],["meta",{"property":"article:modified_time","content":"2024-05-11T14:06:18.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"用户\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-05-11T14:06:18.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Abelit\\",\\"url\\":\\"https://github.com/abelit\\"}]}"]]},"headers":[{"level":2,"title":"用户管理","slug":"用户管理","link":"#用户管理","children":[{"level":3,"title":"查询用户","slug":"查询用户","link":"#查询用户","children":[]},{"level":3,"title":"创建用户","slug":"创建用户","link":"#创建用户","children":[]},{"level":3,"title":"更改用户密码","slug":"更改用户密码","link":"#更改用户密码","children":[]},{"level":3,"title":"锁定用户","slug":"锁定用户","link":"#锁定用户","children":[]},{"level":3,"title":"删除用户","slug":"删除用户","link":"#删除用户","children":[]}]},{"level":2,"title":"用户权限与角色","slug":"用户权限与角色","link":"#用户权限与角色","children":[{"level":3,"title":"角色权限相关视图","slug":"角色权限相关视图","link":"#角色权限相关视图","children":[]},{"level":3,"title":"授权系统权限给用户或角色","slug":"授权系统权限给用户或角色","link":"#授权系统权限给用户或角色","children":[]},{"level":3,"title":"授权角色给用户或角色","slug":"授权角色给用户或角色","link":"#授权角色给用户或角色","children":[]},{"level":3,"title":"授予对象权限给用户或角色","slug":"授予对象权限给用户或角色","link":"#授予对象权限给用户或角色","children":[]}]},{"level":2,"title":"用户配置文件","slug":"用户配置文件","link":"#用户配置文件","children":[{"level":3,"title":"查询配置文件","slug":"查询配置文件","link":"#查询配置文件","children":[]},{"level":3,"title":"创建配置文件","slug":"创建配置文件","link":"#创建配置文件","children":[]},{"level":3,"title":"为用户制定配置文件","slug":"为用户制定配置文件","link":"#为用户制定配置文件","children":[]},{"level":3,"title":"删除配置文件","slug":"删除配置文件","link":"#删除配置文件","children":[]}]},{"level":2,"title":"数据库连接限制","slug":"数据库连接限制","link":"#数据库连接限制","children":[{"level":3,"title":"客户端限制","slug":"客户端限制","link":"#客户端限制","children":[]}]}],"git":{"createdTime":1715436378000,"updatedTime":1715436378000,"contributors":[{"name":"ableit","email":"ychenid@live.com","commits":1}]},"readingTime":{"minutes":5.15,"words":1545},"filePathRelative":"guide/database/oracle/user.md","localizedDate":"2024年5月11日","autoDesc":true,"excerpt":"<h2>用户管理</h2>\\n<h3>查询用户</h3>\\n\\n<div class=\\"hint-container tip\\">\\n<p class=\\"hint-container-title\\">提示</p>\\n<p>Oracle 12c可以通过DBA_USERS数据字典视图的ORACLE_MAINTAINED判断是否是Oracle默认创建的用户！</p>\\n</div>\\n<h3>创建用户</h3>\\n<div class=\\"language-sql\\" data-ext=\\"sql\\" data-title=\\"sql\\"><pre class=\\"language-sql\\"><code><span class=\\"token keyword\\">CREATE</span> <span class=\\"token keyword\\">USER</span> <span class=\\"token operator\\">&lt;</span>username<span class=\\"token operator\\">&gt;</span> IDENTIFIED <span class=\\"token keyword\\">BY</span> <span class=\\"token operator\\">&lt;</span>password<span class=\\"token operator\\">&gt;</span> <span class=\\"token keyword\\">DEFAULT</span> <span class=\\"token keyword\\">TABLESPACE</span> <span class=\\"token operator\\">&lt;</span>tablespace_name<span class=\\"token operator\\">&gt;</span> <span class=\\"token punctuation\\">[</span>AUOTA <span class=\\"token operator\\">&lt;</span>size<span class=\\"token operator\\">&gt;</span> <span class=\\"token keyword\\">ON</span> <span class=\\"token operator\\">&lt;</span>tablespace_name<span class=\\"token operator\\">&gt;</span><span class=\\"token punctuation\\">]</span> <span class=\\"token punctuation\\">[</span><span class=\\"token keyword\\">TEMPORARY</span> <span class=\\"token keyword\\">TABLESPACE</span> <span class=\\"token operator\\">&lt;</span>tablespace_name<span class=\\"token operator\\">&gt;</span><span class=\\"token punctuation\\">]</span> <span class=\\"token punctuation\\">[</span>PROFILE <span class=\\"token operator\\">&lt;</span>profile_name<span class=\\"token operator\\">&gt;</span><span class=\\"token punctuation\\">]</span><span class=\\"token punctuation\\">;</span>\\n</code></pre></div>"}');export{L as comp,C as data};
