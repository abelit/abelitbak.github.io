import{_ as l}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as i,o as u,c as k,b as c,w as a,f as o,a as n,d as s}from"./app-DR5J2daJ.js";const r={},d=o('<h2 id="数据并发和一致性简介" tabindex="-1"><a class="header-anchor" href="#数据并发和一致性简介"><span>数据并发和一致性简介</span></a></h2><p>在单用户数据库中，一个用户可以修改数据而不用担心其他用户同时修改相同的数据。但是，在多用户数据库中，多个并发事务中的语句可能会更新相同的数据。同时执行的事务必须产生有意义且一致的结果。</p><p>多用户数据库需保证以下两点：</p><ul><li>保证用户可以同时访问数据（数据并发）；</li><li>确保每个用户看到一致的数据视图（数据一致性），包括用户自己的事务和其他用户提交的事务所做的可见更改。</li></ul><h3 id="多版本读一致性" tabindex="-1"><a class="header-anchor" href="#多版本读一致性"><span>多版本读一致性</span></a></h3><p>在 Oracle 数据库中，多版本控制是同时实现多个版本数据的能力。Oracle 数据库维护多版本读取一致性。 Oracle 数据库的查询具有以下特征：</p><ul><li>读一致性查询</li></ul><p>查询返回的数据在单个时间点已提交并保持一致。</p><ul><li>非阻塞查询</li></ul><p>数据的读取者和写入者不会相互阻塞。</p><h4 id="语句级读取一致性" tabindex="-1"><a class="header-anchor" href="#语句级读取一致性"><span>语句级读取一致性</span></a></h4><p>Oracle 数据库始终强制执行语句级读取一致性，这保证单个查询返回的数据在单个时间点上是提交的和一致的。</p><h4 id="事务级读一致性" tabindex="-1"><a class="header-anchor" href="#事务级读一致性"><span>事务级读一致性</span></a></h4><p>Oracle 数据库还可以为事务中的所有查询提供读取一致性，称为事务级读取一致性。</p><h4 id="读取一致性和撤消段" tabindex="-1"><a class="header-anchor" href="#读取一致性和撤消段"><span>读取一致性和撤消段</span></a></h4><p>为了管理多版本读取一致性模型，当同时查询和更新表时，数据库必须创建一组读取一致的数据。</p><h4 id="读取一致性和延迟插入" tabindex="-1"><a class="header-anchor" href="#读取一致性和延迟插入"><span>读取一致性和延迟插入</span></a></h4><p>一种称为延迟插入的特殊类型的插入不使用标准读取一致性机制。</p><h3 id="事务隔离级别" tabindex="-1"><a class="header-anchor" href="#事务隔离级别"><span>事务隔离级别</span></a></h3><h4 id="隔离级别可预防的现象" tabindex="-1"><a class="header-anchor" href="#隔离级别可预防的现象"><span>隔离级别可预防的现象</span></a></h4><ul><li>脏读</li></ul><p>一个事务读取另一个事务已写入但尚未提交的数据。</p><ul><li>不可重复（模糊）读取</li></ul><p>一个事务重新读取它之前读取过的数据，发现另一个已提交的事务修改或删除了数据。例如，用户查询一行，然后查询同一行，才发现数据已更改。</p><ul><li>幻读</li></ul><p>事务重新运行返回一组满足搜索条件的行的查询，并发现另一个已提交的事务插入了满足条件的其他行。 例如，事务查询员工人数。五分钟后，它执行相同的查询，但现在数字增加了一个，因为另一个用户插入了新雇员的记录。满足查询条件的数据比以前多，但与模糊读取不同的是，之前读取的数据没有变化。</p><h4 id="四个隔离级别可预防的读取现象" tabindex="-1"><a class="header-anchor" href="#四个隔离级别可预防的读取现象"><span>四个隔离级别可预防的读取现象</span></a></h4><table><thead><tr><th>隔离级别</th><th>脏读</th><th>不可重复读</th><th>幻读</th></tr></thead><tbody><tr><td>读取未提交</td><td>可能的</td><td>可能的</td><td>可能的</td></tr><tr><td>读取提交</td><td>不可能</td><td>可能的</td><td>可能的</td></tr><tr><td>可重复读</td><td>不可能</td><td>不可能的</td><td>可能的</td></tr><tr><td>可序列化</td><td>不可能</td><td>不可能的</td><td>不可能</td></tr></tbody></table><h3 id="数据库锁机制" tabindex="-1"><a class="header-anchor" href="#数据库锁机制"><span>数据库锁机制</span></a></h3><p>锁是一种防止破坏性交互的机制。</p><p>当访问共享数据的事务之间错误地更新数据或错误地更改基础数据结构时，交互是破坏性的。锁在维护数据库的并发性和一致性方面起着至关重要的作用。</p><p>一般来说，数据库使用两种锁：独占锁和共享锁。一个资源如行或表只能获得一个排他锁，但单个资源可以获得多个共享锁。</p><h4 id="锁行为总结" tabindex="-1"><a class="header-anchor" href="#锁行为总结"><span>锁行为总结</span></a></h4><p>锁会影响读取者和写入者的交互。读取器是对资源的查询，而写入器是修改资源的语句。以下规则总结了 Oracle 数据库对读取器和写入器的锁定行为：</p><ul><li>一行只有在被写者修改时才会被锁定。</li></ul><p>当一条语句更新一行时，事务只获取该行的锁。通过在行级别锁定表数据，数据库最大限度地减少了对相同数据的争用。一般情况下 Foot 1 数据库不会将行锁升级到块或表级别。</p><ul><li>一行的写者阻塞了同一行的并发写者。</li></ul><p>如果一个事务正在修改一行，那么行锁会阻止另一个事务同时修改同一行。</p><ul><li>读者永远不会阻止写者。</li></ul><p>因为一行的读者没有锁定它，所以写者可以修改这一行。唯一的例外是 SELECT ... FOR UPDATE 语句，它是一种特殊类型的 SELECT 语句，它确实锁定了它正在读取的行。</p><ul><li>写者永远不会阻止读者。</li></ul><p>当写入者更改一行时，数据库使用撤消数据为读取者提供该行的一致视图。</p><h4 id="锁的使用" tabindex="-1"><a class="header-anchor" href="#锁的使用"><span>锁的使用</span></a></h4><p>在单用户数据库中，不需要锁，因为只有一个用户在修改信息。但是，当多个用户访问和修改数据时，数据库必须提供一种方法来防止同时修改同一数据。</p><p>锁实现以下重要的数据库要求：</p><ul><li>一致性</li></ul><p>在用户完成之前，会话正在查看或更改的数据不得被其他会话更改。</p><ul><li>完整性</li></ul><p>数据和结构必须以正确的顺序反映对它们所做的所有更改。</p><blockquote><p>Oracle 数据库通过其锁定机制在事务之间提供数据并发性、一致性和完整性。锁定自动发生，无需用户操作。</p></blockquote><h4 id="锁模式" tabindex="-1"><a class="header-anchor" href="#锁模式"><span>锁模式</span></a></h4><p>Oracle 数据库自动使用最低适用级别的限制来提供最高程度的数据并发性，同时还提供故障安全数据完整性。</p><p>级别限制越少，其他用户访问数据的可用性就越高。相反，级别越严格，其他事务在它们可以获得的锁类型中就越有限。</p><p>Oracle 数据库在多用户数据库中使用两种锁定模式：</p><ul><li>排他锁模式</li></ul><p>此模式可防止共享相关资源。事务在修改数据时获得排它锁。第一个独占锁定资源的事务是唯一可以更改资源的事务，直到独占锁被释放。</p><ul><li>共享锁模式</li></ul><p>此模式允许共享相关资源，具体取决于所涉及的操作。多个读取数据的用户可以共享数据，每个用户持有一个共享锁，以防止需要独占锁的写入者并发访问。多个事务可以获取同一资源上的共享锁。</p><h4 id="锁和死锁" tabindex="-1"><a class="header-anchor" href="#锁和死锁"><span>锁和死锁</span></a></h4><p>死锁是两个或多个用户在等待彼此锁定的数据的情况。死锁会阻止某些事务继续工作。</p><p>Oracle 数据库自动检测死锁并通过回滚涉及死锁的一条语句、释放一组冲突行锁来解决死锁。数据库向进行语句级回滚的事务返回相应的消息。回滚的语句属于检测到死锁的事务。通常，发出信号的事务应该显式回滚，但它可以在等待后重试回滚语句。</p><h3 id="自动锁" tabindex="-1"><a class="header-anchor" href="#自动锁"><span>自动锁</span></a></h3><p>Oracle 数据库代表事务自动锁定资源，以防止其他事务执行需要独占访问同一资源的操作。</p><p>Oracle 数据库锁类别：</p><table><thead><tr><th>锁</th><th>描述</th></tr></thead><tbody><tr><td>DML 锁</td><td>保护数据。例如，表锁锁定整个表，而行锁锁定选定的行。</td></tr><tr><td>DDL 锁</td><td>保护模式对象的结构——例如，表和视图的字典定义。</td></tr><tr><td>系统锁</td><td>保护内部数据库结构，例如数据文件。锁存器、互斥锁和内部锁是完全自动的。</td></tr></tbody></table><h4 id="dml-锁" tabindex="-1"><a class="header-anchor" href="#dml-锁"><span>DML 锁</span></a></h4><p>DML 锁，也称为数据锁，保证多个用户同时访问的数据的完整性。</p><p>DML 语句自动获取以下类型的锁：</p><ul><li>行锁 (TX)</li><li>表锁 (TM)</li></ul><h5 id="行锁-tx" tabindex="-1"><a class="header-anchor" href="#行锁-tx"><span>行锁 (TX)</span></a></h5><p>行锁，也称为TX 锁，是对表的单行的锁。INSERT事务为、UPDATE、DELETE、MERGE或SELECT ... FOR UPDATE语句修改的每一行获取一个行锁。行锁一直存在，直到事务提交或回滚。</p><p>行锁主要用作一种排队机制，以防止两个事务修改同一行。数据库总是以独占模式锁定修改过的行，以便其他事务无法修改该行，直到持有锁的事务提交或回滚。行锁定提供了可能的最细粒度锁定，因此提供了可能的最佳并发性和吞吐量。</p><h5 id="表锁-tm" tabindex="-1"><a class="header-anchor" href="#表锁-tm"><span>表锁 (TM)</span></a></h5><p>表锁，也称为TM 锁，当表被带有子句或语句 的INSERT, UPDATE, DELETE, MERGE,修改时，由事务获取。SELECTFOR UPDATELOCK TABLE</p><p>DML 操作需要表锁来代表事务保留对表的 DML 访问并防止与事务冲突的 DDL 操作。</p><p>可以在以下任何一种模式下持有表锁：</p><ul><li>行共享 (RS)</li></ul><p>此锁也称为subshare table lock (SS)，表示持有表锁的事务已锁定表中的行并打算更新它们。行共享锁是表锁限制最少的模式，为表提供最高的并发度。</p><ul><li>行独占表锁 (RX)</li></ul><p>这种锁，也称为子排他表锁（SX），一般表示持有该锁的事务更新了表行或发出了SELECT ... FOR UPDATE。SX 锁允许其他事务在同一表中同时查询、插入、更新、删除或锁定行。因此，SX锁允许多个事务同时获得同一张表的SX和subshare表锁。</p><ul><li>共享表锁 (S)</li></ul><p>事务持有的共享表锁允许其他事务查询该表（无需使用SELECT ... FOR UPDATE），但仅当单个事务持有共享表锁时才允许更新。因为多个事务可能同时持有一个共享表锁，持有这个锁不足以保证一个事务可以修改表。</p><ul><li>共享行独占表锁 (SRX)</li></ul><p>此锁也称为共享子排他表锁 (SSX)，比共享表锁更具限制性。一次只有一个事务可以获取给定表上的 SSX 锁。事务持有的 SSX 锁允许其他事务查询表（除了SELECT ... FOR UPDATE）但不能更新表。</p><ul><li>独占表锁 (X)</li></ul><p>此锁是限制性最强的，禁止其他事务执行任何类型的 DML 语句或在表上放置任何类型的锁</p><h5 id="锁和外键" tabindex="-1"><a class="header-anchor" href="#锁和外键"><span>锁和外键</span></a></h5><p>Oracle 数据库最大限度地提高了与相关外键相关的父键的并发控制。</p><p>锁定行为取决于外键列是否被索引。如果外键没有建立索引，那么子表加锁的频率可能会更高，出现死锁，并发性下降。出于这个原因，外键几乎总是应该被索引。唯一的例外是匹配的唯一键或主键永远不会更新或删除。</p><h6 id="锁和未索引的外键" tabindex="-1"><a class="header-anchor" href="#锁和未索引的外键"><span><strong>锁和未索引的外键</strong></span></a></h6><p>当子表的外键列上不存在索引时，数据库获取子表的全表锁，并且会话修改了父表中的主键（例如，删除行或修改主键属性）或将行合并到父表中。</p><p>当以下两个条件都为真时，数据库获取子表的全表锁：</p><ul><li><p>子表的外键列上没有索引。</p></li><li><p>会话修改父表中的主键（例如，删除行或修改主键属性）或将行合并到父表中。</p></li></ul><blockquote><p>插入父表不会获取阻止对子表进行 DML 的阻塞表锁。在插入的情况下，数据库获取子表的锁以防止结构更改，但不会修改现有或新添加的行。</p></blockquote><h6 id="锁和索引外键" tabindex="-1"><a class="header-anchor" href="#锁和索引外键"><span><strong>锁和索引外键</strong></span></a></h6><p>子表外键列索引时，数据库未获取子表全表锁，会话修改父表主键（如删除行或修改主键属性）或将行合并到父表中。</p><p>父表上的锁会阻止事务获取独占表锁，但不会阻止在修改主键时对父表或子表进行DML。如果主键修改发生在父表上，而更新发生在子表上，则这种情况更可取。</p><h4 id="ddl锁" tabindex="-1"><a class="header-anchor" href="#ddl锁"><span>DDL锁</span></a></h4><p>数据字典 (DDL) 锁在正在进行的 DDL 操作作用于或引用对象时保护架构对象的定义。</p><p>在 DDL 操作期间，只有被修改或引用的单个模式对象才会被锁定。数据库从不锁定整个数据字典。</p><p>Oracle 数据库代表任何需要它的 DDL 事务自动获取 DDL 锁。用户不能显式请求 DDL 锁。例如，如果用户创建了一个存储过程，那么 Oracle 数据库会自动为过程定义中引用的所有模式对象获取 DDL 锁。DDL 锁可防止这些对象在过程编译完成之前被更改或删除。</p><h5 id="独占-ddl-锁" tabindex="-1"><a class="header-anchor" href="#独占-ddl-锁"><span>独占 DDL 锁</span></a></h5><p>独占 DDL 锁可防止其他会话获得 DDL 或 DML 锁。</p><p>大多数 DDL 操作都需要资源的独占 DDL 锁，以防止对可能修改或引用同一模式对象的其他 DDL 操作造成破坏性干扰。例如，DROP TABLE不允许在向表ALTER TABLE添加列时删除表，反之亦然。</p><p>独占 DDL 锁在 DDL 语句执行和自动提交期间持续存在。在获取独占 DDL 锁的过程中，如果另一个 DDL 锁被另一个操作持有在模式对象上，那么获取将等待旧的 DDL 锁被释放，然后继续进行。</p><h5 id="共享-ddl-锁" tabindex="-1"><a class="header-anchor" href="#共享-ddl-锁"><span>共享 DDL 锁</span></a></h5><p>资源的共享 DDL 锁可防止对冲突的 DDL 操作造成破坏性干扰，但允许类似 DDL 操作的数据并发。</p><p>共享 DDL 锁在 DDL 语句执行和自动提交期间持续。因此，持有共享 DDL 锁的事务保证引用模式对象的定义在事务期间保持不变。</p><h5 id="可破坏的解析锁" tabindex="-1"><a class="header-anchor" href="#可破坏的解析锁"><span>可破坏的解析锁</span></a></h5><p>解析锁由SQL 语句或 PL/SQL 程序单元为其引用的每个模式对象持有。</p><p>获取解析锁以便在引用的对象被更改或删除时可以使关联的共享 SQL 区域无效。解析锁被称为可破坏解析锁，因为它不会禁止任何 DDL 操作，并且可以被破坏以允许冲突的 DDL 操作。</p><p>SQL 语句执行的解析阶段在共享池中获取解析锁。只要该语句的共享 SQL 区域保留在共享池中，就会保持锁定。</p><h4 id="系统锁" tabindex="-1"><a class="header-anchor" href="#系统锁"><span>系统锁</span></a></h4><p>Oracle 数据库使用各种类型的系统锁来保护内部数据库和内存结构。用户无法访问这些机制，因为用户无法控制它们的发生或持续时间。</p><h5 id="闩锁" tabindex="-1"><a class="header-anchor" href="#闩锁"><span>闩锁</span></a></h5><p>闩锁是一种简单的低级序列化机制，可协调多用户对共享数据结构、对象和文​​件的访问。</p><p>当被多个进程访问时，锁存器保护共享内存资源不被损坏。具体来说，锁存器保护数据结构免受以下情况的影响：</p><ul><li>多个会话并发修改</li><li>被一个会话读取，同时被另一个会话修改</li><li>访问时释放内存（老化）</li></ul><h5 id="互斥锁" tabindex="-1"><a class="header-anchor" href="#互斥锁"><span>互斥锁</span></a></h5><p>互斥对象 (mutex)是一种低级机制，可防止内存中的对象在并发进程访问时老化或损坏。互斥锁类似于锁存器，但锁存器通常保护一组对象，而互斥锁保护单个对象。</p><p>互斥量有几个好处：</p><ul><li>互斥量可以减少争用的可能性。</li><li>因为闩锁保护多个对象，所以当进程试图同时访问这些对象中的任何一个时，它可能成为瓶颈。通过序列化对单个对象而不是组的访问，互斥锁提高了可用性。</li><li>互斥量比锁存器消耗更少的内存。</li><li>在共享模式下，互斥锁允许多个会话并发引用。</li></ul><h5 id="内锁" tabindex="-1"><a class="header-anchor" href="#内锁"><span>内锁</span></a></h5><p>内部锁是比锁存器和互斥锁更高级、更复杂的机制，并且有多种用途。</p><p>数据库使用以下类型的内部锁：</p><ul><li>字典缓存锁</li></ul><p>这些锁的持续时间非常短，并且在修改或使用条目时会保留在字典缓存中的条目上。它们保证被解析的语句不会看到不一致的对象定义。字典缓存锁可以是共享的或独占的。共享锁在解析完成时释放，而独占锁在 DDL 操作完成时释放。</p><ul><li>文件和日志管理锁</li></ul><p>这些锁保护各种文件。例如，内部锁保护控制文件，以便一次只有一个进程可以更改它。另一个锁协调联机重做日志文件的使用和归档。数据文件被锁定以确保多个实例以共享模式挂载数据库或一个实例以独占模式挂载它。因为文件锁和日志锁指示文件的状态，所以这些锁必须持有很长时间。</p><ul><li>表空间和撤消段锁</li></ul><p>这些锁保护表空间和撤消段。例如，访问数据库的所有实例必须就表空间是在线还是离线达成一致。撤消段被锁定，因此只有一个数据库实例可以写入一个段。</p><h2 id="锁相关查询与操作" tabindex="-1"><a class="header-anchor" href="#锁相关查询与操作"><span>锁相关查询与操作</span></a></h2><h3 id="锁查询" tabindex="-1"><a class="header-anchor" href="#锁查询"><span>锁查询</span></a></h3><ul><li>查询锁定对象</li></ul>',134),m=n("div",{class:"language-sql line-numbers-mode","data-ext":"sql","data-title":"sql"},[n("pre",{class:"language-sql"},[n("code",null,[n("span",{class:"token keyword"},"SELECT"),s(`
    b`),n("span",{class:"token punctuation"},"."),s("sid"),n("span",{class:"token punctuation"},","),s(`
    b`),n("span",{class:"token punctuation"},"."),n("span",{class:"token keyword"},"serial"),n("span",{class:"token comment"},"#,"),s(`
    b`),n("span",{class:"token punctuation"},"."),s("sql_id"),n("span",{class:"token punctuation"},","),s(`
    b`),n("span",{class:"token punctuation"},"."),n("span",{class:"token keyword"},"status"),n("span",{class:"token punctuation"},","),s(`
    b`),n("span",{class:"token punctuation"},"."),s("osuser"),n("span",{class:"token punctuation"},","),s(`
    b`),n("span",{class:"token punctuation"},"."),s("machine"),n("span",{class:"token punctuation"},","),s(`
    b`),n("span",{class:"token punctuation"},"."),s("blocking_session"),n("span",{class:"token punctuation"},","),s(`
    b`),n("span",{class:"token punctuation"},"."),s("event"),n("span",{class:"token punctuation"},","),s(`
    b`),n("span",{class:"token punctuation"},"."),s("wait_class"),n("span",{class:"token punctuation"},","),s(`
    c`),n("span",{class:"token punctuation"},"."),s("owner"),n("span",{class:"token punctuation"},","),s(`
    c`),n("span",{class:"token punctuation"},"."),s("object_name"),n("span",{class:"token punctuation"},","),s(`
    c`),n("span",{class:"token punctuation"},"."),s("object_type"),n("span",{class:"token punctuation"},","),s(`
    a`),n("span",{class:"token punctuation"},"."),s(`locked_mode
`),n("span",{class:"token keyword"},"FROM"),s(`
    v$locked_object a`),n("span",{class:"token punctuation"},","),s(`
    v$`),n("span",{class:"token keyword"},"session"),s("       b"),n("span",{class:"token punctuation"},","),s(`
    dba_objects     c
`),n("span",{class:"token keyword"},"WHERE"),s(`
    b`),n("span",{class:"token punctuation"},"."),s("sid "),n("span",{class:"token operator"},"="),s(" a"),n("span",{class:"token punctuation"},"."),s(`session_id
    `),n("span",{class:"token operator"},"AND"),s(" a"),n("span",{class:"token punctuation"},"."),s("object_id "),n("span",{class:"token operator"},"="),s(" c"),n("span",{class:"token punctuation"},"."),s("object_id"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),b=n("div",{class:"language-sql line-numbers-mode","data-ext":"sql","data-title":"sql"},[n("pre",{class:"language-sql"},[n("code",null,[n("span",{class:"token keyword"},"select"),s(` 
    substr`),n("span",{class:"token punctuation"},"("),s("to_char"),n("span",{class:"token punctuation"},"("),s("l"),n("span",{class:"token punctuation"},"."),s("session_id"),n("span",{class:"token punctuation"},")"),n("span",{class:"token operator"},"||"),n("span",{class:"token string"},"','"),n("span",{class:"token operator"},"||"),s("to_char"),n("span",{class:"token punctuation"},"("),s("s"),n("span",{class:"token punctuation"},"."),n("span",{class:"token keyword"},"serial"),n("span",{class:"token comment"},"#),1,12) sid_ser, "),s(`
    substr`),n("span",{class:"token punctuation"},"("),s("l"),n("span",{class:"token punctuation"},"."),s("os_user_name"),n("span",{class:"token operator"},"||"),n("span",{class:"token string"},"'/'"),n("span",{class:"token operator"},"||"),s("l"),n("span",{class:"token punctuation"},"."),s("oracle_username"),n("span",{class:"token punctuation"},","),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),n("span",{class:"token number"},"12"),n("span",{class:"token punctuation"},")"),s(" username"),n("span",{class:"token punctuation"},","),s(` 
    l`),n("span",{class:"token punctuation"},"."),s("process"),n("span",{class:"token punctuation"},","),s(` 
    p`),n("span",{class:"token punctuation"},"."),s("spid"),n("span",{class:"token punctuation"},","),s(` 
    substr`),n("span",{class:"token punctuation"},"("),s("o"),n("span",{class:"token punctuation"},"."),s("owner"),n("span",{class:"token operator"},"||"),n("span",{class:"token string"},"'.'"),n("span",{class:"token operator"},"||"),s("o"),n("span",{class:"token punctuation"},"."),s("object_name"),n("span",{class:"token punctuation"},","),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),n("span",{class:"token number"},"35"),n("span",{class:"token punctuation"},")"),s(" owner_object"),n("span",{class:"token punctuation"},","),s(` 
    decode`),n("span",{class:"token punctuation"},"("),s("l"),n("span",{class:"token punctuation"},"."),s("locked_mode"),n("span",{class:"token punctuation"},","),s(` 
             `),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),n("span",{class:"token string"},"'No Lock'"),n("span",{class:"token punctuation"},","),s(` 
             `),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},","),n("span",{class:"token string"},"'Row Share'"),n("span",{class:"token punctuation"},","),s(` 
             `),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},","),n("span",{class:"token string"},"'Row Exclusive'"),n("span",{class:"token punctuation"},","),s(` 
             `),n("span",{class:"token number"},"4"),n("span",{class:"token punctuation"},","),n("span",{class:"token string"},"'Share'"),n("span",{class:"token punctuation"},","),s(` 
             `),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},","),n("span",{class:"token string"},"'Share Row Excl'"),n("span",{class:"token punctuation"},","),s(` 
             `),n("span",{class:"token number"},"6"),n("span",{class:"token punctuation"},","),n("span",{class:"token string"},"'Exclusive'"),n("span",{class:"token punctuation"},","),n("span",{class:"token boolean"},"null"),n("span",{class:"token punctuation"},")"),s(" locked_mode"),n("span",{class:"token punctuation"},","),s(` 
    substr`),n("span",{class:"token punctuation"},"("),s("s"),n("span",{class:"token punctuation"},"."),n("span",{class:"token keyword"},"status"),n("span",{class:"token punctuation"},","),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),n("span",{class:"token number"},"8"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"status"),s(` 
`),n("span",{class:"token keyword"},"from"),s(` 
    v$locked_object l`),n("span",{class:"token punctuation"},","),s(` 
    all_objects     o`),n("span",{class:"token punctuation"},","),s(` 
    v$`),n("span",{class:"token keyword"},"session"),s("       s"),n("span",{class:"token punctuation"},","),s(` 
    v$process       p 
`),n("span",{class:"token keyword"},"where"),s(` 
    l`),n("span",{class:"token punctuation"},"."),s("object_id "),n("span",{class:"token operator"},"="),s(" o"),n("span",{class:"token punctuation"},"."),s(`object_id 
`),n("span",{class:"token operator"},"and"),s(" l"),n("span",{class:"token punctuation"},"."),s("session_id "),n("span",{class:"token operator"},"="),s(" s"),n("span",{class:"token punctuation"},"."),s(`sid 
`),n("span",{class:"token operator"},"and"),s(" s"),n("span",{class:"token punctuation"},"."),s("paddr      "),n("span",{class:"token operator"},"="),s(" p"),n("span",{class:"token punctuation"},"."),s(`addr 
`),n("span",{class:"token operator"},"and"),s(" s"),n("span",{class:"token punctuation"},"."),n("span",{class:"token keyword"},"status"),s(),n("span",{class:"token operator"},"!="),s(),n("span",{class:"token string"},"'KILLED'"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),v=n("div",{class:"language-sql line-numbers-mode","data-ext":"sql","data-title":"sql"},[n("pre",{class:"language-sql"},[n("code",null,[s("COL MODE_HELD "),n("span",{class:"token keyword"},"FOR"),s(" A14"),n("span",{class:"token punctuation"},";"),s(`
COL LOCK_TYPE `),n("span",{class:"token keyword"},"FOR"),s(" A8"),n("span",{class:"token punctuation"},";"),s(`
COL MODE_REQUESTED `),n("span",{class:"token keyword"},"FOR"),s(" A10"),n("span",{class:"token punctuation"},";"),s(`
COL OBJECT_TYPE `),n("span",{class:"token keyword"},"FOR"),s(" A14"),n("span",{class:"token punctuation"},";"),s(`
COL OBJECT_NAME `),n("span",{class:"token keyword"},"FOR"),s(" A20"),n("span",{class:"token punctuation"},";"),s(`

`),n("span",{class:"token keyword"},"SELECT"),s(`
    lk`),n("span",{class:"token punctuation"},"."),s("sid"),n("span",{class:"token punctuation"},","),s(`
    se`),n("span",{class:"token punctuation"},"."),n("span",{class:"token keyword"},"serial"),n("span",{class:"token comment"},"#,"),s(`
    decode`),n("span",{class:"token punctuation"},"("),s(`
        lk`),n("span",{class:"token punctuation"},"."),n("span",{class:"token keyword"},"type"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'TX'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Transaction'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'TM'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'DML'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'UL'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'PL/SQL User Lock'"),n("span",{class:"token punctuation"},","),s(" lk"),n("span",{class:"token punctuation"},"."),n("span",{class:"token keyword"},"type"),s(`
    `),n("span",{class:"token punctuation"},")"),s(" lock_type"),n("span",{class:"token punctuation"},","),s(`
    decode`),n("span",{class:"token punctuation"},"("),s(`
        lk`),n("span",{class:"token punctuation"},"."),s("lmode"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'None'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Null'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Row-S (SS)'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Row-X (SX)'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"4"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Share'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'S/Row-X (SSX)'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"6"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Exclusive'"),n("span",{class:"token punctuation"},","),s(" to_char"),n("span",{class:"token punctuation"},"("),s(`
            lk`),n("span",{class:"token punctuation"},"."),s(`lmode
        `),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},")"),s(" mode_held"),n("span",{class:"token punctuation"},","),s(`
    decode`),n("span",{class:"token punctuation"},"("),s(`
        lk`),n("span",{class:"token punctuation"},"."),s("request"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'None'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Null'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Row-S (SS)'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Row-X (SX)'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"4"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Share'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'S/Row-X (SSX)'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"6"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Exclusive'"),n("span",{class:"token punctuation"},","),s(" to_char"),n("span",{class:"token punctuation"},"("),s(`
            lk`),n("span",{class:"token punctuation"},"."),s(`request
        `),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token punctuation"},")"),s(" mode_requested"),n("span",{class:"token punctuation"},","),s(`
    ob`),n("span",{class:"token punctuation"},"."),s("object_type"),n("span",{class:"token punctuation"},","),s(`
    ob`),n("span",{class:"token punctuation"},"."),s("object_name"),n("span",{class:"token punctuation"},","),s(`
    lk`),n("span",{class:"token punctuation"},"."),s("block"),n("span",{class:"token punctuation"},","),s(`
    se`),n("span",{class:"token punctuation"},"."),s(`lockwait
`),n("span",{class:"token keyword"},"FROM"),s(`
    v$`),n("span",{class:"token keyword"},"lock"),s("      lk"),n("span",{class:"token punctuation"},","),s(`
    dba_objects ob`),n("span",{class:"token punctuation"},","),s(`
    v$`),n("span",{class:"token keyword"},"session"),s(`   se
`),n("span",{class:"token keyword"},"WHERE"),s(`
    lk`),n("span",{class:"token punctuation"},"."),n("span",{class:"token keyword"},"type"),s(),n("span",{class:"token operator"},"IN"),s(),n("span",{class:"token punctuation"},"("),s(),n("span",{class:"token string"},"'TM'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'UL'"),s(),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token operator"},"AND"),s(" lk"),n("span",{class:"token punctuation"},"."),s("sid "),n("span",{class:"token operator"},"="),s(" se"),n("span",{class:"token punctuation"},"."),s(`sid
    `),n("span",{class:"token operator"},"AND"),s(" lk"),n("span",{class:"token punctuation"},"."),s("id1 "),n("span",{class:"token operator"},"="),s(" ob"),n("span",{class:"token punctuation"},"."),s("object_id "),n("span",{class:"token punctuation"},"("),n("span",{class:"token operator"},"+"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token comment"},"--    AND se.sid IN ( 766, 789 )"),s(`
`),n("span",{class:"token keyword"},"ORDER"),s(),n("span",{class:"token keyword"},"BY"),s(`
    sid`),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),g=n("ul",null,[n("li",null,"查询阻塞和被阻塞者")],-1),h=n("div",{class:"language-sql line-numbers-mode","data-ext":"sql","data-title":"sql"},[n("pre",{class:"language-sql"},[n("code",null,[n("span",{class:"token keyword"},"SELECT"),s(`
    `),n("span",{class:"token punctuation"},"("),s(`
        `),n("span",{class:"token keyword"},"SELECT"),s(`
            username
            `),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token string"},"' - '"),s(`
            `),n("span",{class:"token operator"},"||"),s(` osuser
        `),n("span",{class:"token keyword"},"FROM"),s(`
            v$`),n("span",{class:"token keyword"},"session"),s(`
        `),n("span",{class:"token keyword"},"WHERE"),s(`
            sid `),n("span",{class:"token operator"},"="),s(" a"),n("span",{class:"token punctuation"},"."),s(`sid
    `),n("span",{class:"token punctuation"},")"),s(" blocker"),n("span",{class:"token punctuation"},","),s(`
    a`),n("span",{class:"token punctuation"},"."),s(`sid
    `),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token string"},"', '"),s(`
    `),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token punctuation"},"("),s(`
        `),n("span",{class:"token keyword"},"SELECT"),s(`
            `),n("span",{class:"token keyword"},"serial"),n("span",{class:"token comment"},"#"),s(`
        `),n("span",{class:"token keyword"},"FROM"),s(`
            v$`),n("span",{class:"token keyword"},"session"),s(`
        `),n("span",{class:"token keyword"},"WHERE"),s(`
            sid `),n("span",{class:"token operator"},"="),s(" a"),n("span",{class:"token punctuation"},"."),s(`sid
    `),n("span",{class:"token punctuation"},")"),s(" sid_serial"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token string"},"' is blocking '"),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token punctuation"},"("),s(`
        `),n("span",{class:"token keyword"},"SELECT"),s(`
            username
            `),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token string"},"' - '"),s(`
            `),n("span",{class:"token operator"},"||"),s(` osuser
        `),n("span",{class:"token keyword"},"FROM"),s(`
            v$`),n("span",{class:"token keyword"},"session"),s(`
        `),n("span",{class:"token keyword"},"WHERE"),s(`
            sid `),n("span",{class:"token operator"},"="),s(" b"),n("span",{class:"token punctuation"},"."),s(`sid
    `),n("span",{class:"token punctuation"},")"),s(" blockee"),n("span",{class:"token punctuation"},","),s(`
    b`),n("span",{class:"token punctuation"},"."),s(`sid
    `),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token string"},"', '"),s(`
    `),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token punctuation"},"("),s(`
        `),n("span",{class:"token keyword"},"SELECT"),s(`
            `),n("span",{class:"token keyword"},"serial"),n("span",{class:"token comment"},"#"),s(`
        `),n("span",{class:"token keyword"},"FROM"),s(`
            v$`),n("span",{class:"token keyword"},"session"),s(`
        `),n("span",{class:"token keyword"},"WHERE"),s(`
            sid `),n("span",{class:"token operator"},"="),s(" b"),n("span",{class:"token punctuation"},"."),s(`sid
    `),n("span",{class:"token punctuation"},")"),s(` sid_serial
`),n("span",{class:"token keyword"},"FROM"),s(`
    v$`),n("span",{class:"token keyword"},"lock"),s(" a"),n("span",{class:"token punctuation"},","),s(`
    v$`),n("span",{class:"token keyword"},"lock"),s(` b
`),n("span",{class:"token keyword"},"WHERE"),s(`
    a`),n("span",{class:"token punctuation"},"."),s("block "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"1"),s(`
    `),n("span",{class:"token operator"},"AND"),s(" b"),n("span",{class:"token punctuation"},"."),s("request "),n("span",{class:"token operator"},">"),s(),n("span",{class:"token number"},"0"),s(`
    `),n("span",{class:"token operator"},"AND"),s(" a"),n("span",{class:"token punctuation"},"."),s("id1 "),n("span",{class:"token operator"},"="),s(" b"),n("span",{class:"token punctuation"},"."),s(`id1
    `),n("span",{class:"token operator"},"AND"),s(" a"),n("span",{class:"token punctuation"},"."),s("id2 "),n("span",{class:"token operator"},"="),s(" b"),n("span",{class:"token punctuation"},"."),s("id2"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),E=n("div",{class:"language-sql line-numbers-mode","data-ext":"sql","data-title":"sql"},[n("pre",{class:"language-sql"},[n("code",null,[n("span",{class:"token keyword"},"SELECT"),s(`
    `),n("span",{class:"token string"},"'Instance '"),s(`
    `),n("span",{class:"token operator"},"||"),s(" s1"),n("span",{class:"token punctuation"},"."),s(`inst_id
    `),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token string"},"' '"),s(`
    `),n("span",{class:"token operator"},"||"),s(" s1"),n("span",{class:"token punctuation"},"."),s(`username
    `),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token string"},"'@'"),s(`
    `),n("span",{class:"token operator"},"||"),s(" s1"),n("span",{class:"token punctuation"},"."),s(`machine
    `),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token string"},"' ( SID='"),s(`
    `),n("span",{class:"token operator"},"||"),s(" s1"),n("span",{class:"token punctuation"},"."),s(`sid
    `),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token string"},"','"),s(`
    `),n("span",{class:"token operator"},"||"),s(" s1"),n("span",{class:"token punctuation"},"."),n("span",{class:"token keyword"},"serial"),n("span",{class:"token comment"},"#"),s(`
    `),n("span",{class:"token operator"},"||"),s(" s1"),n("span",{class:"token punctuation"},"."),n("span",{class:"token keyword"},"status"),s(`
    `),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token string"},"'  )  is blocking '"),s(`
    `),n("span",{class:"token operator"},"||"),s(" s2"),n("span",{class:"token punctuation"},"."),s(`username
    `),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token string"},"'@'"),s(`
    `),n("span",{class:"token operator"},"||"),s(" s2"),n("span",{class:"token punctuation"},"."),s(`machine
    `),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token string"},"' ( SID='"),s(`
    `),n("span",{class:"token operator"},"||"),s(" s2"),n("span",{class:"token punctuation"},"."),s(`sid
    `),n("span",{class:"token operator"},"||"),s(),n("span",{class:"token string"},"' ) '"),s(`
    `),n("span",{class:"token operator"},"||"),s(" s2"),n("span",{class:"token punctuation"},"."),s(`sql_id
`),n("span",{class:"token keyword"},"FROM"),s(`
    gv$`),n("span",{class:"token keyword"},"lock"),s("    l1"),n("span",{class:"token punctuation"},","),s(`
    gv$`),n("span",{class:"token keyword"},"session"),s(" s1"),n("span",{class:"token punctuation"},","),s(`
    gv$`),n("span",{class:"token keyword"},"lock"),s("    l2"),n("span",{class:"token punctuation"},","),s(`
    gv$`),n("span",{class:"token keyword"},"session"),s(` s2
`),n("span",{class:"token keyword"},"WHERE"),s(`
    s1`),n("span",{class:"token punctuation"},"."),s("sid "),n("span",{class:"token operator"},"="),s(" l1"),n("span",{class:"token punctuation"},"."),s(`sid
    `),n("span",{class:"token operator"},"AND"),s(" s1"),n("span",{class:"token punctuation"},"."),s("inst_id "),n("span",{class:"token operator"},"="),s(" l1"),n("span",{class:"token punctuation"},"."),s(`inst_id
    `),n("span",{class:"token operator"},"AND"),s(" s2"),n("span",{class:"token punctuation"},"."),s("sid "),n("span",{class:"token operator"},"="),s(" l2"),n("span",{class:"token punctuation"},"."),s(`sid
    `),n("span",{class:"token operator"},"AND"),s(" s2"),n("span",{class:"token punctuation"},"."),s("inst_id "),n("span",{class:"token operator"},"="),s(" l2"),n("span",{class:"token punctuation"},"."),s(`inst_id
    `),n("span",{class:"token operator"},"AND"),s(" l1"),n("span",{class:"token punctuation"},"."),s("block "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"1"),s(`
    `),n("span",{class:"token operator"},"AND"),s(" l2"),n("span",{class:"token punctuation"},"."),s("request "),n("span",{class:"token operator"},">"),s(),n("span",{class:"token number"},"0"),s(`
    `),n("span",{class:"token operator"},"AND"),s(" l1"),n("span",{class:"token punctuation"},"."),s("id1 "),n("span",{class:"token operator"},"="),s(" l2"),n("span",{class:"token punctuation"},"."),s(`id1
    `),n("span",{class:"token operator"},"AND"),s(" l2"),n("span",{class:"token punctuation"},"."),s("id2 "),n("span",{class:"token operator"},"="),s(" l2"),n("span",{class:"token punctuation"},"."),s("id2"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),R=n("div",{class:"language-sql line-numbers-mode","data-ext":"sql","data-title":"sql"},[n("pre",{class:"language-sql"},[n("code",null,[n("span",{class:"token keyword"},"SELECT"),s(`
    decode`),n("span",{class:"token punctuation"},"("),s(`
        request`),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Holder: '"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Waiter: '"),s(`
    `),n("span",{class:"token punctuation"},")"),s(`
    `),n("span",{class:"token operator"},"||"),s(" gv$"),n("span",{class:"token keyword"},"lock"),n("span",{class:"token punctuation"},"."),s("sid sess"),n("span",{class:"token punctuation"},","),s(`
    machine`),n("span",{class:"token punctuation"},","),s(`
    `),n("span",{class:"token keyword"},"do"),n("span",{class:"token punctuation"},"."),s("object_name "),n("span",{class:"token keyword"},"AS"),s(" locked_object"),n("span",{class:"token punctuation"},","),s(`
    id1`),n("span",{class:"token punctuation"},","),s(`
    id2`),n("span",{class:"token punctuation"},","),s(`
    lmode`),n("span",{class:"token punctuation"},","),s(`
    request`),n("span",{class:"token punctuation"},","),s(`
    gv$`),n("span",{class:"token keyword"},"lock"),n("span",{class:"token punctuation"},"."),n("span",{class:"token keyword"},"type"),s(`
`),n("span",{class:"token keyword"},"FROM"),s(`
    gv$`),n("span",{class:"token keyword"},"lock"),s(`
    `),n("span",{class:"token keyword"},"JOIN"),s(" gv$"),n("span",{class:"token keyword"},"session"),s(),n("span",{class:"token keyword"},"ON"),s(" gv$"),n("span",{class:"token keyword"},"lock"),n("span",{class:"token punctuation"},"."),s("sid "),n("span",{class:"token operator"},"="),s(" gv$"),n("span",{class:"token keyword"},"session"),n("span",{class:"token punctuation"},"."),s(`sid
                       `),n("span",{class:"token operator"},"AND"),s(" gv$"),n("span",{class:"token keyword"},"lock"),n("span",{class:"token punctuation"},"."),s("inst_id "),n("span",{class:"token operator"},"="),s(" gv$"),n("span",{class:"token keyword"},"session"),n("span",{class:"token punctuation"},"."),s(`inst_id
    `),n("span",{class:"token keyword"},"JOIN"),s(" gv$locked_object lo "),n("span",{class:"token keyword"},"ON"),s(" gv$"),n("span",{class:"token keyword"},"lock"),n("span",{class:"token punctuation"},"."),s("sid "),n("span",{class:"token operator"},"="),s(" lo"),n("span",{class:"token punctuation"},"."),s(`session_id
                                `),n("span",{class:"token operator"},"AND"),s(" gv$"),n("span",{class:"token keyword"},"lock"),n("span",{class:"token punctuation"},"."),s("inst_id "),n("span",{class:"token operator"},"="),s(" lo"),n("span",{class:"token punctuation"},"."),s(`inst_id
    `),n("span",{class:"token keyword"},"JOIN"),s(" dba_objects      "),n("span",{class:"token keyword"},"do"),s(),n("span",{class:"token keyword"},"ON"),s(" lo"),n("span",{class:"token punctuation"},"."),s("object_id "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"do"),n("span",{class:"token punctuation"},"."),s(`object_id
`),n("span",{class:"token keyword"},"WHERE"),s(`
    `),n("span",{class:"token punctuation"},"("),s(" id1"),n("span",{class:"token punctuation"},","),s(" id2"),n("span",{class:"token punctuation"},","),s(" gv$"),n("span",{class:"token keyword"},"lock"),n("span",{class:"token punctuation"},"."),n("span",{class:"token keyword"},"type"),s(),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"IN"),s(),n("span",{class:"token punctuation"},"("),s(`
        `),n("span",{class:"token keyword"},"SELECT"),s(`
            id1`),n("span",{class:"token punctuation"},","),s(" id2"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"type"),s(`
        `),n("span",{class:"token keyword"},"FROM"),s(`
            gv$`),n("span",{class:"token keyword"},"lock"),s(`
        `),n("span",{class:"token keyword"},"WHERE"),s(`
            request `),n("span",{class:"token operator"},">"),s(),n("span",{class:"token number"},"0"),s(`
    `),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token keyword"},"ORDER"),s(),n("span",{class:"token keyword"},"BY"),s(`
    id1`),n("span",{class:"token punctuation"},","),s(`
    request`),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),y=n("div",{class:"language-sql line-numbers-mode","data-ext":"sql","data-title":"sql"},[n("pre",{class:"language-sql"},[n("code",null,[n("span",{class:"token keyword"},"select"),s("	sn"),n("span",{class:"token punctuation"},"."),s("USERNAME"),n("span",{class:"token punctuation"},","),s(`
	m`),n("span",{class:"token punctuation"},"."),s("SID"),n("span",{class:"token punctuation"},","),s(`
	sn`),n("span",{class:"token punctuation"},"."),n("span",{class:"token keyword"},"SERIAL"),n("span",{class:"token comment"},"#,"),s(`
	m`),n("span",{class:"token punctuation"},"."),n("span",{class:"token keyword"},"TYPE"),n("span",{class:"token punctuation"},","),s(`
	decode`),n("span",{class:"token punctuation"},"("),s("LMODE"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'None'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Null'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Row-S (SS)'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Row-X (SX)'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token number"},"4"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Share'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'S/Row-X (SSX)'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token number"},"6"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Exclusive'"),n("span",{class:"token punctuation"},")"),s(" lock_type"),n("span",{class:"token punctuation"},","),s(`
	decode`),n("span",{class:"token punctuation"},"("),s("REQUEST"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'None'"),n("span",{class:"token punctuation"},","),s(` 
		`),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Null'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Row-S (SS)'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Row-X (SX)'"),n("span",{class:"token punctuation"},","),s(` 
		`),n("span",{class:"token number"},"4"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Share'"),n("span",{class:"token punctuation"},","),s(` 
		`),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'S/Row-X (SSX)'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token number"},"6"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Exclusive'"),n("span",{class:"token punctuation"},")"),s(" lock_requested"),n("span",{class:"token punctuation"},","),s(`
	m`),n("span",{class:"token punctuation"},"."),s("ID1"),n("span",{class:"token punctuation"},","),s(`
	m`),n("span",{class:"token punctuation"},"."),s("ID2"),n("span",{class:"token punctuation"},","),s(`
	t`),n("span",{class:"token punctuation"},"."),s(`SQL_TEXT
`),n("span",{class:"token keyword"},"from"),s(" 	v$"),n("span",{class:"token keyword"},"session"),s(" sn"),n("span",{class:"token punctuation"},","),s(` 
	v$`),n("span",{class:"token keyword"},"lock"),s(" m "),n("span",{class:"token punctuation"},","),s(` 
	v$sqltext t
`),n("span",{class:"token keyword"},"where"),s(" 	t"),n("span",{class:"token punctuation"},"."),s("ADDRESS "),n("span",{class:"token operator"},"="),s(" sn"),n("span",{class:"token punctuation"},"."),s(`SQL_ADDRESS 
`),n("span",{class:"token operator"},"and"),s(" 	t"),n("span",{class:"token punctuation"},"."),s("HASH_VALUE "),n("span",{class:"token operator"},"="),s(" sn"),n("span",{class:"token punctuation"},"."),s(`SQL_HASH_VALUE 
`),n("span",{class:"token operator"},"and"),s(" 	"),n("span",{class:"token punctuation"},"("),n("span",{class:"token punctuation"},"("),s("sn"),n("span",{class:"token punctuation"},"."),s("SID "),n("span",{class:"token operator"},"="),s(" m"),n("span",{class:"token punctuation"},"."),s("SID "),n("span",{class:"token operator"},"and"),s(" m"),n("span",{class:"token punctuation"},"."),s("REQUEST "),n("span",{class:"token operator"},"!="),s(),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},")"),s(` 
`),n("span",{class:"token operator"},"or"),s(" 	"),n("span",{class:"token punctuation"},"("),s("sn"),n("span",{class:"token punctuation"},"."),s("SID "),n("span",{class:"token operator"},"="),s(" m"),n("span",{class:"token punctuation"},"."),s("SID "),n("span",{class:"token operator"},"and"),s(" m"),n("span",{class:"token punctuation"},"."),s("REQUEST "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token number"},"0"),s(),n("span",{class:"token operator"},"and"),s(" LMODE "),n("span",{class:"token operator"},"!="),s(),n("span",{class:"token number"},"4"),s(),n("span",{class:"token operator"},"and"),s(),n("span",{class:"token punctuation"},"("),s("ID1"),n("span",{class:"token punctuation"},","),s(" ID2"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token operator"},"in"),s(`
        `),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"select"),s(" s"),n("span",{class:"token punctuation"},"."),s("ID1"),n("span",{class:"token punctuation"},","),s(" s"),n("span",{class:"token punctuation"},"."),s(`ID2 
         `),n("span",{class:"token keyword"},"from"),s(" 	v$"),n("span",{class:"token keyword"},"lock"),s(` S 
         `),n("span",{class:"token keyword"},"where"),s(" 	REQUEST "),n("span",{class:"token operator"},"!="),s(),n("span",{class:"token number"},"0"),s(` 
         `),n("span",{class:"token operator"},"and"),s(" 	s"),n("span",{class:"token punctuation"},"."),s("ID1 "),n("span",{class:"token operator"},"="),s(" m"),n("span",{class:"token punctuation"},"."),s(`ID1 
         `),n("span",{class:"token operator"},"and"),s(" 	s"),n("span",{class:"token punctuation"},"."),s("ID2 "),n("span",{class:"token operator"},"="),s(" m"),n("span",{class:"token punctuation"},"."),s("ID2"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),n("span",{class:"token punctuation"},")"),s(`
`),n("span",{class:"token keyword"},"order"),s(),n("span",{class:"token keyword"},"by"),s(" sn"),n("span",{class:"token punctuation"},"."),s("USERNAME"),n("span",{class:"token punctuation"},","),s(" sn"),n("span",{class:"token punctuation"},"."),s("SID"),n("span",{class:"token punctuation"},","),s(" t"),n("span",{class:"token punctuation"},"."),s("PIECE"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),L=n("div",{class:"language-sql line-numbers-mode","data-ext":"sql","data-title":"sql"},[n("pre",{class:"language-sql"},[n("code",null,[n("span",{class:"token keyword"},"select"),s("	OS_USER_NAME os_user"),n("span",{class:"token punctuation"},","),s(`
	PROCESS os_pid`),n("span",{class:"token punctuation"},","),s(`
	ORACLE_USERNAME oracle_user`),n("span",{class:"token punctuation"},","),s(`
	l`),n("span",{class:"token punctuation"},"."),s("SID oracle_id"),n("span",{class:"token punctuation"},","),s(`
	decode`),n("span",{class:"token punctuation"},"("),n("span",{class:"token keyword"},"TYPE"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token string"},"'MR'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Media Recovery'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token string"},"'RT'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Redo Thread'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token string"},"'UN'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'User Name'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token string"},"'TX'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Transaction'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token string"},"'TM'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'DML'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token string"},"'UL'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'PL/SQL User Lock'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token string"},"'DX'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Distributed Xaction'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token string"},"'CF'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Control File'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token string"},"'IS'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Instance State'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token string"},"'FS'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'File Set'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token string"},"'IR'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Instance Recovery'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token string"},"'ST'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Disk Space Transaction'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token string"},"'TS'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Temp Segment'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token string"},"'IV'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Library Cache Invalidation'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token string"},"'LS'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Log Start or Switch'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token string"},"'RW'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Row Wait'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token string"},"'SQ'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Sequence Number'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token string"},"'TE'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Extend Table'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token string"},"'TT'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Temp Table'"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token keyword"},"type"),n("span",{class:"token punctuation"},")"),s(" lock_type"),n("span",{class:"token punctuation"},","),s(`
	decode`),n("span",{class:"token punctuation"},"("),s("LMODE"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'None'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Null'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Row-S (SS)'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Row-X (SX)'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token number"},"4"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Share'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'S/Row-X (SSX)'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token number"},"6"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Exclusive'"),n("span",{class:"token punctuation"},","),s(" lmode"),n("span",{class:"token punctuation"},")"),s(" lock_held"),n("span",{class:"token punctuation"},","),s(`
	decode`),n("span",{class:"token punctuation"},"("),s("REQUEST"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'None'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Null'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Row-S (SS)'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token number"},"3"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Row-X (SX)'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token number"},"4"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Share'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token number"},"5"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'S/Row-X (SSX)'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token number"},"6"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Exclusive'"),n("span",{class:"token punctuation"},","),s(" request"),n("span",{class:"token punctuation"},")"),s(" lock_requested"),n("span",{class:"token punctuation"},","),s(`
	decode`),n("span",{class:"token punctuation"},"("),s("BLOCK"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token number"},"0"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Not Blocking'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Blocking'"),n("span",{class:"token punctuation"},","),s(`
		`),n("span",{class:"token number"},"2"),n("span",{class:"token punctuation"},","),s(),n("span",{class:"token string"},"'Global'"),n("span",{class:"token punctuation"},","),s(" block"),n("span",{class:"token punctuation"},")"),s(),n("span",{class:"token keyword"},"status"),n("span",{class:"token punctuation"},","),s(`
	OWNER`),n("span",{class:"token punctuation"},","),s(`
	OBJECT_NAME
`),n("span",{class:"token keyword"},"from"),s("	v$locked_object lo"),n("span",{class:"token punctuation"},","),s(`
	dba_objects `),n("span",{class:"token keyword"},"do"),n("span",{class:"token punctuation"},","),s(`
	v$`),n("span",{class:"token keyword"},"lock"),s(` l
`),n("span",{class:"token keyword"},"where"),s(" 	lo"),n("span",{class:"token punctuation"},"."),s("OBJECT_ID "),n("span",{class:"token operator"},"="),s(),n("span",{class:"token keyword"},"do"),n("span",{class:"token punctuation"},"."),s(`OBJECT_ID
`),n("span",{class:"token operator"},"AND"),s("     l"),n("span",{class:"token punctuation"},"."),s("SID "),n("span",{class:"token operator"},"="),s(" lo"),n("span",{class:"token punctuation"},"."),s(`SESSION_ID
`),n("span",{class:"token operator"},"and"),s(" block"),n("span",{class:"token operator"},"="),n("span",{class:"token number"},"1"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"}),n("div",{class:"line-number"})])],-1),w=o(`<ul><li>查询阻塞超过3分钟的会话</li></ul><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
    s<span class="token punctuation">.</span>sid<span class="token punctuation">,</span>
    p<span class="token punctuation">.</span>spid<span class="token punctuation">,</span>
    s<span class="token punctuation">.</span>machine<span class="token punctuation">,</span>
    s<span class="token punctuation">.</span>username<span class="token punctuation">,</span>
    ctime <span class="token operator">/</span> <span class="token number">60</span>     <span class="token keyword">AS</span> minutes_locking<span class="token punctuation">,</span>
    <span class="token keyword">do</span><span class="token punctuation">.</span>object_name <span class="token keyword">AS</span> locked_object<span class="token punctuation">,</span>
    q<span class="token punctuation">.</span>sql_text
<span class="token keyword">FROM</span>
    v$<span class="token keyword">lock</span> l
    <span class="token keyword">JOIN</span> v$<span class="token keyword">session</span>       s <span class="token keyword">ON</span> l<span class="token punctuation">.</span>sid <span class="token operator">=</span> s<span class="token punctuation">.</span>sid
    <span class="token keyword">JOIN</span> v$process       p <span class="token keyword">ON</span> p<span class="token punctuation">.</span>addr <span class="token operator">=</span> s<span class="token punctuation">.</span>paddr
    <span class="token keyword">JOIN</span> v$locked_object lo <span class="token keyword">ON</span> l<span class="token punctuation">.</span>sid <span class="token operator">=</span> lo<span class="token punctuation">.</span>session_id
    <span class="token keyword">JOIN</span> dba_objects     <span class="token keyword">do</span> <span class="token keyword">ON</span> lo<span class="token punctuation">.</span>object_id <span class="token operator">=</span> <span class="token keyword">do</span><span class="token punctuation">.</span>object_id
    <span class="token keyword">JOIN</span> v$sqlarea       q <span class="token keyword">ON</span> s<span class="token punctuation">.</span>sql_hash_value <span class="token operator">=</span> q<span class="token punctuation">.</span>hash_value
                        <span class="token operator">AND</span> s<span class="token punctuation">.</span>sql_address <span class="token operator">=</span> q<span class="token punctuation">.</span>address
<span class="token keyword">WHERE</span>
    block <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token operator">AND</span> ctime <span class="token operator">/</span> <span class="token number">60</span> <span class="token operator">&gt;</span> <span class="token number">3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="锁明细信息" tabindex="-1"><a class="header-anchor" href="#锁明细信息"><span>锁明细信息</span></a></h4><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
    nvl<span class="token punctuation">(</span>
        s<span class="token punctuation">.</span>username<span class="token punctuation">,</span> <span class="token string">&#39;Internal&#39;</span>
    <span class="token punctuation">)</span>        username<span class="token punctuation">,</span>
    l<span class="token punctuation">.</span>sid<span class="token punctuation">,</span>
    nvl<span class="token punctuation">(</span>
        s<span class="token punctuation">.</span>terminal<span class="token punctuation">,</span> <span class="token string">&#39;None&#39;</span>
    <span class="token punctuation">)</span>        terminal<span class="token punctuation">,</span>
    decode<span class="token punctuation">(</span>
        command<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;None&#39;</span><span class="token punctuation">,</span> decode<span class="token punctuation">(</span>
            l<span class="token punctuation">.</span>id2<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> u1<span class="token punctuation">.</span>name
                      <span class="token operator">||</span> <span class="token string">&#39;.&#39;</span>
                      <span class="token operator">||</span> substr<span class="token punctuation">(</span>
                t1<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">20</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;None&#39;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">)</span>        tab<span class="token punctuation">,</span>
    decode<span class="token punctuation">(</span>
        command<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;BACKGROUND&#39;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;Create Table&#39;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&#39;INSERT&#39;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&#39;SELECT&#39;</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&#39;CREATE CLUSTER&#39;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&#39;ALTER CLUSTER&#39;</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">&#39;UPDATE&#39;</span><span class="token punctuation">,</span> <span class="token number">7</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;DELETE&#39;</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token string">&#39;DROP&#39;</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token string">&#39;CREATE INDEX&#39;</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&#39;DROP INDEX&#39;</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token string">&#39;ALTER INDEX&#39;</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token string">&#39;DROP TABLE&#39;</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token string">&#39;CREATE SEQUENCE&#39;</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token string">&#39;ALTER SEQUENCE&#39;</span>
        <span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token string">&#39;ALTER TABLE&#39;</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token string">&#39;DROP SEQUENCE&#39;</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token string">&#39;GRANT&#39;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">&#39;REVOKE&#39;</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">,</span> <span class="token string">&#39;CREATE SYNONYM&#39;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token string">&#39;DROP SYNONYM&#39;</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token string">&#39;CREATE VIEW&#39;</span>
        <span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token string">&#39;DROP VIEW&#39;</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token string">&#39;VALIDATE INDEX&#39;</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">,</span> <span class="token string">&#39;CREATE PROCEDURE&#39;</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token string">&#39;ALTER PROCEDURE&#39;</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token string">&#39;LOCK TABLE&#39;</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token string">&#39;NO OPERATION&#39;</span><span class="token punctuation">,</span>
        <span class="token number">28</span><span class="token punctuation">,</span> <span class="token string">&#39;RENAME&#39;</span><span class="token punctuation">,</span> <span class="token number">29</span><span class="token punctuation">,</span> <span class="token string">&#39;COMMENT&#39;</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token string">&#39;AUDIT&#39;</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">,</span> <span class="token string">&#39;NOAUDIT&#39;</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token string">&#39;CREATE EXTERNAL DATABASE&#39;</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">,</span> <span class="token string">&#39;DROP EXTERNAL DATABASE&#39;</span><span class="token punctuation">,</span> <span class="token number">34</span><span class="token punctuation">,</span> <span class="token string">&#39;CREATE DATABASE&#39;</span>
        <span class="token punctuation">,</span> <span class="token number">35</span><span class="token punctuation">,</span> <span class="token string">&#39;ALTER DATABASE&#39;</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token string">&#39;CREATE ROLLBACK SEGMENT&#39;</span><span class="token punctuation">,</span> <span class="token number">37</span><span class="token punctuation">,</span> <span class="token string">&#39;ALTER ROLLBACK SEGMENT&#39;</span><span class="token punctuation">,</span> <span class="token number">38</span><span class="token punctuation">,</span> <span class="token string">&#39;DROP ROLLBACK SEGMENT&#39;</span><span class="token punctuation">,</span> <span class="token number">39</span><span class="token punctuation">,</span> <span class="token string">&#39;CREATE TABLESPACE&#39;</span>
        <span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token string">&#39;ALTER TABLESPACE&#39;</span><span class="token punctuation">,</span> <span class="token number">41</span><span class="token punctuation">,</span> <span class="token string">&#39;DROP TABLESPACE&#39;</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">,</span> <span class="token string">&#39;ALTER SESSION&#39;</span><span class="token punctuation">,</span> <span class="token number">43</span><span class="token punctuation">,</span> <span class="token string">&#39;ALTER USER&#39;</span><span class="token punctuation">,</span> <span class="token number">44</span><span class="token punctuation">,</span> <span class="token string">&#39;COMMIT&#39;</span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">,</span> <span class="token string">&#39;ROLLBACK&#39;</span><span class="token punctuation">,</span> <span class="token number">46</span><span class="token punctuation">,</span> <span class="token string">&#39;SAVEPOINT&#39;</span>
        <span class="token punctuation">,</span> <span class="token number">47</span><span class="token punctuation">,</span> <span class="token string">&#39;PL/SQL EXECUTE&#39;</span><span class="token punctuation">,</span> <span class="token number">48</span><span class="token punctuation">,</span> <span class="token string">&#39;SET TRANSACTION&#39;</span><span class="token punctuation">,</span> <span class="token number">49</span><span class="token punctuation">,</span> <span class="token string">&#39;ALTER SYSTEM SWITCH LOG&#39;</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token string">&#39;EXPLAIN&#39;</span><span class="token punctuation">,</span> <span class="token number">51</span><span class="token punctuation">,</span> <span class="token string">&#39;CREATE USER&#39;</span><span class="token punctuation">,</span> <span class="token number">52</span><span class="token punctuation">,</span> <span class="token string">&#39;CREATE ROLE&#39;</span>
        <span class="token punctuation">,</span> <span class="token number">53</span><span class="token punctuation">,</span> <span class="token string">&#39;DROP USER&#39;</span><span class="token punctuation">,</span> <span class="token number">54</span><span class="token punctuation">,</span> <span class="token string">&#39;DROP ROLE&#39;</span><span class="token punctuation">,</span> <span class="token number">55</span><span class="token punctuation">,</span> <span class="token string">&#39;SET ROLE&#39;</span><span class="token punctuation">,</span> <span class="token number">56</span><span class="token punctuation">,</span> <span class="token string">&#39;CREATE SCHEMA&#39;</span><span class="token punctuation">,</span> <span class="token number">57</span><span class="token punctuation">,</span> <span class="token string">&#39;CREATE CONTROL FILE&#39;</span><span class="token punctuation">,</span> <span class="token number">58</span><span class="token punctuation">,</span> <span class="token string">&#39;ALTER TRACING&#39;</span><span class="token punctuation">,</span> <span class="token number">59</span><span class="token punctuation">,</span> <span class="token string">&#39;CREATE TRIGGER&#39;</span>
        <span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token string">&#39;ALTER TRIGGER&#39;</span><span class="token punctuation">,</span> <span class="token number">61</span><span class="token punctuation">,</span> <span class="token string">&#39;DROP TRIGGER&#39;</span><span class="token punctuation">,</span> <span class="token number">62</span><span class="token punctuation">,</span> <span class="token string">&#39;ANALYZE TABLE&#39;</span><span class="token punctuation">,</span> <span class="token number">63</span><span class="token punctuation">,</span> <span class="token string">&#39;ANALYZE INDEX&#39;</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">,</span> <span class="token string">&#39;ANALYZE CLUSTER&#39;</span><span class="token punctuation">,</span> <span class="token number">65</span><span class="token punctuation">,</span> <span class="token string">&#39;CREATE PROFILE&#39;</span>
        <span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">,</span> <span class="token string">&#39;DROP PROFILE&#39;</span><span class="token punctuation">,</span> <span class="token number">67</span><span class="token punctuation">,</span> <span class="token string">&#39;ALTER PROFILE&#39;</span><span class="token punctuation">,</span> <span class="token number">68</span><span class="token punctuation">,</span> <span class="token string">&#39;DROP PROCEDURE&#39;</span><span class="token punctuation">,</span> <span class="token number">69</span><span class="token punctuation">,</span> <span class="token string">&#39;DROP PROCEDURE&#39;</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">,</span> <span class="token string">&#39;ALTER RESOURCE COST&#39;</span><span class="token punctuation">,</span> <span class="token number">71</span><span class="token punctuation">,</span> <span class="token string">&#39;CREATE SNAPSHOT LOG&#39;</span>
        <span class="token punctuation">,</span> <span class="token number">72</span><span class="token punctuation">,</span> <span class="token string">&#39;ALTER SNAPSHOT LOG&#39;</span><span class="token punctuation">,</span> <span class="token number">73</span><span class="token punctuation">,</span> <span class="token string">&#39;DROP SNAPSHOT LOG&#39;</span><span class="token punctuation">,</span> <span class="token number">74</span><span class="token punctuation">,</span> <span class="token string">&#39;CREATE SNAPSHOT&#39;</span><span class="token punctuation">,</span> <span class="token number">75</span><span class="token punctuation">,</span> <span class="token string">&#39;ALTER SNAPSHOT&#39;</span><span class="token punctuation">,</span> <span class="token number">76</span><span class="token punctuation">,</span> <span class="token string">&#39;DROP SNAPSHOT&#39;</span><span class="token punctuation">,</span> <span class="token number">79</span><span class="token punctuation">,</span> <span class="token string">&#39;ALTER ROLE&#39;</span>
        <span class="token punctuation">,</span> <span class="token number">85</span><span class="token punctuation">,</span> <span class="token string">&#39;TRUNCATE TABLE&#39;</span><span class="token punctuation">,</span> <span class="token number">86</span><span class="token punctuation">,</span> <span class="token string">&#39;TRUNCATE CLUSTER&#39;</span><span class="token punctuation">,</span> <span class="token number">87</span><span class="token punctuation">,</span> <span class="token string">&#39;-&#39;</span><span class="token punctuation">,</span> <span class="token number">88</span><span class="token punctuation">,</span> <span class="token string">&#39;ALTER VIEW&#39;</span><span class="token punctuation">,</span> <span class="token number">89</span><span class="token punctuation">,</span> <span class="token string">&#39;-&#39;</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token string">&#39;-&#39;</span><span class="token punctuation">,</span> <span class="token number">91</span><span class="token punctuation">,</span> <span class="token string">&#39;CREATE FUNCTION&#39;</span><span class="token punctuation">,</span> <span class="token number">92</span><span class="token punctuation">,</span> <span class="token string">&#39;ALTER FUNCTION&#39;</span>
        <span class="token punctuation">,</span> <span class="token number">93</span><span class="token punctuation">,</span> <span class="token string">&#39;DROP FUNCTION&#39;</span><span class="token punctuation">,</span> <span class="token number">94</span><span class="token punctuation">,</span> <span class="token string">&#39;CREATE PACKAGE&#39;</span><span class="token punctuation">,</span> <span class="token number">95</span><span class="token punctuation">,</span> <span class="token string">&#39;ALTER PACKAGE&#39;</span><span class="token punctuation">,</span> <span class="token number">96</span><span class="token punctuation">,</span> <span class="token string">&#39;DROP PACKAGE&#39;</span><span class="token punctuation">,</span> <span class="token number">97</span><span class="token punctuation">,</span> <span class="token string">&#39;CREATE PACKAGE BODY&#39;</span><span class="token punctuation">,</span> <span class="token number">98</span><span class="token punctuation">,</span> <span class="token string">&#39;ALTER PACKAGE BODY&#39;</span>
        <span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token string">&#39;DROP PACKAGE BODY&#39;</span><span class="token punctuation">,</span> command <span class="token operator">||</span> <span class="token string">&#39; - ???&#39;</span>
    <span class="token punctuation">)</span>        command<span class="token punctuation">,</span>
    decode<span class="token punctuation">(</span>
        l<span class="token punctuation">.</span>lmode<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;No Lock&#39;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&#39;Row Share&#39;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&#39;Row Exclusive&#39;</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&#39;Share&#39;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&#39;Share Row Exclusive&#39;</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">&#39;Exclusive&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;NONE&#39;</span>
    <span class="token punctuation">)</span>        lmode<span class="token punctuation">,</span>
    decode<span class="token punctuation">(</span>
        l<span class="token punctuation">.</span>request<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&#39;No Lock&#39;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&#39;Row Share&#39;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&#39;Row Exclusive&#39;</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&#39;Share&#39;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&#39;Share Row Exclusive&#39;</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">&#39;Exclusive&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;NONE&#39;</span>
    <span class="token punctuation">)</span>        request<span class="token punctuation">,</span>
    l<span class="token punctuation">.</span>id1
    <span class="token operator">||</span> <span class="token string">&#39;-&#39;</span>
    <span class="token operator">||</span> l<span class="token punctuation">.</span>id2 laddr<span class="token punctuation">,</span>
    l<span class="token punctuation">.</span><span class="token keyword">type</span>
    <span class="token operator">||</span> <span class="token string">&#39; - &#39;</span>
    <span class="token operator">||</span> decode<span class="token punctuation">(</span>
        l<span class="token punctuation">.</span><span class="token keyword">type</span><span class="token punctuation">,</span> <span class="token string">&#39;BL&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Buffer hash table instance lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;CF&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39; Control file schema global enqueue lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;CI&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Cross-instance function invocation instance lock&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;CS&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Control file schema global enqueue lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;CU&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Cursor bind lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;DF&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Data file instance lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;DL&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Direct loader parallel index create&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;DM&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Mount/startup db primary/secondary instance lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;DR&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Distributed recovery process lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;DX&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Distributed transaction entry lock&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;FI&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;SGA open-file information lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;FS&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;File set lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;HW&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Space management operations on a specific segment lock&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;IN&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Instance number lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;IR&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Instance recovery serialization global enqueue lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;IS&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Instance state lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;IV&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;Library cache invalidation instance lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;JQ&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Job queue lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;KK&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Thread kick lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;MB&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Master buffer hash table instance lock&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;MM&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Mount definition gloabal enqueue lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;MR&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Media recovery lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;PF&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Password file lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;PI&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Parallel operation lock&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;PR&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Process startup lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;PS&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Parallel operation lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;RE&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;USE_ROW_ENQUEUE enforcement lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;RT&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Redo thread global enqueue lock&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;RW&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Row wait enqueue lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;SC&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;System commit number instance lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;SH&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;System commit number high water mark enqueue lock&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;SM&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;SMON lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;SN&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Sequence number instance lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;SQ&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Sequence number enqueue lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;SS&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Sort segment lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ST&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;Space transaction enqueue lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;SV&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Sequence number value lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;TA&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Generic enqueue lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;TD&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;DDL enqueue lock&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;TE&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Extend-segment enqueue lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;TM&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;DML enqueue lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;TO&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Temporary Table Object Enqueue&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;TT&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Temporary table enqueue lock&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;TX&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Transaction enqueue lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;UL&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;User supplied lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;UN&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;User name lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;US&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Undo segment DDL lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;WL&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Being-written redo log instance lock&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;WS&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Write-atomic-log-switch global enqueue lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;TS&#39;</span><span class="token punctuation">,</span> decode<span class="token punctuation">(</span>
            l<span class="token punctuation">.</span>id2<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;Temporary segment enqueue lock (ID2=0)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;New block allocation enqueue lock (ID2=1)&#39;</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;LA&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache lock instance lock (A=namespace)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;LB&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache lock instance lock (B=namespace)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;LC&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache lock instance lock (C=namespace)&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;LD&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache lock instance lock (D=namespace)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;LE&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache lock instance lock (E=namespace)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;LF&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache lock instance lock (F=namespace)&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;LG&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache lock instance lock (G=namespace)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;LH&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache lock instance lock (H=namespace)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;LI&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache lock instance lock (I=namespace)&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;LJ&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache lock instance lock (J=namespace)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;LK&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache lock instance lock (K=namespace)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;LL&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache lock instance lock (L=namespace)&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;LM&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache lock instance lock (M=namespace)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;LN&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache lock instance lock (N=namespace)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;LO&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache lock instance lock (O=namespace)&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;LP&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache lock instance lock (P=namespace)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;LS&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Log start/log switch enqueue lock&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;PA&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache pin instance lock (A=namespace)&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;PB&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache pin instance lock (B=namespace)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;PC&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache pin instance lock (C=namespace)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;PD&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache pin instance lock (D=namespace)&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;PE&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache pin instance lock (E=namespace)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;PF&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache pin instance lock (F=namespace)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;PG&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache pin instance lock (G=namespace)&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;PH&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache pin instance lock (H=namespace)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;PI&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache pin instance lock (I=namespace)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;PJ&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache pin instance lock (J=namespace)&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;PL&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache pin instance lock (K=namespace)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;PK&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache pin instance lock (L=namespace)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;PM&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache pin instance lock (M=namespace)&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;PN&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache pin instance lock (N=namespace)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;PO&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache pin instance lock (O=namespace)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;PP&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache pin instance lock (P=namespace)&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;PQ&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache pin instance lock (Q=namespace)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;PR&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache pin instance lock (R=namespace)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;PS&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache pin instance lock (S=namespace)&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;PT&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache pin instance lock (T=namespace)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;PU&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache pin instance lock (U=namespace)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;PV&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache pin instance lock (V=namespace)&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;PW&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache pin instance lock (W=namespace)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;PX&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache pin instance lock (X=namespace)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;PY&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache pin instance lock (Y=namespace)&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;PZ&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Library cache pin instance lock (Z=namespace)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;QA&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Row cache instance lock (A=cache)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;QB&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Row cache instance lock (B=cache)&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;QC&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Row cache instance lock (C=cache)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;QD&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Row cache instance lock (D=cache)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;QE&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Row cache instance lock (E=cache)&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;QF&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Row cache instance lock (F=cache)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;QG&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Row cache instance lock (G=cache)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;QH&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Row cache instance lock (H=cache)&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;QI&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Row cache instance lock (I=cache)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;QJ&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Row cache instance lock (J=cache)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;QL&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Row cache instance lock (K=cache)&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;QK&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Row cache instance lock (L=cache)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;QM&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Row cache instance lock (M=cache)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;QN&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Row cache instance lock (N=cache)&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;QO&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Row cache instance lock (O=cache)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;QP&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Row cache instance lock (P=cache)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;QQ&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Row cache instance lock (Q=cache)&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;QR&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Row cache instance lock (R=cache)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;QS&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Row cache instance lock (S=cache)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;QT&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Row cache instance lock (T=cache)&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;QU&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Row cache instance lock (U=cache)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;QV&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Row cache instance lock (V=cache)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;QW&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Row cache instance lock (W=cache)&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;QX&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Row cache instance lock (X=cache)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;QY&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Row cache instance lock (Y=cache)&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;QZ&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Row cache instance lock (Z=cache)&#39;</span>
        <span class="token punctuation">,</span> <span class="token string">&#39;????&#39;</span>
    <span class="token punctuation">)</span>        lockt
<span class="token keyword">FROM</span>
    v$<span class="token keyword">lock</span>    l<span class="token punctuation">,</span>
    v$<span class="token keyword">session</span> s<span class="token punctuation">,</span>
    sys<span class="token punctuation">.</span><span class="token keyword">user</span>$ u1<span class="token punctuation">,</span>
    sys<span class="token punctuation">.</span>obj$  t1
<span class="token keyword">WHERE</span>
    l<span class="token punctuation">.</span>sid <span class="token operator">=</span> s<span class="token punctuation">.</span>sid
    <span class="token operator">AND</span> t1<span class="token punctuation">.</span>obj<span class="token comment"># = decode(</span>
        l<span class="token punctuation">.</span>id2<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> l<span class="token punctuation">.</span>id1<span class="token punctuation">,</span> <span class="token number">1</span>
    <span class="token punctuation">)</span>
    <span class="token operator">AND</span> u1<span class="token punctuation">.</span><span class="token keyword">user</span><span class="token comment"># = t1.owner#</span>
    <span class="token operator">AND</span> s<span class="token punctuation">.</span><span class="token keyword">type</span> <span class="token operator">!=</span> <span class="token string">&#39;BACKGROUND&#39;</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
    <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token number">5</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="释放锁" tabindex="-1"><a class="header-anchor" href="#释放锁"><span>释放锁</span></a></h3><ul><li>生成释放语句</li></ul>`,6),S=n("div",{class:"language-sql line-numbers-mode","data-ext":"sql","data-title":"sql"},[n("pre",{class:"language-sql"},[n("code",null,[n("span",{class:"token keyword"},"select"),s(),n("span",{class:"token string"},"'alter system kill session '''"),n("span",{class:"token operator"},"||"),s("sid"),n("span",{class:"token operator"},"||"),n("span",{class:"token string"},"','"),n("span",{class:"token operator"},"||"),n("span",{class:"token keyword"},"serial"),n("span",{class:"token comment"},"#||''' immediate;' from v$session where sid=&1;"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),A=n("div",{class:"language-sql line-numbers-mode","data-ext":"sql","data-title":"sql"},[n("pre",{class:"language-sql"},[n("code",null,[n("span",{class:"token keyword"},"select"),s(),n("span",{class:"token string"},"'alter system kill session '''"),n("span",{class:"token operator"},"||"),s("sid"),n("span",{class:"token operator"},"||"),n("span",{class:"token string"},"','"),n("span",{class:"token operator"},"||"),n("span",{class:"token keyword"},"serial"),n("span",{class:"token comment"},"#||',@'||inst_id||''' immediate;' from gv$session where sid=&1;"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),D=n("ul",null,[n("li",null,"执行释放语句")],-1),T=n("div",{class:"language-sql line-numbers-mode","data-ext":"sql","data-title":"sql"},[n("pre",{class:"language-sql"},[n("code",null,[n("span",{class:"token keyword"},"alter"),s(),n("span",{class:"token keyword"},"session"),s(),n("span",{class:"token keyword"},"kill"),s(),n("span",{class:"token keyword"},"session"),s(),n("span",{class:"token string"},"'sid,serial#'"),s(" immediate"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),O=n("div",{class:"language-sql line-numbers-mode","data-ext":"sql","data-title":"sql"},[n("pre",{class:"language-sql"},[n("code",null,[n("span",{class:"token keyword"},"alter"),s(),n("span",{class:"token keyword"},"session"),s(),n("span",{class:"token keyword"},"kill"),s(),n("span",{class:"token keyword"},"session"),s(),n("span",{class:"token string"},"'sid,serial#,@inst_id'"),s(" immediate"),n("span",{class:"token punctuation"},";"),s(`
`)])]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),_=o(`<h3 id="死锁" tabindex="-1"><a class="header-anchor" href="#死锁"><span>死锁</span></a></h3><ul><li>死锁检测控制参数<code>_lm_dd_interval</code></li></ul><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code>COL NAME <span class="token keyword">FOR</span> A32<span class="token punctuation">;</span>
COL KSPPDESC <span class="token keyword">FOR</span> A32<span class="token punctuation">;</span>
COL KSPPSTVL <span class="token keyword">FOR</span> A32<span class="token punctuation">;</span>

<span class="token keyword">SELECT</span>
    a<span class="token punctuation">.</span>indx<span class="token punctuation">,</span>
    a<span class="token punctuation">.</span>ksppinm name<span class="token punctuation">,</span>
    a<span class="token punctuation">.</span>ksppdesc<span class="token punctuation">,</span>
    b<span class="token punctuation">.</span>ksppstvl
<span class="token keyword">FROM</span>
    x$ksppi  a<span class="token punctuation">,</span>
    x$ksppcv b
<span class="token keyword">WHERE</span>
    a<span class="token punctuation">.</span>indx <span class="token operator">=</span> b<span class="token punctuation">.</span>indx
    <span class="token operator">AND</span> lower<span class="token punctuation">(</span>
        a<span class="token punctuation">.</span>ksppinm
    <span class="token punctuation">)</span> <span class="token operator">LIKE</span> lower<span class="token punctuation">(</span>
        <span class="token string">&#39;%&amp;PARAMETER%&#39;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>:::</p>`,4);function N(C,q){const p=i("CodeTabs");return u(),k("div",null,[d,c(p,{id:"662",data:[{id:"锁对象"},{id:"锁对象+进程信息"},{id:"锁定对象+锁级别"}],active:0},{title0:a(({value:t,isActive:e})=>[s("锁对象")]),title1:a(({value:t,isActive:e})=>[s("锁对象+进程信息")]),title2:a(({value:t,isActive:e})=>[s("锁定对象+锁级别")]),tab0:a(({value:t,isActive:e})=>[m]),tab1:a(({value:t,isActive:e})=>[b]),tab2:a(({value:t,isActive:e})=>[v]),_:1}),g,c(p,{id:"680",data:[{id:"单实例"},{id:"RAC"},{id:"RAC+阻塞对象"},{id:"锁级别+SQL信息"},{id:"锁级别+对象"}],active:0},{title0:a(({value:t,isActive:e})=>[s("单实例")]),title1:a(({value:t,isActive:e})=>[s("RAC")]),title2:a(({value:t,isActive:e})=>[s("RAC+阻塞对象")]),title3:a(({value:t,isActive:e})=>[s("锁级别+SQL信息")]),title4:a(({value:t,isActive:e})=>[s("锁级别+对象")]),tab0:a(({value:t,isActive:e})=>[h]),tab1:a(({value:t,isActive:e})=>[E]),tab2:a(({value:t,isActive:e})=>[R]),tab3:a(({value:t,isActive:e})=>[y]),tab4:a(({value:t,isActive:e})=>[L]),_:1}),w,c(p,{id:"719",data:[{id:"单实例"},{id:"RAC"}],active:0},{title0:a(({value:t,isActive:e})=>[s("单实例")]),title1:a(({value:t,isActive:e})=>[s("RAC")]),tab0:a(({value:t,isActive:e})=>[S]),tab1:a(({value:t,isActive:e})=>[A]),_:1}),D,c(p,{id:"734",data:[{id:"单实例"},{id:"RAC"}],active:0},{title0:a(({value:t,isActive:e})=>[s("单实例")]),title1:a(({value:t,isActive:e})=>[s("RAC")]),tab0:a(({value:t,isActive:e})=>[T]),tab1:a(({value:t,isActive:e})=>[O]),_:1}),_])}const x=l(r,[["render",N],["__file","transaction.html.vue"]]),M=JSON.parse('{"path":"/guide/database/oracle/transaction.html","title":"事务管理","lang":"zh-CN","frontmatter":{"title":"事务管理","description":"数据并发和一致性简介 在单用户数据库中，一个用户可以修改数据而不用担心其他用户同时修改相同的数据。但是，在多用户数据库中，多个并发事务中的语句可能会更新相同的数据。同时执行的事务必须产生有意义且一致的结果。 多用户数据库需保证以下两点： 保证用户可以同时访问数据（数据并发）； 确保每个用户看到一致的数据视图（数据一致性），包括用户自己的事务和其他用户提...","head":[["meta",{"property":"og:url","content":"https://github.com/abelit/abelit-datapeacock.git/guide/database/oracle/transaction.html"}],["meta",{"property":"og:site_name","content":"数之雀"}],["meta",{"property":"og:title","content":"事务管理"}],["meta",{"property":"og:description","content":"数据并发和一致性简介 在单用户数据库中，一个用户可以修改数据而不用担心其他用户同时修改相同的数据。但是，在多用户数据库中，多个并发事务中的语句可能会更新相同的数据。同时执行的事务必须产生有意义且一致的结果。 多用户数据库需保证以下两点： 保证用户可以同时访问数据（数据并发）； 确保每个用户看到一致的数据视图（数据一致性），包括用户自己的事务和其他用户提..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-05-11T14:06:18.000Z"}],["meta",{"property":"article:author","content":"Abelit"}],["meta",{"property":"article:modified_time","content":"2024-05-11T14:06:18.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"事务管理\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-05-11T14:06:18.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Abelit\\",\\"url\\":\\"https://github.com/abelit\\"}]}"]]},"headers":[{"level":2,"title":"数据并发和一致性简介","slug":"数据并发和一致性简介","link":"#数据并发和一致性简介","children":[{"level":3,"title":"多版本读一致性","slug":"多版本读一致性","link":"#多版本读一致性","children":[]},{"level":3,"title":"事务隔离级别","slug":"事务隔离级别","link":"#事务隔离级别","children":[]},{"level":3,"title":"数据库锁机制","slug":"数据库锁机制","link":"#数据库锁机制","children":[]},{"level":3,"title":"自动锁","slug":"自动锁","link":"#自动锁","children":[]}]},{"level":2,"title":"锁相关查询与操作","slug":"锁相关查询与操作","link":"#锁相关查询与操作","children":[{"level":3,"title":"锁查询","slug":"锁查询","link":"#锁查询","children":[]},{"level":3,"title":"释放锁","slug":"释放锁","link":"#释放锁","children":[]},{"level":3,"title":"死锁","slug":"死锁","link":"#死锁","children":[]}]}],"git":{"createdTime":1715436378000,"updatedTime":1715436378000,"contributors":[{"name":"ableit","email":"ychenid@live.com","commits":1}]},"readingTime":{"minutes":21.48,"words":6445},"filePathRelative":"guide/database/oracle/transaction.md","localizedDate":"2024年5月11日","autoDesc":true,"excerpt":"<h2>数据并发和一致性简介</h2>\\n<p>在单用户数据库中，一个用户可以修改数据而不用担心其他用户同时修改相同的数据。但是，在多用户数据库中，多个并发事务中的语句可能会更新相同的数据。同时执行的事务必须产生有意义且一致的结果。</p>\\n<p>多用户数据库需保证以下两点：</p>\\n<ul>\\n<li>保证用户可以同时访问数据（数据并发）；</li>\\n<li>确保每个用户看到一致的数据视图（数据一致性），包括用户自己的事务和其他用户提交的事务所做的可见更改。</li>\\n</ul>\\n<h3>多版本读一致性</h3>\\n<p>在 Oracle 数据库中，多版本控制是同时实现多个版本数据的能力。Oracle 数据库维护多版本读取一致性。\\nOracle 数据库的查询具有以下特征：</p>"}');export{x as comp,M as data};
