import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as s,c as a,f as e}from"./app-DR5J2daJ.js";const p={},t=e(`<h2 id="bbed工具" tabindex="-1"><a class="header-anchor" href="#bbed工具"><span>BBED工具</span></a></h2><p>Oracle BBED是一个能够浏览和编辑Oracle数据库中数据块的内部工具，它可以直接修改Oracle数据文件块的内容，在一些极端恢复场景下比较有用。</p><p>使用BBED工具是一种非常危险的方法，可能会导致数据不一致或丢失。在使用之前，请务必做好备份，并且尽量寻求专业的帮助。BBED工具不受Oracle服务支持，也不对外发布文档。如果您不确定如何使用BBED工具，建议您使用其他的方法，如RMAN，Data Pump，或者联系Oracle支持服务。</p><h3 id="bbed可以做什么" tabindex="-1"><a class="header-anchor" href="#bbed可以做什么"><span>BBED可以做什么？</span></a></h3><ul><li>更改数据</li><li>恢复受损的或删除的数据</li><li>修改文件头</li><li>损坏块并修复坏块</li></ul><h3 id="bbed修复oracle数据库块损坏问题修复的步骤" tabindex="-1"><a class="header-anchor" href="#bbed修复oracle数据库块损坏问题修复的步骤"><span>BBED修复Oracle数据库块损坏问题修复的步骤</span></a></h3><ul><li>确定坏块的位置和类型，可以通过检查警告信息或者使用ALTER DATABASE DATAFILE xxx CHECKSUM等命令。</li><li>备份数据文件，以防止修复过程中造成更大的损坏。</li><li>编译和启动BBED工具，设置相关的参数，如blocksize，listfile，mode等。</li><li>使用set命令定位到坏块的文件号和块号，如set file 3，set block 17。</li><li>使用dump命令查看坏块的内容，分析数据结构和错误原因。</li><li>使用modify命令修改坏块的内容，修复错误，如modify 1000 file 3 block 17。</li><li>使用verify命令检查修改后的块是否正确，如verify file 3 block 17。</li><li>使用sum命令更新块的校验和，如sum apply file 3 block 17。</li><li>退出BBED工具，重启数据库，检查修复结果。</li></ul><h3 id="bbed安装" tabindex="-1"><a class="header-anchor" href="#bbed安装"><span>BBED安装</span></a></h3><blockquote><p>Oracle 11G下安装BBED，需要从ORACLE 10G中复制三个包 sbbdpt.o 、ssbbded.o 并将两个文件移到$ORACLE_HOME/rdbms/lib/ 目录下 , bbedus.msb 移到 $ORACLE_HOME/rdbms/mesg/ 下面。</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">cp</span> ./linux10g_64_bbed/*.o <span class="token variable">$ORACLE_HOME</span>/rdbms/lib/
<span class="token function">cp</span> ./linux10g_64_bbed/*.msb <span class="token variable">$ORACLE_HOME</span>/rdbms/mesg/
<span class="token builtin class-name">cd</span> <span class="token variable">$ORACLE_HOME</span>/rdbms/lib/
<span class="token function">make</span> <span class="token parameter variable">-f</span> ins_rdbms.mk <span class="token variable">$ORACLE_HOME</span>/rdbms/lib/bbed
<span class="token function">mv</span> bbed <span class="token variable">$ORACLE_HOME</span>/bin/
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="使用方法" tabindex="-1"><a class="header-anchor" href="#使用方法"><span>使用方法</span></a></h3><ul><li>简单命令</li></ul><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>bbed 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><blockquote><p>bbed默认密码是<code>blockedit</code>。</p></blockquote><ul><li>带参数文件</li></ul><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>cat &gt; bbed.par &lt;&lt;&#39;EOF&#39;
mode=edit
password=blockedit
blocksize=8192
EOF

bbed parfile=bbed.par
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="bbed参数" tabindex="-1"><a class="header-anchor" href="#bbed参数"><span>BBED参数</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>oracle@testdb ~<span class="token punctuation">]</span>$ bbed <span class="token assign-left variable">help</span><span class="token operator">=</span>y
PASSWORD - Required parameter
FILENAME - Database <span class="token function">file</span> name
BLOCKSIZE - Database block size
LISTFILE - List <span class="token function">file</span> name
MODE - <span class="token punctuation">[</span>browse/edit<span class="token punctuation">]</span>
SPOOL - Spool to logfile <span class="token punctuation">[</span>no/yes<span class="token punctuation">]</span>
CMDFILE - BBED <span class="token builtin class-name">command</span> <span class="token function">file</span> name
LOGFILE - BBED log <span class="token function">file</span> name
PARFILE - Parameter <span class="token function">file</span> name
BIFILE - BBED before-image <span class="token function">file</span> name
REVERT - Rollback changes from BIFILE <span class="token punctuation">[</span>no/yes<span class="token punctuation">]</span>
SILENT - Hide banner <span class="token punctuation">[</span>no/yes<span class="token punctuation">]</span>
HELP - Show all valid parameters <span class="token punctuation">[</span>no/yes<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="获取内部块信息" tabindex="-1"><a class="header-anchor" href="#获取内部块信息"><span>获取内部块信息</span></a></h3><ul><li>创建获取内部块信息的存储过程</li></ul><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token operator">or</span> <span class="token keyword">replace</span> <span class="token keyword">procedure</span> get_rowinfo<span class="token punctuation">(</span>rid <span class="token operator">in</span> rowid<span class="token punctuation">)</span> <span class="token keyword">as</span>
  sm      varchar2<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span> :<span class="token operator">=</span> <span class="token string">&#39;SMALLFILE&#39;</span><span class="token punctuation">;</span>
  rid_t   number<span class="token punctuation">;</span>
  obj_n   number<span class="token punctuation">;</span>
  file_n  number<span class="token punctuation">;</span>
  block_n number<span class="token punctuation">;</span>
  row_n   number<span class="token punctuation">;</span>
<span class="token keyword">begin</span>
  DBMS_ROWID<span class="token punctuation">.</span>ROWID_INFO<span class="token punctuation">(</span>rid<span class="token punctuation">,</span> rid_t<span class="token punctuation">,</span> obj_n<span class="token punctuation">,</span> file_n<span class="token punctuation">,</span> block_n<span class="token punctuation">,</span> row_n<span class="token punctuation">,</span> sm<span class="token punctuation">)</span><span class="token punctuation">;</span>
  DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;Type:            &#39;</span> <span class="token operator">||</span> to_char<span class="token punctuation">(</span>rid_t<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;Data obj number: &#39;</span> <span class="token operator">||</span> to_char<span class="token punctuation">(</span>obj_n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;Relative fno:    &#39;</span> <span class="token operator">||</span> to_char<span class="token punctuation">(</span>file_n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;Block number:    &#39;</span> <span class="token operator">||</span> to_char<span class="token punctuation">(</span>block_n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">&#39;Row number:      &#39;</span> <span class="token operator">||</span> to_char<span class="token punctuation">(</span>row_n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
<span class="token operator">/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>查询表的行ID</li></ul><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">set</span> linesize <span class="token number">200</span>

<span class="token keyword">SELECT</span>
    ROWID<span class="token punctuation">,</span>
    dbms_rowid<span class="token punctuation">.</span>rowid_type<span class="token punctuation">(</span>ROWID<span class="token punctuation">)</span>         <span class="token keyword">type</span><span class="token punctuation">,</span>
    dbms_rowid<span class="token punctuation">.</span>rowid_object<span class="token punctuation">(</span>ROWID<span class="token punctuation">)</span>       object<span class="token punctuation">,</span>
    dbms_rowid<span class="token punctuation">.</span>rowid_relative_fno<span class="token punctuation">(</span>ROWID<span class="token punctuation">)</span> <span class="token keyword">file</span><span class="token comment">#,</span>
    dbms_rowid<span class="token punctuation">.</span>rowid_block_number<span class="token punctuation">(</span>ROWID<span class="token punctuation">)</span> block<span class="token comment">#,</span>
    dbms_rowid<span class="token punctuation">.</span>rowid_row_number<span class="token punctuation">(</span>ROWID<span class="token punctuation">)</span>   <span class="token keyword">row</span><span class="token comment">#,</span>
    t<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword">FROM</span>
    abelit<span class="token punctuation">.</span>abelitusers t
<span class="token keyword">WHERE</span>
    ROWNUM <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>获取内部块信息</li></ul><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">set</span> serverout <span class="token keyword">on</span><span class="token punctuation">;</span>
<span class="token keyword">call</span> get_rowinfo<span class="token punctuation">(</span><span class="token string">&#39;AAAVU3AAFAAAACDAAA&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="通过bbed修改数据" tabindex="-1"><a class="header-anchor" href="#通过bbed修改数据"><span>通过BBED修改数据</span></a></h2><ul><li>查看数据</li></ul><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token keyword">set</span> linesize <span class="token number">200</span>
<span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span>
    ROWID<span class="token punctuation">,</span>
    dbms_rowid<span class="token punctuation">.</span>rowid_type<span class="token punctuation">(</span>ROWID<span class="token punctuation">)</span>         <span class="token keyword">type</span><span class="token punctuation">,</span>
    dbms_rowid<span class="token punctuation">.</span>rowid_object<span class="token punctuation">(</span>ROWID<span class="token punctuation">)</span>       object<span class="token punctuation">,</span>
    dbms_rowid<span class="token punctuation">.</span>rowid_relative_fno<span class="token punctuation">(</span>ROWID<span class="token punctuation">)</span> <span class="token keyword">file</span><span class="token comment">#,</span>
    dbms_rowid<span class="token punctuation">.</span>rowid_block_number<span class="token punctuation">(</span>ROWID<span class="token punctuation">)</span> block<span class="token comment">#,</span>
    dbms_rowid<span class="token punctuation">.</span>rowid_row_number<span class="token punctuation">(</span>ROWID<span class="token punctuation">)</span>   <span class="token keyword">row</span><span class="token comment">#,</span>
    t<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword">FROM</span>
    abelit<span class="token punctuation">.</span>abelitusers t
<span class="token keyword">WHERE</span>
    ROWNUM <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token keyword">SQL</span><span class="token operator">&gt;</span>   <span class="token number">2</span>    <span class="token number">3</span>    <span class="token number">4</span>    <span class="token number">5</span>    <span class="token number">6</span>    <span class="token number">7</span>    <span class="token number">8</span>    <span class="token number">9</span>   <span class="token number">10</span>   <span class="token number">11</span>   <span class="token number">12</span>  

ROWID			 <span class="token keyword">TYPE</span>	  OBJECT      <span class="token keyword">FILE</span><span class="token comment">#	BLOCK#	     ROW#	  ID NAME</span>
<span class="token comment">------------------ ---------- ---------- ---------- ---------- ---------- ---------- --------------------</span>
AAAVU3AAFAAAACDAAA	    <span class="token number">1</span>	   <span class="token number">87351</span>	  <span class="token number">5</span>	   <span class="token number">131</span>		<span class="token number">0</span>	   <span class="token number">1</span> chenying


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>设置数据文件信息</li></ul><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">set</span> heading <span class="token keyword">off</span>
<span class="token keyword">set</span> echo <span class="token keyword">off</span>
<span class="token keyword">set</span> flush <span class="token keyword">off</span>
<span class="token keyword">set</span> feedback <span class="token keyword">off</span>
<span class="token keyword">SET</span> term <span class="token keyword">off</span>
<span class="token keyword">set</span> trimout <span class="token keyword">on</span>
<span class="token keyword">set</span> trimspool <span class="token keyword">on</span>
<span class="token keyword">set</span> pagesize <span class="token number">0</span>
<span class="token keyword">set</span> linesize <span class="token number">200</span>
<span class="token keyword">set</span> long <span class="token number">9999</span>

col <span class="token keyword">file</span><span class="token comment"># format 9999</span>
col name format a100
spool <span class="token string">&#39;bbedfile.txt&#39;</span>
<span class="token keyword">select</span> <span class="token keyword">file</span><span class="token comment">#,name from v$datafile;</span>
spool <span class="token keyword">off</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">cat</span> <span class="token operator">&gt;</span> bbed.par <span class="token operator">&lt;&lt;</span><span class="token string">&#39;EOF&#39;
mode=edit
password=blockedit
blocksize=8192
listfile=bbedfile.txt
EOF</span>

bbed <span class="token assign-left variable">parfile</span><span class="token operator">=</span>bbed.par
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>查看数据信息</li></ul><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>oracle@testdb ~<span class="token punctuation">]</span>$ bbed <span class="token assign-left variable">parfile</span><span class="token operator">=</span>bbed.par

BBED: Release <span class="token number">2.0</span>.0.0.0 - Limited Production on Thu Jan <span class="token number">18</span> <span class="token number">15</span>:10:54 <span class="token number">2024</span>

Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token number">1982</span>, <span class="token number">2011</span>, Oracle and/or its affiliates.  All rights reserved.

************* <span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span> For Oracle Internal Use only <span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span> ***************

BBED<span class="token operator">&gt;</span> info
 File<span class="token comment">#  Name                                                        Size(blks)</span>
 -----  ----                                                        ----------
     <span class="token number">1</span>  /data/app/oracle/oradata/testdb/system01.dbf                         <span class="token number">0</span>
     <span class="token number">2</span>  /data/app/oracle/oradata/testdb/sysaux01.dbf                         <span class="token number">0</span>
     <span class="token number">3</span>  /data/app/oracle/oradata/testdb/undotbs01.dbf                        <span class="token number">0</span>
     <span class="token number">4</span>  /data/app/oracle/oradata/testdb/users01.dbf                          <span class="token number">0</span>
     <span class="token number">5</span>  /data/app/oracle/oradata/demo/demotbs01.dbf                          <span class="token number">0</span>
     <span class="token number">6</span>  /data/app/oracle/oradata/testdb/testtbs01.dbf                        <span class="token number">0</span>
     <span class="token number">7</span>  /data/app/oracle/oradata/other/panan01.dbf                           <span class="token number">0</span>
     <span class="token number">8</span>  /data/app/oracle/oradata/other/raotbs01.dbf                          <span class="token number">0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>设置当前数据块</li></ul><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>BBED<span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> <span class="token function">file</span> <span class="token number">5</span> block <span class="token number">131</span>
	FILE<span class="token comment">#          	5</span>
	BLOCK<span class="token comment">#         	131</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>查找数据</li></ul><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>BBED<span class="token operator">&gt;</span> f /c chenying
 File: /data/app/oracle/oradata/demo/demotbs01.dbf <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
 Block: <span class="token number">131</span>              Offsets: <span class="token number">8180</span> to <span class="token number">8191</span>           Dba:0x01400083
------------------------------------------------------------------------
 6368656e 79696e67 010669c7 

 <span class="token operator">&lt;</span><span class="token number">32</span> bytes per line<span class="token operator">&gt;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>&quot;chenying&quot; 对应的16进制是 &quot;63 68 65 6E 79 69 6E 67&quot;</p></blockquote><ul><li>dump数据块内容</li></ul><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>BBED<span class="token operator">&gt;</span> dump /v dba <span class="token number">5,131</span> offset <span class="token number">8180</span> count <span class="token number">16</span>
 File: /data/app/oracle/oradata/demo/demotbs01.dbf <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
 Block: <span class="token number">131</span>     Offsets: <span class="token number">8180</span> to <span class="token number">8191</span>  Dba:0x01400083
-------------------------------------------------------
 6368656e 79696e67 010669c7          l chenying<span class="token punctuation">..</span>i�

 <span class="token operator">&lt;</span><span class="token number">16</span> bytes per line<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>修改block,将<code>chenying</code>修改为<code>panpan</code></li></ul><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>BBED<span class="token operator">&gt;</span> modify /c panpan dba <span class="token number">5,131</span> offset <span class="token number">8180</span>
 File: /data/app/oracle/oradata/demo/demotbs01.dbf <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
 Block: <span class="token number">131</span>              Offsets: <span class="token number">8180</span> to <span class="token number">8191</span>           Dba:0x01400083
------------------------------------------------------------------------
 70616e70 616e6e67 010669c7 

 <span class="token operator">&lt;</span><span class="token number">32</span> bytes per line<span class="token operator">&gt;</span>

BBED<span class="token operator">&gt;</span> dump /v dba <span class="token number">5,131</span> offset <span class="token number">8180</span> count <span class="token number">16</span>
 File: /data/app/oracle/oradata/demo/demotbs01.dbf <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
 Block: <span class="token number">131</span>     Offsets: <span class="token number">8180</span> to <span class="token number">8191</span>  Dba:0x01400083
-------------------------------------------------------
 70616e70 616e6e67 010669c7          l panpanng<span class="token punctuation">..</span>i�

 <span class="token operator">&lt;</span><span class="token number">16</span> bytes per line<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>应用变更</li></ul><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>BBED<span class="token operator">&gt;</span> <span class="token function">sum</span> dba <span class="token number">5,131</span> apply
Check value <span class="token keyword">for</span> File <span class="token number">5</span>, Block <span class="token number">131</span>:
current <span class="token operator">=</span> 0x0fd9, required <span class="token operator">=</span> 0x0fd9
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>回到sql窗口 刷新缓存，查看修改后的数据</li></ul><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token keyword">set</span> linesize <span class="token number">200</span>
<span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token keyword">alter</span> system flush buffer_cache<span class="token punctuation">;</span>
<span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token keyword">SELECT</span>
    ROWID<span class="token punctuation">,</span>
    dbms_rowid<span class="token punctuation">.</span>rowid_type<span class="token punctuation">(</span>ROWID<span class="token punctuation">)</span>         <span class="token keyword">type</span><span class="token punctuation">,</span>
    dbms_rowid<span class="token punctuation">.</span>rowid_object<span class="token punctuation">(</span>ROWID<span class="token punctuation">)</span>       object<span class="token punctuation">,</span>
    dbms_rowid<span class="token punctuation">.</span>rowid_relative_fno<span class="token punctuation">(</span>ROWID<span class="token punctuation">)</span> <span class="token keyword">file</span><span class="token comment">#,</span>
    dbms_rowid<span class="token punctuation">.</span>rowid_block_number<span class="token punctuation">(</span>ROWID<span class="token punctuation">)</span> block<span class="token comment">#,</span>
    dbms_rowid<span class="token punctuation">.</span>rowid_row_number<span class="token punctuation">(</span>ROWID<span class="token punctuation">)</span>   <span class="token keyword">row</span><span class="token comment">#,</span>
    t<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword">FROM</span>
    abelit<span class="token punctuation">.</span>abelitusers t
<span class="token keyword">WHERE</span>
    ROWNUM <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token keyword">SQL</span><span class="token operator">&gt;</span>   <span class="token number">2</span>    <span class="token number">3</span>    <span class="token number">4</span>    <span class="token number">5</span>    <span class="token number">6</span>    <span class="token number">7</span>    <span class="token number">8</span>    <span class="token number">9</span>   <span class="token number">10</span>   <span class="token number">11</span>   <span class="token number">12</span>  

ROWID			 <span class="token keyword">TYPE</span>	  OBJECT      <span class="token keyword">FILE</span><span class="token comment">#	BLOCK#	     ROW#	  ID NAME</span>
<span class="token comment">------------------ ---------- ---------- ---------- ---------- ---------- ---------- --------------------</span>
AAAVU3AAFAAAACDAAA	    <span class="token number">1</span>	   <span class="token number">87351</span>	  <span class="token number">5</span>	   <span class="token number">131</span>		<span class="token number">0</span>	   <span class="token number">1</span> panpanng

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="bbed恢复delete的行" tabindex="-1"><a class="header-anchor" href="#bbed恢复delete的行"><span>BBED恢复delete的行</span></a></h2><p>当row 被delete 的时候，实际上data 并没有被remove，只是将该row 标记为delete，然后其对应的空间被统计为free space。 row 的status 存在每个row的row header里。Row Header 包含Row Flag，Lock Byte（ITL）和column Count。Row Header 结构：</p><table><thead><tr><th>名称</th><th>长度</th><th>注释</th></tr></thead><tbody><tr><td>Row Flag</td><td>1字节</td><td>行状态标志</td></tr><tr><td>Lock Byte（ITL）</td><td>1字节</td><td>同ITL 的lck相对应 表示这行是否被 lock 了</td></tr><tr><td>column Count</td><td>1字节</td><td>同ITL 的lck相对应 表示这行是否被 lock 了</td></tr></tbody></table><p>其中Row Flag占用1个byte，并且以bitmask 来保存。bitmask 的解释如下：</p><table><thead><tr><th></th><th></th><th></th></tr></thead><tbody><tr><td>Cluster Key</td><td>K</td><td>128</td></tr><tr><td>Cluster Table Member</td><td>C</td><td>64</td></tr><tr><td>Head of row piece</td><td>H</td><td>32</td></tr><tr><td>Deleted</td><td>D</td><td>16</td></tr><tr><td>First data piece</td><td>F</td><td>8</td></tr><tr><td>Last data piece</td><td>L</td><td>4</td></tr><tr><td>1st Column continues from previous piece</td><td>P</td><td>2</td></tr><tr><td>Last column continues in next piece</td><td>N</td><td>1</td></tr></tbody></table><h3 id="dump数据块-查看flag" tabindex="-1"><a class="header-anchor" href="#dump数据块-查看flag"><span>dump数据块，查看flag</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token keyword">alter</span> system <span class="token keyword">dump</span> datafile <span class="token number">5</span> block <span class="token number">131</span><span class="token punctuation">;</span>

System altered<span class="token punctuation">.</span>

<span class="token keyword">SQL</span><span class="token operator">&gt;</span> oradebug setmypid
Statement processed<span class="token punctuation">.</span>
<span class="token keyword">SQL</span><span class="token operator">&gt;</span> oradebug tracefile_name
<span class="token operator">/</span>u01<span class="token operator">/</span>app<span class="token operator">/</span>oracle<span class="token operator">/</span>diag<span class="token operator">/</span>rdbms<span class="token operator">/</span>testdb<span class="token operator">/</span>testdb<span class="token operator">/</span>trace<span class="token operator">/</span>testdb_ora_117928<span class="token punctuation">.</span>trc
<span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token operator">!</span>more <span class="token operator">/</span>u01<span class="token operator">/</span>app<span class="token operator">/</span>oracle<span class="token operator">/</span>diag<span class="token operator">/</span>rdbms<span class="token operator">/</span>testdb<span class="token operator">/</span>testdb<span class="token operator">/</span>trace<span class="token operator">/</span>testdb_ora_117928<span class="token punctuation">.</span>trc
Trace <span class="token keyword">file</span> <span class="token operator">/</span>u01<span class="token operator">/</span>app<span class="token operator">/</span>oracle<span class="token operator">/</span>diag<span class="token operator">/</span>rdbms<span class="token operator">/</span>testdb<span class="token operator">/</span>testdb<span class="token operator">/</span>trace<span class="token operator">/</span>testdb_ora_117928<span class="token punctuation">.</span>trc
Oracle <span class="token keyword">Database</span> <span class="token number">11</span>g Enterprise Edition <span class="token keyword">Release</span> <span class="token number">11.2</span><span class="token number">.0</span><span class="token number">.4</span><span class="token number">.0</span> <span class="token operator">-</span> <span class="token number">64</span>bit Production
<span class="token keyword">With</span> the Partitioning<span class="token punctuation">,</span> OLAP<span class="token punctuation">,</span> <span class="token keyword">Data</span> Mining <span class="token operator">and</span> <span class="token keyword">Real</span> Application Testing options
ORACLE_HOME <span class="token operator">=</span> <span class="token operator">/</span>u01<span class="token operator">/</span>app<span class="token operator">/</span>oracle<span class="token operator">/</span>product<span class="token operator">/</span><span class="token number">11.2</span><span class="token number">.0</span><span class="token number">.4</span><span class="token operator">/</span>db_1
System name:	Linux
Node name:	testdb
<span class="token keyword">Release</span>:	<span class="token number">3.10</span><span class="token number">.0</span><span class="token operator">-</span><span class="token number">1160.90</span><span class="token number">.1</span><span class="token punctuation">.</span>el7<span class="token punctuation">.</span>x86_64
Version:	<span class="token comment">#1 SMP Thu May 4 15:21:22 UTC 2023</span>
Machine:	x86_64
Instance name: testdb
Redo thread mounted <span class="token keyword">by</span> this instance: <span class="token number">1</span>
Oracle process number: <span class="token number">30</span>
Unix process pid: <span class="token number">117928</span><span class="token punctuation">,</span> image: oracle<span class="token variable">@testdb</span> <span class="token punctuation">(</span>TNS V1<span class="token operator">-</span>V3<span class="token punctuation">)</span>


<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">15</span>:<span class="token number">46</span>:<span class="token number">57.354</span>
<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token keyword">SESSION</span> ID:<span class="token punctuation">(</span><span class="token number">133.20099</span><span class="token punctuation">)</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">15</span>:<span class="token number">46</span>:<span class="token number">57.354</span>
<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> CLIENT ID:<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">15</span>:<span class="token number">46</span>:<span class="token number">57.354</span>
<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> SERVICE NAME:<span class="token punctuation">(</span>SYS$USERS<span class="token punctuation">)</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">15</span>:<span class="token number">46</span>:<span class="token number">57.354</span>
<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> MODULE NAME:<span class="token punctuation">(</span>sqlplus<span class="token variable">@testdb</span> <span class="token punctuation">(</span>TNS V1<span class="token operator">-</span>V3<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">15</span>:<span class="token number">46</span>:<span class="token number">57.354</span>
<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token keyword">ACTION</span> NAME:<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">15</span>:<span class="token number">46</span>:<span class="token number">57.354</span>
 
<span class="token keyword">Start</span> <span class="token keyword">dump</span> <span class="token keyword">data</span> blocks tsn: <span class="token number">6</span> <span class="token keyword">file</span><span class="token comment">#:5 minblk 131 maxblk 131</span>
Block <span class="token keyword">dump</span> <span class="token keyword">from</span> cache:
<span class="token keyword">Dump</span> <span class="token keyword">of</span> buffer cache at <span class="token keyword">level</span> <span class="token number">4</span> <span class="token keyword">for</span> tsn<span class="token operator">=</span><span class="token number">6</span> rdba<span class="token operator">=</span><span class="token number">20971651</span>
BH <span class="token punctuation">(</span><span class="token number">0x1ecfce7e8</span><span class="token punctuation">)</span> <span class="token keyword">file</span><span class="token comment">#: 5 rdba: 0x01400083 (5/131) class: 1 ba: 0x1ecaee000</span>
  <span class="token keyword">set</span>: <span class="token number">12</span> pool: <span class="token number">3</span> bsz: <span class="token number">8192</span> bsi: <span class="token number">0</span> sflg: <span class="token number">1</span> pwc: <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span>
  dbwrid: <span class="token number">0</span> obj: <span class="token number">87351</span> objn: <span class="token number">87351</span> tsn: <span class="token number">6</span> afn: <span class="token number">5</span> hint: f
  <span class="token keyword">hash</span>: <span class="token punctuation">[</span><span class="token number">0x1ecf7ca78</span><span class="token punctuation">,</span><span class="token number">0x24a212a20</span><span class="token punctuation">]</span> lru: <span class="token punctuation">[</span><span class="token number">0x1ecfcea10</span><span class="token punctuation">,</span><span class="token number">0x1ecfce7a0</span><span class="token punctuation">]</span>
  ckptq: <span class="token punctuation">[</span><span class="token boolean">NULL</span><span class="token punctuation">]</span> fileq: <span class="token punctuation">[</span><span class="token boolean">NULL</span><span class="token punctuation">]</span> objq: <span class="token punctuation">[</span><span class="token number">0x245caa420</span><span class="token punctuation">,</span><span class="token number">0x1ecfce7c8</span><span class="token punctuation">]</span> objaq: <span class="token punctuation">[</span><span class="token number">0x245caa410</span><span class="token punctuation">,</span><span class="token number">0x1ecfce7d8</span><span class="token punctuation">]</span>
  st: XCURRENT md: <span class="token boolean">NULL</span> fpin: <span class="token string">&#39;kdswh11: kdst_fetch&#39;</span> tch: <span class="token number">1</span>
  flags: only_sequential_access
  LRBA: <span class="token punctuation">[</span><span class="token number">0x0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token punctuation">]</span> LSCN: <span class="token punctuation">[</span><span class="token number">0x0</span><span class="token number">.0</span><span class="token punctuation">]</span> HSCN: <span class="token punctuation">[</span><span class="token number">0xffff</span><span class="token punctuation">.</span>ffffffff<span class="token punctuation">]</span> HSUB: <span class="token punctuation">[</span><span class="token number">65535</span><span class="token punctuation">]</span>
BH <span class="token punctuation">(</span><span class="token number">0x1ecf7c9c0</span><span class="token punctuation">)</span> <span class="token keyword">file</span><span class="token comment">#: 5 rdba: 0x01400083 (5/131) class: 1 ba: 0x1ec288000</span>
  <span class="token keyword">set</span>: <span class="token number">10</span> pool: <span class="token number">3</span> bsz: <span class="token number">8192</span> bsi: <span class="token number">0</span> sflg: <span class="token number">1</span> pwc: <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span>
  dbwrid: <span class="token number">0</span> obj: <span class="token number">87351</span> objn: <span class="token number">87351</span> tsn: <span class="token number">6</span> afn: <span class="token number">5</span> hint: f
  <span class="token keyword">hash</span>: <span class="token punctuation">[</span><span class="token number">0x1f8f90890</span><span class="token punctuation">,</span><span class="token number">0x1ecfce8a0</span><span class="token punctuation">]</span> lru: <span class="token punctuation">[</span><span class="token number">0x1ecf7bc10</span><span class="token punctuation">,</span><span class="token number">0x1ecf7b9a0</span><span class="token punctuation">]</span>
  lru<span class="token operator">-</span>flags: on_auxiliary_list
  ckptq: <span class="token punctuation">[</span><span class="token boolean">NULL</span><span class="token punctuation">]</span> fileq: <span class="token punctuation">[</span><span class="token boolean">NULL</span><span class="token punctuation">]</span> objq: <span class="token punctuation">[</span><span class="token boolean">NULL</span><span class="token punctuation">]</span> objaq: <span class="token punctuation">[</span><span class="token boolean">NULL</span><span class="token punctuation">]</span>
  st: FREE md: <span class="token boolean">NULL</span> fpin: <span class="token string">&#39;kdswh11: kdst_fetch&#39;</span> tch: <span class="token number">0</span> lfb: <span class="token number">33</span>
  flags:
BH <span class="token punctuation">(</span><span class="token number">0x1f8f907d8</span><span class="token punctuation">)</span> <span class="token keyword">file</span><span class="token comment">#: 5 rdba: 0x01400083 (5/131) class: 1 ba: 0x1f8492000</span>
  <span class="token keyword">set</span>: <span class="token number">9</span> pool: <span class="token number">3</span> bsz: <span class="token number">8192</span> bsi: <span class="token number">0</span> sflg: <span class="token number">1</span> pwc: <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span>
  dbwrid: <span class="token number">0</span> obj: <span class="token number">87351</span> objn: <span class="token number">87351</span> tsn: <span class="token number">6</span> afn: <span class="token number">5</span> hint: f
  <span class="token keyword">hash</span>: <span class="token punctuation">[</span><span class="token number">0x24a212a20</span><span class="token punctuation">,</span><span class="token number">0x1ecf7ca78</span><span class="token punctuation">]</span> lru: <span class="token punctuation">[</span><span class="token number">0x1f9f7f078</span><span class="token punctuation">,</span><span class="token number">0x1f5f87550</span><span class="token punctuation">]</span>
  lru<span class="token operator">-</span>flags: on_auxiliary_list
  ckptq: <span class="token punctuation">[</span><span class="token boolean">NULL</span><span class="token punctuation">]</span> fileq: <span class="token punctuation">[</span><span class="token boolean">NULL</span><span class="token punctuation">]</span> objq: <span class="token punctuation">[</span><span class="token boolean">NULL</span><span class="token punctuation">]</span> objaq: <span class="token punctuation">[</span><span class="token boolean">NULL</span><span class="token punctuation">]</span>
  st: FREE md: <span class="token boolean">NULL</span> fpin: <span class="token string">&#39;kdswh11: kdst_fetch&#39;</span> tch: <span class="token number">0</span> lfb: <span class="token number">33</span>
  flags:
Block <span class="token keyword">dump</span> <span class="token keyword">from</span> <span class="token keyword">disk</span>:
buffer tsn: <span class="token number">6</span> rdba: <span class="token number">0x01400083</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token operator">/</span><span class="token number">131</span><span class="token punctuation">)</span>
scn: <span class="token number">0x0000</span><span class="token punctuation">.</span><span class="token number">000</span>ec769 seq: <span class="token number">0x01</span> flg: <span class="token number">0x06</span> tail: <span class="token number">0xc7690601</span>
frmt: <span class="token number">0x02</span> chkval: <span class="token number">0x0fd9</span> <span class="token keyword">type</span>: <span class="token number">0x06</span><span class="token operator">=</span>trans <span class="token keyword">data</span>
Hex <span class="token keyword">dump</span> <span class="token keyword">of</span> block: st<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> typ_found<span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">Dump</span> <span class="token keyword">of</span> memory <span class="token keyword">from</span> <span class="token number">0x00007FD983F9BA00</span> <span class="token keyword">to</span> <span class="token number">0x00007FD983F9DA00</span>
<span class="token number">7</span>FD983F9BA00 <span class="token number">0000</span>A206 <span class="token number">01400083</span> <span class="token number">000</span>EC769 <span class="token number">06010000</span>  <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token variable">@.i.......</span><span class="token punctuation">]</span>
<span class="token number">7</span>FD983F9BA10 <span class="token number">00000</span>FD9 <span class="token number">00000001</span> <span class="token number">00015537</span> <span class="token number">000</span>EC765  <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token number">7</span>U<span class="token punctuation">.</span><span class="token punctuation">.</span>e<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token number">7</span>FD983F9BA20 <span class="token number">00000000</span> <span class="token number">0032</span>F802 <span class="token number">01400080</span> <span class="token number">00010007</span>  <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token number">.2</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token variable">@.....</span><span class="token punctuation">]</span>
<span class="token number">7</span>FD983F9BA30 <span class="token number">00000294</span> <span class="token number">00</span>C02311 <span class="token number">00160076</span> <span class="token number">00002001</span>  <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment">#..v.... ..]</span>
<span class="token number">7</span>FD983F9BA40 <span class="token number">000</span>EC769 <span class="token number">00000000</span> <span class="token number">00000000</span> <span class="token number">00000000</span>  <span class="token punctuation">[</span>i<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token number">7</span>FD983F9BA50 <span class="token number">00000000</span> <span class="token number">00000000</span> <span class="token number">00000000</span> <span class="token number">00000000</span>  <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token number">7</span>FD983F9BA60 <span class="token number">00000000</span> <span class="token number">00010100</span> <span class="token number">0014</span>FFFF <span class="token number">1</span>F751F89  <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>u<span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token number">7</span>FD983F9BA70 <span class="token number">00001</span>F75 <span class="token number">1</span>F890001 <span class="token number">00000000</span> <span class="token number">00000000</span>  <span class="token punctuation">[</span>u<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token number">7</span>FD983F9BA80 <span class="token number">00000000</span> <span class="token number">00000000</span> <span class="token number">00000000</span> <span class="token number">00000000</span>  <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
        <span class="token keyword">Repeat</span> <span class="token number">501</span> times
<span class="token number">7</span>FD983F9D9E0 <span class="token number">00000000</span> <span class="token number">00000000</span> <span class="token number">00000000</span> <span class="token number">02012</span>C00  <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token number">7</span>FD983F9D9F0 <span class="token number">0802</span>C102 <span class="token number">706</span>E6170 <span class="token number">676</span>E6E61 C7690601  <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>panpanng<span class="token punctuation">.</span><span class="token punctuation">.</span>i<span class="token punctuation">.</span><span class="token punctuation">]</span>
Block header <span class="token keyword">dump</span>:  <span class="token number">0x01400083</span>
 Object id <span class="token keyword">on</span> Block? Y
 seg<span class="token operator">/</span>obj: <span class="token number">0x15537</span>  csc: <span class="token number">0x00</span><span class="token punctuation">.</span>ec765  itc: <span class="token number">2</span>  flg: E  typ: <span class="token number">1</span> <span class="token operator">-</span> <span class="token keyword">DATA</span>
     brn: <span class="token number">0</span>  bdba: <span class="token number">0x1400080</span> ver: <span class="token number">0x01</span> opc: <span class="token number">0</span>
     inc: <span class="token number">0</span>  exflg: <span class="token number">0</span>
 
 Itl           Xid                  Uba         Flag  Lck        Scn<span class="token operator">/</span>Fsc
<span class="token number">0x01</span>   <span class="token number">0x0007</span><span class="token number">.001</span><span class="token number">.00000294</span>  <span class="token number">0x00c02311</span><span class="token number">.0076</span><span class="token number">.16</span>  <span class="token comment">--U-    1  fsc 0x0000.000ec769</span>
<span class="token number">0x02</span>   <span class="token number">0x0000</span><span class="token number">.000</span><span class="token number">.00000000</span>  <span class="token number">0x00000000</span><span class="token number">.0000</span><span class="token number">.00</span>  <span class="token comment">----    0  fsc 0x0000.00000000</span>
bdba: <span class="token number">0x01400083</span>
data_block_dump<span class="token punctuation">,</span><span class="token keyword">data</span> header at <span class="token number">0x7fd983f9ba64</span>
<span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span>
tsiz: <span class="token number">0x1f98</span>
hsiz: <span class="token number">0x14</span>
pbl: <span class="token number">0x7fd983f9ba64</span>
     <span class="token number">76543210</span>
flag<span class="token operator">=</span><span class="token comment">--------</span>
ntab<span class="token operator">=</span><span class="token number">1</span>
nrow<span class="token operator">=</span><span class="token number">1</span>
frre<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span>
fsbo<span class="token operator">=</span><span class="token number">0x14</span>
fseo<span class="token operator">=</span><span class="token number">0x1f89</span>
avsp<span class="token operator">=</span><span class="token number">0x1f75</span>
tosp<span class="token operator">=</span><span class="token number">0x1f75</span>
<span class="token number">0xe</span>:pti<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>	nrow<span class="token operator">=</span><span class="token number">1</span>	offs<span class="token operator">=</span><span class="token number">0</span>
<span class="token number">0x12</span>:pri<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>	offs<span class="token operator">=</span><span class="token number">0x1f89</span>
block_row_dump:
tab <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">row</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token variable">@0x1f89</span>
tl: <span class="token number">15</span> fb: <span class="token comment">--H-FL-- lb: 0x1  cc: 2</span>
col  <span class="token number">0</span>: <span class="token punctuation">[</span> <span class="token number">2</span><span class="token punctuation">]</span>  c1 <span class="token number">02</span>
col  <span class="token number">1</span>: <span class="token punctuation">[</span> <span class="token number">8</span><span class="token punctuation">]</span>  <span class="token number">70</span> <span class="token number">61</span> <span class="token number">6</span>e <span class="token number">70</span> <span class="token number">61</span> <span class="token number">6</span>e <span class="token number">6</span>e <span class="token number">67</span>
end_of_block_dump
<span class="token keyword">End</span> <span class="token keyword">dump</span> <span class="token keyword">data</span> blocks tsn: <span class="token number">6</span> <span class="token keyword">file</span><span class="token comment">#: 5 minblk 131 maxblk 131</span>

<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">15</span>:<span class="token number">47</span>:<span class="token number">09.069</span>
Processing Oradebug command <span class="token string">&#39;setmypid&#39;</span>

<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">15</span>:<span class="token number">47</span>:<span class="token number">09.070</span>
Oradebug command <span class="token string">&#39;setmypid&#39;</span> console output: <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>

<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">15</span>:<span class="token number">47</span>:<span class="token number">14.880</span>
Processing Oradebug command <span class="token string">&#39;tracefile_name&#39;</span>

<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">15</span>:<span class="token number">47</span>:<span class="token number">14.880</span>
Oradebug command <span class="token string">&#39;tracefile_name&#39;</span> console output: 
<span class="token operator">/</span>u01<span class="token operator">/</span>app<span class="token operator">/</span>oracle<span class="token operator">/</span>diag<span class="token operator">/</span>rdbms<span class="token operator">/</span>testdb<span class="token operator">/</span>testdb<span class="token operator">/</span>trace<span class="token operator">/</span>testdb_ora_117928<span class="token punctuation">.</span>trc
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>注意这里的fb: --H-FL--。 其有8个选项，每个值分别与bitmask 对应。</p><p>如果一个row 没有被删除，那么它的Flag 表示为：--H-FL--. 这里的字母分别代表属性的首字母。其对应的值：32 + 8 + 4 =44 or 0x2c</p><p>如果一个row 被delete了，那么它的Flag 表示为：--HDFL--. bitmask里的deleted 被设置为16. 其对应的值：32 + 16 + 8 + 4 = 60 or 0x3c</p><p>data_block_dump,data header at 0x7fd983f9ba64</p><p>=============== tsiz: 0x1f98 hsiz: 0x14 pbl: 0x7fd983f9ba64 76543210 flag=-------- ntab=1 nrow=1 frre=-1 fsbo=0x14 fseo=0x1f89 avsp=0x1f75 tosp=0x1f75 0xe:pti[0] nrow=1 offs=0 0x12:pri[0] offs=0x1f89 block_row_dump: tab 0, row 0, @0x1f89 tl: 15 fb: --H-FL-- lb: 0x1 cc: 2 col 0: [ 2] c1 02 col 1: [ 8] 70 61 6e 70 61 6e 6e 67 end_of_block_dump End dump data blocks tsn: 6 file#: 5 minblk 131 maxblk 131</p></div><h3 id="删除数据" tabindex="-1"><a class="header-anchor" href="#删除数据"><span>删除数据</span></a></h3><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> abelit<span class="token punctuation">.</span>abelitusers<span class="token punctuation">;</span>

	ID NAME
<span class="token comment">---------- --------------------</span>
	 <span class="token number">1</span> panpanng

<span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token keyword">delete</span> <span class="token keyword">from</span> abelit<span class="token punctuation">.</span>abelitusers <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">&#39;panpanng&#39;</span><span class="token punctuation">;</span>

<span class="token number">1</span> <span class="token keyword">row</span> deleted<span class="token punctuation">.</span>

<span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token keyword">commit</span><span class="token punctuation">;</span>

<span class="token keyword">Commit</span> complete<span class="token punctuation">.</span>

<span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> abelit<span class="token punctuation">.</span>abelitusers<span class="token punctuation">;</span>

<span class="token keyword">no</span> <span class="token keyword">rows</span> selected


<span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token keyword">alter</span> system <span class="token keyword">dump</span> datafile <span class="token number">5</span> block <span class="token number">131</span><span class="token punctuation">;</span>

System altered<span class="token punctuation">.</span>

<span class="token keyword">SQL</span><span class="token operator">&gt;</span> oradebug setmypid
Statement processed<span class="token punctuation">.</span>
<span class="token keyword">SQL</span><span class="token operator">&gt;</span> oradebug tracefile_name
<span class="token operator">/</span>u01<span class="token operator">/</span>app<span class="token operator">/</span>oracle<span class="token operator">/</span>diag<span class="token operator">/</span>rdbms<span class="token operator">/</span>testdb<span class="token operator">/</span>testdb<span class="token operator">/</span>trace<span class="token operator">/</span>testdb_ora_146306<span class="token punctuation">.</span>trc
<span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token operator">!</span>more <span class="token operator">/</span>u01<span class="token operator">/</span>app<span class="token operator">/</span>oracle<span class="token operator">/</span>diag<span class="token operator">/</span>rdbms<span class="token operator">/</span>testdb<span class="token operator">/</span>testdb<span class="token operator">/</span>trace<span class="token operator">/</span>testdb_ora_146306<span class="token punctuation">.</span>trc
Trace <span class="token keyword">file</span> <span class="token operator">/</span>u01<span class="token operator">/</span>app<span class="token operator">/</span>oracle<span class="token operator">/</span>diag<span class="token operator">/</span>rdbms<span class="token operator">/</span>testdb<span class="token operator">/</span>testdb<span class="token operator">/</span>trace<span class="token operator">/</span>testdb_ora_146306<span class="token punctuation">.</span>trc
Oracle <span class="token keyword">Database</span> <span class="token number">11</span>g Enterprise Edition <span class="token keyword">Release</span> <span class="token number">11.2</span><span class="token number">.0</span><span class="token number">.4</span><span class="token number">.0</span> <span class="token operator">-</span> <span class="token number">64</span>bit Production
<span class="token keyword">With</span> the Partitioning<span class="token punctuation">,</span> OLAP<span class="token punctuation">,</span> <span class="token keyword">Data</span> Mining <span class="token operator">and</span> <span class="token keyword">Real</span> Application Testing options
ORACLE_HOME <span class="token operator">=</span> <span class="token operator">/</span>u01<span class="token operator">/</span>app<span class="token operator">/</span>oracle<span class="token operator">/</span>product<span class="token operator">/</span><span class="token number">11.2</span><span class="token number">.0</span><span class="token number">.4</span><span class="token operator">/</span>db_1
System name:	Linux
Node name:	testdb
<span class="token keyword">Release</span>:	<span class="token number">3.10</span><span class="token number">.0</span><span class="token operator">-</span><span class="token number">1160.90</span><span class="token number">.1</span><span class="token punctuation">.</span>el7<span class="token punctuation">.</span>x86_64
Version:	<span class="token comment">#1 SMP Thu May 4 15:21:22 UTC 2023</span>
Machine:	x86_64
Instance name: testdb
Redo thread mounted <span class="token keyword">by</span> this instance: <span class="token number">1</span>
Oracle process number: <span class="token number">30</span>
Unix process pid: <span class="token number">146306</span><span class="token punctuation">,</span> image: oracle<span class="token variable">@testdb</span> <span class="token punctuation">(</span>TNS V1<span class="token operator">-</span>V3<span class="token punctuation">)</span>


<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">16</span>:<span class="token number">15</span>:<span class="token number">20.437</span>
<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token keyword">SESSION</span> ID:<span class="token punctuation">(</span><span class="token number">133.20101</span><span class="token punctuation">)</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">16</span>:<span class="token number">15</span>:<span class="token number">20.437</span>
<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> CLIENT ID:<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">16</span>:<span class="token number">15</span>:<span class="token number">20.437</span>
<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> SERVICE NAME:<span class="token punctuation">(</span>SYS$USERS<span class="token punctuation">)</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">16</span>:<span class="token number">15</span>:<span class="token number">20.437</span>
<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> MODULE NAME:<span class="token punctuation">(</span>sqlplus<span class="token variable">@testdb</span> <span class="token punctuation">(</span>TNS V1<span class="token operator">-</span>V3<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">16</span>:<span class="token number">15</span>:<span class="token number">20.437</span>
<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token keyword">ACTION</span> NAME:<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">16</span>:<span class="token number">15</span>:<span class="token number">20.437</span>
 
<span class="token keyword">Start</span> <span class="token keyword">dump</span> <span class="token keyword">data</span> blocks tsn: <span class="token number">6</span> <span class="token keyword">file</span><span class="token comment">#:5 minblk 131 maxblk 131</span>
Block <span class="token keyword">dump</span> <span class="token keyword">from</span> cache:
<span class="token keyword">Dump</span> <span class="token keyword">of</span> buffer cache at <span class="token keyword">level</span> <span class="token number">4</span> <span class="token keyword">for</span> tsn<span class="token operator">=</span><span class="token number">6</span> rdba<span class="token operator">=</span><span class="token number">20971651</span>
BH <span class="token punctuation">(</span><span class="token number">0x1ecfb87b0</span><span class="token punctuation">)</span> <span class="token keyword">file</span><span class="token comment">#: 5 rdba: 0x01400083 (5/131) class: 1 ba: 0x1ec8ac000</span>
  <span class="token keyword">set</span>: <span class="token number">12</span> pool: <span class="token number">3</span> bsz: <span class="token number">8192</span> bsi: <span class="token number">0</span> sflg: <span class="token number">1</span> pwc: <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span>
  dbwrid: <span class="token number">0</span> obj: <span class="token number">87351</span> objn: <span class="token number">87351</span> tsn: <span class="token number">6</span> afn: <span class="token number">5</span> hint: f
  <span class="token keyword">hash</span>: <span class="token punctuation">[</span><span class="token number">0x1ecfce8a0</span><span class="token punctuation">,</span><span class="token number">0x24a212a20</span><span class="token punctuation">]</span> lru: <span class="token punctuation">[</span><span class="token number">0x1ecfb89d8</span><span class="token punctuation">,</span><span class="token number">0x1ecfb8768</span><span class="token punctuation">]</span>
  ckptq: <span class="token punctuation">[</span><span class="token boolean">NULL</span><span class="token punctuation">]</span> fileq: <span class="token punctuation">[</span><span class="token boolean">NULL</span><span class="token punctuation">]</span> objq: <span class="token punctuation">[</span><span class="token number">0x1ecfb8790</span><span class="token punctuation">,</span><span class="token number">0x245caa420</span><span class="token punctuation">]</span> objaq: <span class="token punctuation">[</span><span class="token number">0x245caa410</span><span class="token punctuation">,</span><span class="token number">0x1ecfce7d8</span><span class="token punctuation">]</span>
  st: XCURRENT md: <span class="token boolean">NULL</span> fpin: <span class="token string">&#39;kdswh11: kdst_fetch&#39;</span> tch: <span class="token number">4</span>
  flags: block_written_once redo_since_read
  LRBA: <span class="token punctuation">[</span><span class="token number">0x0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token punctuation">]</span> LSCN: <span class="token punctuation">[</span><span class="token number">0x0</span><span class="token number">.0</span><span class="token punctuation">]</span> HSCN: <span class="token punctuation">[</span><span class="token number">0xffff</span><span class="token punctuation">.</span>ffffffff<span class="token punctuation">]</span> HSUB: <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
BH <span class="token punctuation">(</span><span class="token number">0x1ecfce7e8</span><span class="token punctuation">)</span> <span class="token keyword">file</span><span class="token comment">#: 5 rdba: 0x01400083 (5/131) class: 1 ba: 0x1ecaee000</span>
  <span class="token keyword">set</span>: <span class="token number">12</span> pool: <span class="token number">3</span> bsz: <span class="token number">8192</span> bsi: <span class="token number">0</span> sflg: <span class="token number">1</span> pwc: <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span>
  dbwrid: <span class="token number">0</span> obj: <span class="token number">87351</span> objn: <span class="token number">87351</span> tsn: <span class="token number">6</span> afn: <span class="token number">5</span> hint: f
  <span class="token keyword">hash</span>: <span class="token punctuation">[</span><span class="token number">0x1ecf7ca78</span><span class="token punctuation">,</span><span class="token number">0x1ecfb8868</span><span class="token punctuation">]</span> lru: <span class="token punctuation">[</span><span class="token number">0x24a4e80d8</span><span class="token punctuation">,</span><span class="token number">0x1ecfb8c48</span><span class="token punctuation">]</span>
  lru<span class="token operator">-</span>flags: moved_to_tail
  ckptq: <span class="token punctuation">[</span><span class="token boolean">NULL</span><span class="token punctuation">]</span> fileq: <span class="token punctuation">[</span><span class="token boolean">NULL</span><span class="token punctuation">]</span> objq: <span class="token punctuation">[</span><span class="token boolean">NULL</span><span class="token punctuation">]</span> objaq: <span class="token punctuation">[</span><span class="token boolean">NULL</span><span class="token punctuation">]</span>
  st: CR md: <span class="token boolean">NULL</span> fpin: <span class="token string">&#39;kdswh11: kdst_fetch&#39;</span> tch: <span class="token number">2</span>
  cr: <span class="token punctuation">[</span>scn: <span class="token number">0x0</span><span class="token punctuation">.</span><span class="token number">124</span>bcb<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>xid: <span class="token number">0x0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>uba: <span class="token number">0x0</span><span class="token number">.0</span><span class="token number">.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>cls: <span class="token number">0x0</span><span class="token punctuation">.</span><span class="token number">124</span>bcb<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>sfl: <span class="token number">0x0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span>lc: <span class="token number">0x0</span><span class="token punctuation">.</span>ec769<span class="token punctuation">]</span>
  flags: only_sequential_access
BH <span class="token punctuation">(</span><span class="token number">0x1ecf7c9c0</span><span class="token punctuation">)</span> <span class="token keyword">file</span><span class="token comment">#: 5 rdba: 0x01400083 (5/131) class: 1 ba: 0x1ec288000</span>
  <span class="token keyword">set</span>: <span class="token number">10</span> pool: <span class="token number">3</span> bsz: <span class="token number">8192</span> bsi: <span class="token number">0</span> sflg: <span class="token number">1</span> pwc: <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span>
  dbwrid: <span class="token number">0</span> obj: <span class="token number">87351</span> objn: <span class="token number">87351</span> tsn: <span class="token number">6</span> afn: <span class="token number">5</span> hint: f
  <span class="token keyword">hash</span>: <span class="token punctuation">[</span><span class="token number">0x1f8f90890</span><span class="token punctuation">,</span><span class="token number">0x1ecfce8a0</span><span class="token punctuation">]</span> lru: <span class="token punctuation">[</span><span class="token number">0x1ecf7bc10</span><span class="token punctuation">,</span><span class="token number">0x1ecf7b9a0</span><span class="token punctuation">]</span>
  lru<span class="token operator">-</span>flags: on_auxiliary_list
  ckptq: <span class="token punctuation">[</span><span class="token boolean">NULL</span><span class="token punctuation">]</span> fileq: <span class="token punctuation">[</span><span class="token boolean">NULL</span><span class="token punctuation">]</span> objq: <span class="token punctuation">[</span><span class="token boolean">NULL</span><span class="token punctuation">]</span> objaq: <span class="token punctuation">[</span><span class="token boolean">NULL</span><span class="token punctuation">]</span>
  st: FREE md: <span class="token boolean">NULL</span> fpin: <span class="token string">&#39;kdswh11: kdst_fetch&#39;</span> tch: <span class="token number">0</span> lfb: <span class="token number">33</span>
  flags:
BH <span class="token punctuation">(</span><span class="token number">0x1f8f907d8</span><span class="token punctuation">)</span> <span class="token keyword">file</span><span class="token comment">#: 5 rdba: 0x01400083 (5/131) class: 1 ba: 0x1f8492000</span>
  <span class="token keyword">set</span>: <span class="token number">9</span> pool: <span class="token number">3</span> bsz: <span class="token number">8192</span> bsi: <span class="token number">0</span> sflg: <span class="token number">1</span> pwc: <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span>
  dbwrid: <span class="token number">0</span> obj: <span class="token number">87351</span> objn: <span class="token number">87351</span> tsn: <span class="token number">6</span> afn: <span class="token number">5</span> hint: f
  <span class="token keyword">hash</span>: <span class="token punctuation">[</span><span class="token number">0x24a212a20</span><span class="token punctuation">,</span><span class="token number">0x1ecf7ca78</span><span class="token punctuation">]</span> lru: <span class="token punctuation">[</span><span class="token number">0x1f9f7f078</span><span class="token punctuation">,</span><span class="token number">0x1f5f87550</span><span class="token punctuation">]</span>
  lru<span class="token operator">-</span>flags: on_auxiliary_list
  ckptq: <span class="token punctuation">[</span><span class="token boolean">NULL</span><span class="token punctuation">]</span> fileq: <span class="token punctuation">[</span><span class="token boolean">NULL</span><span class="token punctuation">]</span> objq: <span class="token punctuation">[</span><span class="token boolean">NULL</span><span class="token punctuation">]</span> objaq: <span class="token punctuation">[</span><span class="token boolean">NULL</span><span class="token punctuation">]</span>
  st: FREE md: <span class="token boolean">NULL</span> fpin: <span class="token string">&#39;kdswh11: kdst_fetch&#39;</span> tch: <span class="token number">0</span> lfb: <span class="token number">33</span>
  flags:
Block <span class="token keyword">dump</span> <span class="token keyword">from</span> <span class="token keyword">disk</span>:
buffer tsn: <span class="token number">6</span> rdba: <span class="token number">0x01400083</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token operator">/</span><span class="token number">131</span><span class="token punctuation">)</span>
scn: <span class="token number">0x0000</span><span class="token punctuation">.</span><span class="token number">00124</span>bcf seq: <span class="token number">0x01</span> flg: <span class="token number">0x06</span> tail: <span class="token number">0x4bcf0601</span>
frmt: <span class="token number">0x02</span> chkval: <span class="token number">0x5f2e</span> <span class="token keyword">type</span>: <span class="token number">0x06</span><span class="token operator">=</span>trans <span class="token keyword">data</span>
Hex <span class="token keyword">dump</span> <span class="token keyword">of</span> block: st<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> typ_found<span class="token operator">=</span><span class="token number">1</span>
<span class="token keyword">Dump</span> <span class="token keyword">of</span> memory <span class="token keyword">from</span> <span class="token number">0x00007FAA1DFB0A00</span> <span class="token keyword">to</span> <span class="token number">0x00007FAA1DFB2A00</span>
<span class="token number">7</span>FAA1DFB0A00 <span class="token number">0000</span>A206 <span class="token number">01400083</span> <span class="token number">00124</span>BCF <span class="token number">06010000</span>  <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token variable">@..K......</span><span class="token punctuation">]</span>
<span class="token number">7</span>FAA1DFB0A10 <span class="token number">00005</span>F2E <span class="token number">00000001</span> <span class="token number">00015537</span> <span class="token number">00124</span>BCC  <span class="token punctuation">[</span><span class="token punctuation">.</span>_<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token number">7</span>U<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>K<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token number">7</span>FAA1DFB0A20 <span class="token number">00000000</span> <span class="token number">0032</span>F802 <span class="token number">01400080</span> <span class="token number">00010007</span>  <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token number">.2</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token variable">@.....</span><span class="token punctuation">]</span>
<span class="token number">7</span>FAA1DFB0A30 <span class="token number">00000294</span> <span class="token number">00</span>C02311 <span class="token number">00160076</span> <span class="token number">00008000</span>  <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment">#..v.......]</span>
<span class="token number">7</span>FAA1DFB0A40 <span class="token number">000</span>EC769 <span class="token number">00100009</span> <span class="token number">0000041</span>A <span class="token number">00</span>C00351  <span class="token punctuation">[</span>i<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>Q<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token number">7</span>FAA1DFB0A50 <span class="token number">001300</span>FD <span class="token number">000</span>D2001 <span class="token number">00124</span>BCF <span class="token number">00000000</span>  <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>K<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token number">7</span>FAA1DFB0A60 <span class="token number">00000000</span> <span class="token number">00010100</span> <span class="token number">0014</span>FFFF <span class="token number">1</span>F751F89  <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>u<span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token number">7</span>FAA1DFB0A70 <span class="token number">00001</span>F84 <span class="token number">1</span>F890001 <span class="token number">00000000</span> <span class="token number">00000000</span>  <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token number">7</span>FAA1DFB0A80 <span class="token number">00000000</span> <span class="token number">00000000</span> <span class="token number">00000000</span> <span class="token number">00000000</span>  <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
        <span class="token keyword">Repeat</span> <span class="token number">501</span> times
<span class="token number">7</span>FAA1DFB29E0 <span class="token number">00000000</span> <span class="token number">00000000</span> <span class="token number">00000000</span> <span class="token number">02023</span>C00  <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token number">7</span>FAA1DFB29F0 <span class="token number">0802</span>C102 <span class="token number">706</span>E6170 <span class="token number">676</span>E6E61 <span class="token number">4</span>BCF0601  <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>panpanng<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>K<span class="token punctuation">]</span>
Block header <span class="token keyword">dump</span>:  <span class="token number">0x01400083</span>
 Object id <span class="token keyword">on</span> Block? Y
 seg<span class="token operator">/</span>obj: <span class="token number">0x15537</span>  csc: <span class="token number">0x00</span><span class="token punctuation">.</span><span class="token number">124</span>bcc  itc: <span class="token number">2</span>  flg: E  typ: <span class="token number">1</span> <span class="token operator">-</span> <span class="token keyword">DATA</span>
     brn: <span class="token number">0</span>  bdba: <span class="token number">0x1400080</span> ver: <span class="token number">0x01</span> opc: <span class="token number">0</span>
     inc: <span class="token number">0</span>  exflg: <span class="token number">0</span>
 
 Itl           Xid                  Uba         Flag  Lck        Scn<span class="token operator">/</span>Fsc
<span class="token number">0x01</span>   <span class="token number">0x0007</span><span class="token number">.001</span><span class="token number">.00000294</span>  <span class="token number">0x00c02311</span><span class="token number">.0076</span><span class="token number">.16</span>  C<span class="token comment">---    0  scn 0x0000.000ec769</span>
<span class="token number">0x02</span>   <span class="token number">0x0009</span><span class="token number">.010</span><span class="token punctuation">.</span><span class="token number">0000041</span>a  <span class="token number">0x00c00351</span><span class="token punctuation">.</span><span class="token number">00</span>fd<span class="token punctuation">.</span><span class="token number">13</span>  <span class="token comment">--U-    1  fsc 0x000d.00124bcf</span>
bdba: <span class="token number">0x01400083</span>
data_block_dump<span class="token punctuation">,</span><span class="token keyword">data</span> header at <span class="token number">0x7faa1dfb0a64</span>
<span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span><span class="token operator">=</span>
tsiz: <span class="token number">0x1f98</span>
hsiz: <span class="token number">0x14</span>
pbl: <span class="token number">0x7faa1dfb0a64</span>
     <span class="token number">76543210</span>
flag<span class="token operator">=</span><span class="token comment">--------</span>
ntab<span class="token operator">=</span><span class="token number">1</span>
nrow<span class="token operator">=</span><span class="token number">1</span>
frre<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span>
fsbo<span class="token operator">=</span><span class="token number">0x14</span>
fseo<span class="token operator">=</span><span class="token number">0x1f89</span>
avsp<span class="token operator">=</span><span class="token number">0x1f75</span>
tosp<span class="token operator">=</span><span class="token number">0x1f84</span>
<span class="token number">0xe</span>:pti<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>	nrow<span class="token operator">=</span><span class="token number">1</span>	offs<span class="token operator">=</span><span class="token number">0</span>
<span class="token number">0x12</span>:pri<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>	offs<span class="token operator">=</span><span class="token number">0x1f89</span>
block_row_dump:
tab <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">row</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token variable">@0x1f89</span>
tl: <span class="token number">2</span> fb: <span class="token comment">--HDFL-- lb: 0x2 </span>
end_of_block_dump
<span class="token keyword">End</span> <span class="token keyword">dump</span> <span class="token keyword">data</span> blocks tsn: <span class="token number">6</span> <span class="token keyword">file</span><span class="token comment">#: 5 minblk 131 maxblk 131</span>

<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">16</span>:<span class="token number">15</span>:<span class="token number">28.220</span>
Processing Oradebug command <span class="token string">&#39;setmypid&#39;</span>

<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">16</span>:<span class="token number">15</span>:<span class="token number">28.220</span>
Oradebug command <span class="token string">&#39;setmypid&#39;</span> console output: <span class="token operator">&lt;</span>none<span class="token operator">&gt;</span>

<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">16</span>:<span class="token number">15</span>:<span class="token number">36.258</span>
Processing Oradebug command <span class="token string">&#39;tracefile_name&#39;</span>

<span class="token operator">*</span><span class="token operator">*</span><span class="token operator">*</span> <span class="token number">2024</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">16</span>:<span class="token number">15</span>:<span class="token number">36.258</span>
Oradebug command <span class="token string">&#39;tracefile_name&#39;</span> console output: 
<span class="token operator">/</span>u01<span class="token operator">/</span>app<span class="token operator">/</span>oracle<span class="token operator">/</span>diag<span class="token operator">/</span>rdbms<span class="token operator">/</span>testdb<span class="token operator">/</span>testdb<span class="token operator">/</span>trace<span class="token operator">/</span>testdb_ora_146306<span class="token punctuation">.</span>trc
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>data_block_dump,data header at 0x7faa1dfb0a64</p><p>=============== tsiz: 0x1f98 hsiz: 0x14 pbl: 0x7faa1dfb0a64 76543210 flag=-------- ntab=1 nrow=1 frre=-1 fsbo=0x14 fseo=0x1f89 avsp=0x1f75 tosp=0x1f84 0xe:pti[0] nrow=1 offs=0 0x12:pri[0] offs=0x1f89 block_row_dump: tab 0, row 0, @0x1f89 tl: 2 fb: --HDFL-- lb: 0x2 end_of_block_dump End dump data blocks tsn: 6 file#: 5 minblk 131 maxblk 131</p></div><h3 id="使用bbed找回删除的数据" tabindex="-1"><a class="header-anchor" href="#使用bbed找回删除的数据"><span>使用bbed找回删除的数据</span></a></h3><p>操作步骤：</p><ul><li><p>第0条数据仍然存在数据块中</p></li><li><p>找到第0条数据的row header 位置</p></li><li><p>改变row header中的Flag值即可</p></li><li><p>查找行记录位置</p></li></ul><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token punctuation">[</span>oracle@testdb ~<span class="token punctuation">]</span>$ bbed <span class="token assign-left variable">parfile</span><span class="token operator">=</span>bbed.par

BBED: Release <span class="token number">2.0</span>.0.0.0 - Limited Production on Thu Jan <span class="token number">18</span> <span class="token number">16</span>:23:34 <span class="token number">2024</span>

Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token number">1982</span>, <span class="token number">2011</span>, Oracle and/or its affiliates.  All rights reserved.

************* <span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span> For Oracle Internal Use only <span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span> ***************

BBED<span class="token operator">&gt;</span> info 
 File<span class="token comment">#  Name                                                        Size(blks)</span>
 -----  ----                                                        ----------
     <span class="token number">1</span>  /data/app/oracle/oradata/testdb/system01.dbf                         <span class="token number">0</span>
     <span class="token number">2</span>  /data/app/oracle/oradata/testdb/sysaux01.dbf                         <span class="token number">0</span>
     <span class="token number">3</span>  /data/app/oracle/oradata/testdb/undotbs01.dbf                        <span class="token number">0</span>
     <span class="token number">4</span>  /data/app/oracle/oradata/testdb/users01.dbf                          <span class="token number">0</span>
     <span class="token number">5</span>  /data/app/oracle/oradata/demo/demotbs01.dbf                          <span class="token number">0</span>
     <span class="token number">6</span>  /data/app/oracle/oradata/testdb/testtbs01.dbf                        <span class="token number">0</span>
     <span class="token number">7</span>  /data/app/oracle/oradata/other/panan01.dbf                           <span class="token number">0</span>
     <span class="token number">8</span>  /data/app/oracle/oradata/other/raotbs01.dbf                          <span class="token number">0</span>

BBED<span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> <span class="token function">file</span> <span class="token number">5</span> block <span class="token number">131</span>
	FILE<span class="token comment">#          	5</span>
	BLOCK<span class="token comment">#         	131</span>

BBED<span class="token operator">&gt;</span> <span class="token function">find</span> /c panpanng
 File: /data/app/oracle/oradata/demo/demotbs01.dbf <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
 Block: <span class="token number">131</span>              Offsets: <span class="token number">8180</span> to <span class="token number">8191</span>           Dba:0x01400083
------------------------------------------------------------------------
 70616e70 616e6e67 0106cf4b 

 <span class="token operator">&lt;</span><span class="token number">32</span> bytes per line<span class="token operator">&gt;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>查看row directory</li></ul><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>BBED<span class="token operator">&gt;</span> print kdbr
sb2 kdbr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>                                 @118      <span class="token number">8073</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>查看第0条记录的起始位置</li></ul><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>BBED<span class="token operator">&gt;</span> print *kdbr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
rowdata<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
----------
ub1 rowdata<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>                              @8173     0x3c
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>第0条记录在块内偏移量为 8173 ，而&#39;panpanng&#39;在块内的偏移量为 8180</p></div><ul><li>将第 0 条记录dump出来</li></ul><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>BBED<span class="token operator">&gt;</span> dump /v dba <span class="token number">5,131</span> offset <span class="token number">8173</span> count <span class="token number">32</span>
 File: /data/app/oracle/oradata/demo/demotbs01.dbf <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
 Block: <span class="token number">131</span>     Offsets: <span class="token number">8173</span> to <span class="token number">8191</span>  Dba:0x01400083
-------------------------------------------------------
 3c020202 c1020870 616e7061 6e6e6701 l <span class="token operator">&lt;</span><span class="token punctuation">..</span>.�<span class="token punctuation">..</span>panpanng.
 06cf4b                              l .�K

 <span class="token operator">&lt;</span><span class="token number">16</span> bytes per line<span class="token operator">&gt;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>修改Row Flag的值 将3c 改为 2c</li></ul><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>BBED<span class="token operator">&gt;</span> modify /x 2c offset <span class="token number">8173</span>
Warning: contents of previous BIFILE will be lost. Proceed? <span class="token punctuation">(</span>Y/N<span class="token punctuation">)</span> y
 File: /data/app/oracle/oradata/demo/demotbs01.dbf <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
 Block: <span class="token number">131</span>              Offsets: <span class="token number">8173</span> to <span class="token number">8191</span>           Dba:0x01400083
------------------------------------------------------------------------
 2c020202 c1020870 616e7061 6e6e6701 06cf4b 

 <span class="token operator">&lt;</span><span class="token number">32</span> bytes per line<span class="token operator">&gt;</span>

BBED<span class="token operator">&gt;</span> <span class="token function">sum</span> apply
Check value <span class="token keyword">for</span> File <span class="token number">5</span>, Block <span class="token number">131</span>:
current <span class="token operator">=</span> 0x4f2e, required <span class="token operator">=</span> 0x4f2e

BBED<span class="token operator">&gt;</span> dump /v dba <span class="token number">5,131</span> offset <span class="token number">8173</span> count <span class="token number">32</span>
 File: /data/app/oracle/oradata/demo/demotbs01.dbf <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
 Block: <span class="token number">131</span>     Offsets: <span class="token number">8173</span> to <span class="token number">8191</span>  Dba:0x01400083
-------------------------------------------------------
 2c020202 c1020870 616e7061 6e6e6701 l ,<span class="token punctuation">..</span>.�<span class="token punctuation">..</span>panpanng.
 06cf4b                              l .�K

 <span class="token operator">&lt;</span><span class="token number">16</span> bytes per line<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>验证</li></ul><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token keyword">alter</span> system flush buffer_cache<span class="token punctuation">;</span>

System altered<span class="token punctuation">.</span>

<span class="token keyword">SQL</span><span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> abelit<span class="token punctuation">.</span>abelitusers<span class="token punctuation">;</span>

	ID NAME
<span class="token comment">---------- --------------------</span>
	 <span class="token number">1</span> panpanng
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,72),o=[t];function l(c,i){return s(),a("div",null,o)}const k=n(p,[["render",l],["__file","bbed.html.vue"]]),d=JSON.parse('{"path":"/guide/database/oracle/backuprecovery/bbed.html","title":"BBED","lang":"zh-CN","frontmatter":{"title":"BBED","description":"BBED工具 Oracle BBED是一个能够浏览和编辑Oracle数据库中数据块的内部工具，它可以直接修改Oracle数据文件块的内容，在一些极端恢复场景下比较有用。 使用BBED工具是一种非常危险的方法，可能会导致数据不一致或丢失。在使用之前，请务必做好备份，并且尽量寻求专业的帮助。BBED工具不受Oracle服务支持，也不对外发布文档。如果您不确...","head":[["meta",{"property":"og:url","content":"https://github.com/abelit/abelit-datapeacock.git/guide/database/oracle/backuprecovery/bbed.html"}],["meta",{"property":"og:site_name","content":"数之雀"}],["meta",{"property":"og:title","content":"BBED"}],["meta",{"property":"og:description","content":"BBED工具 Oracle BBED是一个能够浏览和编辑Oracle数据库中数据块的内部工具，它可以直接修改Oracle数据文件块的内容，在一些极端恢复场景下比较有用。 使用BBED工具是一种非常危险的方法，可能会导致数据不一致或丢失。在使用之前，请务必做好备份，并且尽量寻求专业的帮助。BBED工具不受Oracle服务支持，也不对外发布文档。如果您不确..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-05-11T14:06:18.000Z"}],["meta",{"property":"article:author","content":"Abelit"}],["meta",{"property":"article:modified_time","content":"2024-05-11T14:06:18.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"BBED\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-05-11T14:06:18.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Abelit\\",\\"url\\":\\"https://github.com/abelit\\"}]}"]]},"headers":[{"level":2,"title":"BBED工具","slug":"bbed工具","link":"#bbed工具","children":[{"level":3,"title":"BBED可以做什么？","slug":"bbed可以做什么","link":"#bbed可以做什么","children":[]},{"level":3,"title":"BBED修复Oracle数据库块损坏问题修复的步骤","slug":"bbed修复oracle数据库块损坏问题修复的步骤","link":"#bbed修复oracle数据库块损坏问题修复的步骤","children":[]},{"level":3,"title":"BBED安装","slug":"bbed安装","link":"#bbed安装","children":[]},{"level":3,"title":"使用方法","slug":"使用方法","link":"#使用方法","children":[]},{"level":3,"title":"BBED参数","slug":"bbed参数","link":"#bbed参数","children":[]},{"level":3,"title":"获取内部块信息","slug":"获取内部块信息","link":"#获取内部块信息","children":[]}]},{"level":2,"title":"通过BBED修改数据","slug":"通过bbed修改数据","link":"#通过bbed修改数据","children":[]},{"level":2,"title":"BBED恢复delete的行","slug":"bbed恢复delete的行","link":"#bbed恢复delete的行","children":[{"level":3,"title":"dump数据块，查看flag","slug":"dump数据块-查看flag","link":"#dump数据块-查看flag","children":[]},{"level":3,"title":"删除数据","slug":"删除数据","link":"#删除数据","children":[]},{"level":3,"title":"使用bbed找回删除的数据","slug":"使用bbed找回删除的数据","link":"#使用bbed找回删除的数据","children":[]}]}],"git":{"createdTime":1715436378000,"updatedTime":1715436378000,"contributors":[{"name":"ableit","email":"ychenid@live.com","commits":1}]},"readingTime":{"minutes":11.51,"words":3454},"filePathRelative":"guide/database/oracle/backuprecovery/bbed.md","localizedDate":"2024年5月11日","autoDesc":true,"excerpt":"<h2>BBED工具</h2>\\n<p>Oracle BBED是一个能够浏览和编辑Oracle数据库中数据块的内部工具，它可以直接修改Oracle数据文件块的内容，在一些极端恢复场景下比较有用。</p>\\n<p>使用BBED工具是一种非常危险的方法，可能会导致数据不一致或丢失。在使用之前，请务必做好备份，并且尽量寻求专业的帮助。BBED工具不受Oracle服务支持，也不对外发布文档。如果您不确定如何使用BBED工具，建议您使用其他的方法，如RMAN，Data Pump，或者联系Oracle支持服务。</p>\\n<h3>BBED可以做什么？</h3>\\n<ul>\\n<li>更改数据</li>\\n<li>恢复受损的或删除的数据</li>\\n<li>修改文件头</li>\\n<li>损坏块并修复坏块</li>\\n</ul>"}');export{k as comp,d as data};
