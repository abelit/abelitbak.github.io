import{_ as c}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as p,o as i,c as u,b as l,w as a,a as s,f as r,d as n}from"./app-DR5J2daJ.js";const k={},d=s("h2",{id:"会话",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#会话"},[s("span",null,"会话")])],-1),m=s("div",{class:"language-sql line-numbers-mode","data-ext":"sql","data-title":"sql"},[s("pre",{class:"language-sql"},[s("code",null,[s("span",{class:"token keyword"},"select"),n(),s("span",{class:"token operator"},"*"),n(),s("span",{class:"token keyword"},"from"),n(" v$"),s("span",{class:"token keyword"},"session"),n(),s("span",{class:"token keyword"},"where"),n(),s("span",{class:"token keyword"},"type"),s("span",{class:"token operator"},"="),s("span",{class:"token string"},"'BACKGROUND'"),s("span",{class:"token punctuation"},";"),n(`
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"})])],-1),b=s("div",{class:"language-sql line-numbers-mode","data-ext":"sql","data-title":"sql"},[s("pre",{class:"language-sql"},[s("code",null,[s("span",{class:"token keyword"},"select"),n(),s("span",{class:"token operator"},"*"),n(),s("span",{class:"token keyword"},"from"),n(" v$"),s("span",{class:"token keyword"},"session"),n(),s("span",{class:"token keyword"},"where"),n(),s("span",{class:"token keyword"},"type"),s("span",{class:"token operator"},"="),s("span",{class:"token string"},"'USER'"),s("span",{class:"token punctuation"},";"),n(`
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"})])],-1),v=s("div",{class:"language-sql line-numbers-mode","data-ext":"sql","data-title":"sql"},[s("pre",{class:"language-sql"},[s("code",null,[s("span",{class:"token keyword"},"select"),n(),s("span",{class:"token operator"},"*"),n(),s("span",{class:"token keyword"},"from"),n(" v$"),s("span",{class:"token keyword"},"session"),n(),s("span",{class:"token keyword"},"where"),n(),s("span",{class:"token keyword"},"type"),s("span",{class:"token operator"},"="),s("span",{class:"token string"},"'USER'"),n(),s("span",{class:"token operator"},"and"),n(),s("span",{class:"token keyword"},"status"),s("span",{class:"token operator"},"="),s("span",{class:"token string"},"'ACTIVE'"),s("span",{class:"token punctuation"},";"),n(`
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"})])],-1),w=s("h2",{id:"阻塞会话",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#阻塞会话"},[s("span",null,"阻塞会话")])],-1),y=s("div",{class:"language-sql line-numbers-mode","data-ext":"sql","data-title":"sql"},[s("pre",{class:"language-sql"},[s("code",null,[s("span",{class:"token comment"},"--使用v$session来查看单实例的阻塞session信息"),n(`
`),s("span",{class:"token keyword"},"SELECT"),n(`
    lpad`),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"' '"),s("span",{class:"token punctuation"},","),n(),s("span",{class:"token number"},"5"),n(),s("span",{class:"token operator"},"*"),s("span",{class:"token punctuation"},"("),s("span",{class:"token keyword"},"level"),n(),s("span",{class:"token operator"},"-"),n(),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},")"),n(`
    `),s("span",{class:"token operator"},"||"),n(" s"),s("span",{class:"token punctuation"},"."),n("username "),s("span",{class:"token keyword"},"AS"),n(" user_name"),s("span",{class:"token punctuation"},","),n(`
    lpad`),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"' '"),s("span",{class:"token punctuation"},","),n(),s("span",{class:"token number"},"5"),n(),s("span",{class:"token operator"},"*"),s("span",{class:"token punctuation"},"("),s("span",{class:"token keyword"},"level"),n(),s("span",{class:"token operator"},"-"),n(),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},")"),n(`
    `),s("span",{class:"token operator"},"||"),n(" s"),s("span",{class:"token punctuation"},"."),n("sid      "),s("span",{class:"token keyword"},"AS"),n(" session_id"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n("machine"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n("program"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),s("span",{class:"token keyword"},"serial"),s("span",{class:"token comment"},"#,"),n(`
    s`),s("span",{class:"token punctuation"},"."),n("sql_id"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n("row_wait_obj"),s("span",{class:"token comment"},"#,"),n(`
    s`),s("span",{class:"token punctuation"},"."),n("wait_class"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n("event"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n("p1"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n("p2"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n("p3"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n(`seconds_in_wait
`),s("span",{class:"token keyword"},"FROM"),n(`
    v$`),s("span",{class:"token keyword"},"session"),n(` s
`),s("span",{class:"token keyword"},"WHERE"),n(`
    s`),s("span",{class:"token punctuation"},"."),n("blocking_session "),s("span",{class:"token operator"},"IS"),n(),s("span",{class:"token operator"},"NOT"),n(),s("span",{class:"token boolean"},"NULL"),n(`
    `),s("span",{class:"token operator"},"OR"),n(" s"),s("span",{class:"token punctuation"},"."),n("sid "),s("span",{class:"token operator"},"IN"),n(),s("span",{class:"token punctuation"},"("),n(`
        `),s("span",{class:"token keyword"},"SELECT"),n(),s("span",{class:"token keyword"},"DISTINCT"),n(`
            blocking_session
        `),s("span",{class:"token keyword"},"FROM"),n(`
            v$`),s("span",{class:"token keyword"},"session"),n(`
    `),s("span",{class:"token punctuation"},")"),n(`
`),s("span",{class:"token keyword"},"START"),n(),s("span",{class:"token keyword"},"WITH"),n(`
    s`),s("span",{class:"token punctuation"},"."),n("blocking_session "),s("span",{class:"token operator"},"IS"),n(),s("span",{class:"token boolean"},"NULL"),n(`
`),s("span",{class:"token keyword"},"CONNECT"),n(),s("span",{class:"token keyword"},"BY"),n(`
    PRIOR s`),s("span",{class:"token punctuation"},"."),n("sid "),s("span",{class:"token operator"},"="),n(" s"),s("span",{class:"token punctuation"},"."),n("blocking_session"),s("span",{class:"token punctuation"},";"),n(`
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),g=s("div",{class:"language-sql line-numbers-mode","data-ext":"sql","data-title":"sql"},[s("pre",{class:"language-sql"},[s("code",null,[s("span",{class:"token keyword"},"SELECT"),n(`
    lpad`),s("span",{class:"token punctuation"},"("),n(`
        `),s("span",{class:"token string"},"' '"),s("span",{class:"token punctuation"},","),n(),s("span",{class:"token number"},"5"),n(),s("span",{class:"token operator"},"*"),s("span",{class:"token punctuation"},"("),s("span",{class:"token keyword"},"level"),n(),s("span",{class:"token operator"},"-"),n(),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},")"),n(`
    `),s("span",{class:"token punctuation"},")"),n(`
    `),s("span",{class:"token operator"},"||"),n(" s"),s("span",{class:"token punctuation"},"."),n("username "),s("span",{class:"token keyword"},"AS"),n(" user_name"),s("span",{class:"token punctuation"},","),n(`
    lpad`),s("span",{class:"token punctuation"},"("),n(`
        `),s("span",{class:"token string"},"' '"),s("span",{class:"token punctuation"},","),n(),s("span",{class:"token number"},"5"),n(),s("span",{class:"token operator"},"*"),s("span",{class:"token punctuation"},"("),s("span",{class:"token keyword"},"level"),n(),s("span",{class:"token operator"},"-"),n(),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},")"),n(`
    `),s("span",{class:"token punctuation"},")"),n(`
    `),s("span",{class:"token operator"},"||"),n(" s"),s("span",{class:"token punctuation"},"."),n("sid      "),s("span",{class:"token keyword"},"AS"),n(" session_id"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),s("span",{class:"token keyword"},"serial"),s("span",{class:"token comment"},"#,"),n(`
    s`),s("span",{class:"token punctuation"},"."),n("machine"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n("program"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n("sql_id"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n("row_wait_obj"),s("span",{class:"token comment"},"#,"),n(`
    s`),s("span",{class:"token punctuation"},"."),n("wait_class"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n("event"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n("p1"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n("p2"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n("p3"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n("seconds_in_wait"),s("span",{class:"token punctuation"},","),n(`
    q`),s("span",{class:"token punctuation"},"."),n(`sql_text
`),s("span",{class:"token keyword"},"FROM"),n(`
    v$`),s("span",{class:"token keyword"},"session"),n(` s
    `),s("span",{class:"token keyword"},"LEFT"),n(),s("span",{class:"token keyword"},"JOIN"),n(" v$sqlarea q "),s("span",{class:"token keyword"},"ON"),n(" s"),s("span",{class:"token punctuation"},"."),n("sql_id "),s("span",{class:"token operator"},"="),n(" q"),s("span",{class:"token punctuation"},"."),n(`sql_id
`),s("span",{class:"token keyword"},"WHERE"),n(`
    s`),s("span",{class:"token punctuation"},"."),n("blocking_session "),s("span",{class:"token operator"},"IS"),n(),s("span",{class:"token operator"},"NOT"),n(),s("span",{class:"token boolean"},"NULL"),n(`
    `),s("span",{class:"token operator"},"OR"),n(" s"),s("span",{class:"token punctuation"},"."),n("sid "),s("span",{class:"token operator"},"IN"),n(),s("span",{class:"token punctuation"},"("),n(`
        `),s("span",{class:"token keyword"},"SELECT"),n(),s("span",{class:"token keyword"},"DISTINCT"),n(`
            blocking_session
        `),s("span",{class:"token keyword"},"FROM"),n(`
            v$`),s("span",{class:"token keyword"},"session"),n(`
    `),s("span",{class:"token punctuation"},")"),n(`
`),s("span",{class:"token keyword"},"START"),n(),s("span",{class:"token keyword"},"WITH"),n(`
    s`),s("span",{class:"token punctuation"},"."),n("blocking_session "),s("span",{class:"token operator"},"IS"),n(),s("span",{class:"token boolean"},"NULL"),n(`
`),s("span",{class:"token keyword"},"CONNECT"),n(),s("span",{class:"token keyword"},"BY"),n(`
    PRIOR s`),s("span",{class:"token punctuation"},"."),n("sid "),s("span",{class:"token operator"},"="),n(" s"),s("span",{class:"token punctuation"},"."),n("blocking_session"),s("span",{class:"token punctuation"},";"),n(`
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),_=s("div",{class:"language-sql line-numbers-mode","data-ext":"sql","data-title":"sql"},[s("pre",{class:"language-sql"},[s("code",null,[s("span",{class:"token comment"},"--使用v$session来查看RAC数据库和单实例阻塞session信息"),n(`
`),s("span",{class:"token keyword"},"SELECT"),n(`
    lpad`),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"' '"),s("span",{class:"token punctuation"},","),n(),s("span",{class:"token number"},"5"),n(),s("span",{class:"token operator"},"*"),s("span",{class:"token punctuation"},"("),s("span",{class:"token keyword"},"level"),n(),s("span",{class:"token operator"},"-"),n(),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},")"),n(`
    `),s("span",{class:"token operator"},"||"),n(" s"),s("span",{class:"token punctuation"},"."),n("username username"),s("span",{class:"token punctuation"},","),n(`
    lpad`),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"' '"),s("span",{class:"token punctuation"},","),n(),s("span",{class:"token number"},"5"),n(),s("span",{class:"token operator"},"*"),s("span",{class:"token punctuation"},"("),s("span",{class:"token keyword"},"level"),n(),s("span",{class:"token operator"},"-"),n(),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},")"),n(`
    `),s("span",{class:"token operator"},"||"),n(" s"),s("span",{class:"token punctuation"},"."),n(`inst_id
    `),s("span",{class:"token operator"},"||"),n(),s("span",{class:"token string"},"','"),n(`
    `),s("span",{class:"token operator"},"||"),n(" s"),s("span",{class:"token punctuation"},"."),n("sid inst_sid"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),s("span",{class:"token keyword"},"serial"),s("span",{class:"token comment"},"#,"),n(`
    s`),s("span",{class:"token punctuation"},"."),n("machine"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n("program"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n("sql_id"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n("row_wait_obj"),s("span",{class:"token comment"},"#,"),n(`
    s`),s("span",{class:"token punctuation"},"."),n("wait_class"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n("event"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n("p1"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n("p2"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n("p3"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n("seconds_in_wait"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n(`blocking_instance
    `),s("span",{class:"token operator"},"||"),n(),s("span",{class:"token string"},"','"),n(`
    `),s("span",{class:"token operator"},"||"),n(" s"),s("span",{class:"token punctuation"},"."),n(`blocking_session
`),s("span",{class:"token keyword"},"FROM"),n(`
    gv$`),s("span",{class:"token keyword"},"session"),n(` s
`),s("span",{class:"token keyword"},"WHERE"),n(`
    s`),s("span",{class:"token punctuation"},"."),n("blocking_session "),s("span",{class:"token operator"},"IS"),n(),s("span",{class:"token operator"},"NOT"),n(),s("span",{class:"token boolean"},"NULL"),n(`
    `),s("span",{class:"token operator"},"OR"),n(),s("span",{class:"token punctuation"},"("),n(" s"),s("span",{class:"token punctuation"},"."),n(`inst_id
         `),s("span",{class:"token operator"},"||"),n(),s("span",{class:"token string"},"','"),n(`
         `),s("span",{class:"token operator"},"||"),n(" s"),s("span",{class:"token punctuation"},"."),n("sid "),s("span",{class:"token punctuation"},")"),n(),s("span",{class:"token operator"},"IN"),n(),s("span",{class:"token punctuation"},"("),n(`
        `),s("span",{class:"token keyword"},"SELECT"),n(),s("span",{class:"token keyword"},"DISTINCT"),n(`
            blocking_instance
            `),s("span",{class:"token operator"},"||"),n(),s("span",{class:"token string"},"','"),n(`
            `),s("span",{class:"token operator"},"||"),n(` blocking_session
        `),s("span",{class:"token keyword"},"FROM"),n(`
            gv$`),s("span",{class:"token keyword"},"session"),n(`
    `),s("span",{class:"token punctuation"},")"),n(`
`),s("span",{class:"token keyword"},"START"),n(),s("span",{class:"token keyword"},"WITH"),n(`
    `),s("span",{class:"token punctuation"},"("),n(" s"),s("span",{class:"token punctuation"},"."),n(`blocking_instance
      `),s("span",{class:"token operator"},"||"),n(),s("span",{class:"token string"},"','"),n(`
      `),s("span",{class:"token operator"},"||"),n(" s"),s("span",{class:"token punctuation"},"."),n("blocking_session "),s("span",{class:"token punctuation"},")"),n(),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string"},"','"),n(`
`),s("span",{class:"token keyword"},"CONNECT"),n(),s("span",{class:"token keyword"},"BY"),n(`
    PRIOR `),s("span",{class:"token punctuation"},"("),n(" s"),s("span",{class:"token punctuation"},"."),n(`inst_id
            `),s("span",{class:"token operator"},"||"),n(),s("span",{class:"token string"},"','"),n(`
            `),s("span",{class:"token operator"},"||"),n(" s"),s("span",{class:"token punctuation"},"."),n("sid "),s("span",{class:"token punctuation"},")"),n(),s("span",{class:"token operator"},"="),n(),s("span",{class:"token punctuation"},"("),n(" s"),s("span",{class:"token punctuation"},"."),n(`blocking_instance
                           `),s("span",{class:"token operator"},"||"),n(),s("span",{class:"token string"},"','"),n(`
                           `),s("span",{class:"token operator"},"||"),n(" s"),s("span",{class:"token punctuation"},"."),n("blocking_session "),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),n(`
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),h=s("div",{class:"language-sql line-numbers-mode","data-ext":"sql","data-title":"sql"},[s("pre",{class:"language-sql"},[s("code",null,[s("span",{class:"token comment"},"--使用v$session来查看RAC数据库和单实例阻塞session信息"),n(`
`),s("span",{class:"token keyword"},"SELECT"),n(`
    lpad`),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"' '"),s("span",{class:"token punctuation"},","),n(),s("span",{class:"token number"},"5"),n(),s("span",{class:"token operator"},"*"),s("span",{class:"token punctuation"},"("),s("span",{class:"token keyword"},"level"),n(),s("span",{class:"token operator"},"-"),n(),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},")"),n(`
    `),s("span",{class:"token operator"},"||"),n(" s"),s("span",{class:"token punctuation"},"."),n("username username"),s("span",{class:"token punctuation"},","),n(`
    lpad`),s("span",{class:"token punctuation"},"("),s("span",{class:"token string"},"' '"),s("span",{class:"token punctuation"},","),n(),s("span",{class:"token number"},"5"),n(),s("span",{class:"token operator"},"*"),s("span",{class:"token punctuation"},"("),s("span",{class:"token keyword"},"level"),n(),s("span",{class:"token operator"},"-"),n(),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},")"),n(`
    `),s("span",{class:"token operator"},"||"),n(" s"),s("span",{class:"token punctuation"},"."),n(`inst_id
    `),s("span",{class:"token operator"},"||"),n(),s("span",{class:"token string"},"','"),n(`
    `),s("span",{class:"token operator"},"||"),n(" s"),s("span",{class:"token punctuation"},"."),n("sid inst_sid"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),s("span",{class:"token keyword"},"serial"),s("span",{class:"token comment"},"#,"),n(`
    s`),s("span",{class:"token punctuation"},"."),n("machine"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n("program"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n("sql_id"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n("row_wait_obj"),s("span",{class:"token comment"},"#,"),n(`
    s`),s("span",{class:"token punctuation"},"."),n("wait_class"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n("event"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n("p1"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n("p2"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n("p3"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n("seconds_in_wait"),s("span",{class:"token punctuation"},","),n(`
    s`),s("span",{class:"token punctuation"},"."),n(`blocking_instance
    `),s("span",{class:"token operator"},"||"),n(),s("span",{class:"token string"},"','"),n(`
    `),s("span",{class:"token operator"},"||"),n(" s"),s("span",{class:"token punctuation"},"."),n("blocking_session"),s("span",{class:"token punctuation"},","),n(`
    q`),s("span",{class:"token punctuation"},"."),n(`sql_text
`),s("span",{class:"token keyword"},"FROM"),n(`
    gv$`),s("span",{class:"token keyword"},"session"),n(" s "),s("span",{class:"token keyword"},"join"),n(" gv$sqlarea q "),s("span",{class:"token keyword"},"on"),n(" s"),s("span",{class:"token punctuation"},"."),n("sql_id"),s("span",{class:"token operator"},"="),n("q"),s("span",{class:"token punctuation"},"."),n(`sql_id
`),s("span",{class:"token keyword"},"WHERE"),n(`
    s`),s("span",{class:"token punctuation"},"."),n("blocking_session "),s("span",{class:"token operator"},"IS"),n(),s("span",{class:"token operator"},"NOT"),n(),s("span",{class:"token boolean"},"NULL"),n(`
    `),s("span",{class:"token operator"},"OR"),n(),s("span",{class:"token punctuation"},"("),n(" s"),s("span",{class:"token punctuation"},"."),n(`inst_id
         `),s("span",{class:"token operator"},"||"),n(),s("span",{class:"token string"},"','"),n(`
         `),s("span",{class:"token operator"},"||"),n(" s"),s("span",{class:"token punctuation"},"."),n("sid "),s("span",{class:"token punctuation"},")"),n(),s("span",{class:"token operator"},"IN"),n(),s("span",{class:"token punctuation"},"("),n(`
        `),s("span",{class:"token keyword"},"SELECT"),n(),s("span",{class:"token keyword"},"DISTINCT"),n(`
            blocking_instance
            `),s("span",{class:"token operator"},"||"),n(),s("span",{class:"token string"},"','"),n(`
            `),s("span",{class:"token operator"},"||"),n(` blocking_session
        `),s("span",{class:"token keyword"},"FROM"),n(`
            gv$`),s("span",{class:"token keyword"},"session"),n(`
    `),s("span",{class:"token punctuation"},")"),n(`
`),s("span",{class:"token keyword"},"START"),n(),s("span",{class:"token keyword"},"WITH"),n(`
    `),s("span",{class:"token punctuation"},"("),n(" s"),s("span",{class:"token punctuation"},"."),n(`blocking_instance
      `),s("span",{class:"token operator"},"||"),n(),s("span",{class:"token string"},"','"),n(`
      `),s("span",{class:"token operator"},"||"),n(" s"),s("span",{class:"token punctuation"},"."),n("blocking_session "),s("span",{class:"token punctuation"},")"),n(),s("span",{class:"token operator"},"="),n(),s("span",{class:"token string"},"','"),n(`
`),s("span",{class:"token keyword"},"CONNECT"),n(),s("span",{class:"token keyword"},"BY"),n(`
    PRIOR `),s("span",{class:"token punctuation"},"("),n(" s"),s("span",{class:"token punctuation"},"."),n(`inst_id
            `),s("span",{class:"token operator"},"||"),n(),s("span",{class:"token string"},"','"),n(`
            `),s("span",{class:"token operator"},"||"),n(" s"),s("span",{class:"token punctuation"},"."),n("sid "),s("span",{class:"token punctuation"},")"),n(),s("span",{class:"token operator"},"="),n(),s("span",{class:"token punctuation"},"("),n(" s"),s("span",{class:"token punctuation"},"."),n(`blocking_instance
                           `),s("span",{class:"token operator"},"||"),n(),s("span",{class:"token string"},"','"),n(`
                           `),s("span",{class:"token operator"},"||"),n(" s"),s("span",{class:"token punctuation"},"."),n("blocking_session "),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},";"),n(`
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])],-1),q=r(`<h2 id="查询使用回滚段的会话" tabindex="-1"><a class="header-anchor" href="#查询使用回滚段的会话"><span>查询使用回滚段的会话</span></a></h2><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span>   b<span class="token punctuation">.</span><span class="token keyword">TABLESPACE</span><span class="token punctuation">,</span>
         b<span class="token punctuation">.</span>segfile<span class="token comment">#,</span>
         b<span class="token punctuation">.</span>segblk<span class="token comment">#,</span>
         b<span class="token punctuation">.</span>blocks<span class="token punctuation">,</span>
   b<span class="token punctuation">.</span>blocks<span class="token operator">*</span><span class="token number">16</span><span class="token operator">/</span><span class="token number">1024</span> <span class="token keyword">as</span> MB<span class="token punctuation">,</span>
         a<span class="token punctuation">.</span>SID<span class="token punctuation">,</span>
         a<span class="token punctuation">.</span><span class="token keyword">serial</span><span class="token comment">#,</span>
         a<span class="token punctuation">.</span><span class="token keyword">status</span>
<span class="token keyword">FROM</span>     v$<span class="token keyword">session</span> a<span class="token punctuation">,</span>
         v$sort_usage b
<span class="token keyword">WHERE</span>    a<span class="token punctuation">.</span>saddr <span class="token operator">=</span> b<span class="token punctuation">.</span>session_addr
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> b<span class="token punctuation">.</span><span class="token keyword">TABLESPACE</span><span class="token punctuation">,</span>
         b<span class="token punctuation">.</span>segfile<span class="token comment">#,</span>
         b<span class="token punctuation">.</span>segblk<span class="token comment">#,</span>
         b<span class="token punctuation">.</span>blocks<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="等待链" tabindex="-1"><a class="header-anchor" href="#等待链"><span>等待链</span></a></h2><div class="language-sql line-numbers-mode" data-ext="sql" data-title="sql"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
    rpad<span class="token punctuation">(</span>
        <span class="token string">&#39;+&#39;</span><span class="token punctuation">,</span> <span class="token keyword">level</span><span class="token punctuation">,</span> <span class="token string">&#39;-&#39;</span>
    <span class="token punctuation">)</span>
    <span class="token operator">||</span> sid
    <span class="token operator">||</span> <span class="token string">&#39; &#39;</span>
    <span class="token operator">||</span> sess<span class="token punctuation">.</span>module session_detail<span class="token punctuation">,</span>
    blocker_sid<span class="token punctuation">,</span>
    wait_event_text<span class="token punctuation">,</span>
    object_name<span class="token punctuation">,</span>
    rpad<span class="token punctuation">(</span>
        <span class="token string">&#39; &#39;</span><span class="token punctuation">,</span> <span class="token keyword">level</span>
    <span class="token punctuation">)</span>
    <span class="token operator">||</span> sql_text    sql_text
<span class="token keyword">FROM</span>
    v$wait_chains c
    <span class="token keyword">LEFT</span> <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span> dba_objects   o <span class="token keyword">ON</span> <span class="token punctuation">(</span> row_wait_obj<span class="token comment"># = object_id )</span>
    <span class="token keyword">JOIN</span> v$<span class="token keyword">session</span>     sess <span class="token keyword">USING</span> <span class="token punctuation">(</span> sid <span class="token punctuation">)</span>
    <span class="token keyword">LEFT</span> <span class="token keyword">OUTER</span> <span class="token keyword">JOIN</span> v$<span class="token keyword">sql</span>         <span class="token keyword">sql</span> <span class="token keyword">ON</span> <span class="token punctuation">(</span> <span class="token keyword">sql</span><span class="token punctuation">.</span>sql_id <span class="token operator">=</span> sess<span class="token punctuation">.</span>sql_id
                                   <span class="token operator">AND</span> <span class="token keyword">sql</span><span class="token punctuation">.</span>child_number <span class="token operator">=</span> sess<span class="token punctuation">.</span>sql_child_number <span class="token punctuation">)</span>
<span class="token keyword">CONNECT</span> <span class="token keyword">BY</span> PRIOR sid <span class="token operator">=</span> blocker_sid
           <span class="token operator">AND</span> PRIOR sess_serial<span class="token comment"># = blocker_sess_serial#</span>
           <span class="token operator">AND</span> PRIOR instance <span class="token operator">=</span> blocker_instance <span class="token keyword">START</span> <span class="token keyword">WITH</span> blocker_is_valid <span class="token operator">=</span> <span class="token string">&#39;FALSE&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4);function T(E,R){const o=p("CodeTabs");return i(),u("div",null,[d,l(o,{id:"3",data:[{id:"后台会话"},{id:"用户会话"},{id:"活动会话"}],active:0},{title0:a(({value:e,isActive:t})=>[n("后台会话")]),title1:a(({value:e,isActive:t})=>[n("用户会话")]),title2:a(({value:e,isActive:t})=>[n("活动会话")]),tab0:a(({value:e,isActive:t})=>[m]),tab1:a(({value:e,isActive:t})=>[b]),tab2:a(({value:e,isActive:t})=>[v]),_:1}),w,l(o,{id:"17",data:[{id:"单实例"},{id:"单实例（带SQL）"},{id:"RAC"},{id:"RAC（带SQL）"}],active:0},{title0:a(({value:e,isActive:t})=>[n("单实例")]),title1:a(({value:e,isActive:t})=>[n("单实例（带SQL）")]),title2:a(({value:e,isActive:t})=>[n("RAC")]),title3:a(({value:e,isActive:t})=>[n("RAC（带SQL）")]),tab0:a(({value:e,isActive:t})=>[y]),tab1:a(({value:e,isActive:t})=>[g]),tab2:a(({value:e,isActive:t})=>[_]),tab3:a(({value:e,isActive:t})=>[h]),_:1}),q])}const S=c(k,[["render",T],["__file","session.html.vue"]]),O=JSON.parse('{"path":"/guide/database/oracle/session.html","title":"会话","lang":"zh-CN","frontmatter":{"title":"会话","description":"会话 阻塞会话 查询使用回滚段的会话 等待链","head":[["meta",{"property":"og:url","content":"https://github.com/abelit/abelit-datapeacock.git/guide/database/oracle/session.html"}],["meta",{"property":"og:site_name","content":"数之雀"}],["meta",{"property":"og:title","content":"会话"}],["meta",{"property":"og:description","content":"会话 阻塞会话 查询使用回滚段的会话 等待链"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-05-11T14:06:18.000Z"}],["meta",{"property":"article:author","content":"Abelit"}],["meta",{"property":"article:modified_time","content":"2024-05-11T14:06:18.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"会话\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-05-11T14:06:18.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Abelit\\",\\"url\\":\\"https://github.com/abelit\\"}]}"]]},"headers":[{"level":2,"title":"会话","slug":"会话","link":"#会话","children":[]},{"level":2,"title":"阻塞会话","slug":"阻塞会话","link":"#阻塞会话","children":[]},{"level":2,"title":"查询使用回滚段的会话","slug":"查询使用回滚段的会话","link":"#查询使用回滚段的会话","children":[]},{"level":2,"title":"等待链","slug":"等待链","link":"#等待链","children":[]}],"git":{"createdTime":1715436378000,"updatedTime":1715436378000,"contributors":[{"name":"ableit","email":"ychenid@live.com","commits":1}]},"readingTime":{"minutes":1.59,"words":477},"filePathRelative":"guide/database/oracle/session.md","localizedDate":"2024年5月11日","autoDesc":true,"excerpt":"<h2>会话</h2>\\n\\n<h2>阻塞会话</h2>\\n\\n<h2>查询使用回滚段的会话</h2>\\n<div class=\\"language-sql\\" data-ext=\\"sql\\" data-title=\\"sql\\"><pre class=\\"language-sql\\"><code><span class=\\"token keyword\\">SELECT</span>   b<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">TABLESPACE</span><span class=\\"token punctuation\\">,</span>\\n         b<span class=\\"token punctuation\\">.</span>segfile<span class=\\"token comment\\">#,</span>\\n         b<span class=\\"token punctuation\\">.</span>segblk<span class=\\"token comment\\">#,</span>\\n         b<span class=\\"token punctuation\\">.</span>blocks<span class=\\"token punctuation\\">,</span>\\n   b<span class=\\"token punctuation\\">.</span>blocks<span class=\\"token operator\\">*</span><span class=\\"token number\\">16</span><span class=\\"token operator\\">/</span><span class=\\"token number\\">1024</span> <span class=\\"token keyword\\">as</span> MB<span class=\\"token punctuation\\">,</span>\\n         a<span class=\\"token punctuation\\">.</span>SID<span class=\\"token punctuation\\">,</span>\\n         a<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">serial</span><span class=\\"token comment\\">#,</span>\\n         a<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">status</span>\\n<span class=\\"token keyword\\">FROM</span>     v$<span class=\\"token keyword\\">session</span> a<span class=\\"token punctuation\\">,</span>\\n         v$sort_usage b\\n<span class=\\"token keyword\\">WHERE</span>    a<span class=\\"token punctuation\\">.</span>saddr <span class=\\"token operator\\">=</span> b<span class=\\"token punctuation\\">.</span>session_addr\\n<span class=\\"token keyword\\">ORDER</span> <span class=\\"token keyword\\">BY</span> b<span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">TABLESPACE</span><span class=\\"token punctuation\\">,</span>\\n         b<span class=\\"token punctuation\\">.</span>segfile<span class=\\"token comment\\">#,</span>\\n         b<span class=\\"token punctuation\\">.</span>segblk<span class=\\"token comment\\">#,</span>\\n         b<span class=\\"token punctuation\\">.</span>blocks<span class=\\"token punctuation\\">;</span>\\n</code></pre></div>"}');export{S as comp,O as data};
